(() => { var _a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s,_t,_u,_v,__freeze=Object.freeze,__defProp=Object.defineProperty,__template=(t,e)=>__freeze(__defProp(t,"raw",{value:__freeze(e||t.slice())}));!function(){"use strict";function t(t,e){for(var i=0;i<e.length;i++){const n=e[i];if("string"!=typeof n&&!Array.isArray(n))for(const e in n)if("default"!==e&&!(e in t)){const i=Object.getOwnPropertyDescriptor(n,e);i&&Object.defineProperty(t,e,i.get?i:{enumerable:!0,get:()=>n[e]})}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}const e="https://news.google.com",i="1.0.89",n="https://news.google.com/swg/js/v1";var s=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.IMPRESSION_PAYWALL=1]="IMPRESSION_PAYWALL",t[t.IMPRESSION_AD=2]="IMPRESSION_AD",t[t.IMPRESSION_OFFERS=3]="IMPRESSION_OFFERS",t[t.IMPRESSION_SUBSCRIBE_BUTTON=4]="IMPRESSION_SUBSCRIBE_BUTTON",t[t.IMPRESSION_SMARTBOX=5]="IMPRESSION_SMARTBOX",t[t.IMPRESSION_SWG_BUTTON=6]="IMPRESSION_SWG_BUTTON",t[t.IMPRESSION_CLICK_TO_SHOW_OFFERS=7]="IMPRESSION_CLICK_TO_SHOW_OFFERS",t[t.IMPRESSION_CLICK_TO_SHOW_OFFERS_OR_ALREADY_SUBSCRIBED=8]="IMPRESSION_CLICK_TO_SHOW_OFFERS_OR_ALREADY_SUBSCRIBED",t[t.IMPRESSION_SUBSCRIPTION_COMPLETE=9]="IMPRESSION_SUBSCRIPTION_COMPLETE",t[t.IMPRESSION_ACCOUNT_CHANGED=10]="IMPRESSION_ACCOUNT_CHANGED",t[t.IMPRESSION_PAGE_LOAD=11]="IMPRESSION_PAGE_LOAD",t[t.IMPRESSION_LINK=12]="IMPRESSION_LINK",t[t.IMPRESSION_SAVE_SUBSCR_TO_GOOGLE=13]="IMPRESSION_SAVE_SUBSCR_TO_GOOGLE",t[t.IMPRESSION_GOOGLE_UPDATED=14]="IMPRESSION_GOOGLE_UPDATED",t[t.IMPRESSION_SHOW_OFFERS_SMARTBOX=15]="IMPRESSION_SHOW_OFFERS_SMARTBOX",t[t.IMPRESSION_SHOW_OFFERS_SWG_BUTTON=16]="IMPRESSION_SHOW_OFFERS_SWG_BUTTON",t[t.IMPRESSION_SELECT_OFFER_SMARTBOX=17]="IMPRESSION_SELECT_OFFER_SMARTBOX",t[t.IMPRESSION_SELECT_OFFER_SWG_BUTTON=18]="IMPRESSION_SELECT_OFFER_SWG_BUTTON",t[t.IMPRESSION_SHOW_CONTRIBUTIONS_SWG_BUTTON=19]="IMPRESSION_SHOW_CONTRIBUTIONS_SWG_BUTTON",t[t.IMPRESSION_SELECT_CONTRIBUTION_SWG_BUTTON=20]="IMPRESSION_SELECT_CONTRIBUTION_SWG_BUTTON",t[t.IMPRESSION_METER_TOAST=21]="IMPRESSION_METER_TOAST",t[t.IMPRESSION_REGWALL=22]="IMPRESSION_REGWALL",t[t.IMPRESSION_SHOWCASE_REGWALL=23]="IMPRESSION_SHOWCASE_REGWALL",t[t.IMPRESSION_SWG_SUBSCRIPTION_MINI_PROMPT=24]="IMPRESSION_SWG_SUBSCRIPTION_MINI_PROMPT",t[t.IMPRESSION_SWG_CONTRIBUTION_MINI_PROMPT=25]="IMPRESSION_SWG_CONTRIBUTION_MINI_PROMPT",t[t.IMPRESSION_CONTRIBUTION_OFFERS=26]="IMPRESSION_CONTRIBUTION_OFFERS",t[t.IMPRESSION_TWG_COUNTER=27]="IMPRESSION_TWG_COUNTER",t[t.IMPRESSION_TWG_SITE_SUPPORTER_WALL=28]="IMPRESSION_TWG_SITE_SUPPORTER_WALL",t[t.IMPRESSION_TWG_PUBLICATION=29]="IMPRESSION_TWG_PUBLICATION",t[t.IMPRESSION_TWG_STATIC_BUTTON=30]="IMPRESSION_TWG_STATIC_BUTTON",t[t.IMPRESSION_TWG_DYNAMIC_BUTTON=31]="IMPRESSION_TWG_DYNAMIC_BUTTON",t[t.IMPRESSION_TWG_STICKER_SELECTION_SCREEN=32]="IMPRESSION_TWG_STICKER_SELECTION_SCREEN",t[t.IMPRESSION_TWG_PUBLICATION_NOT_SET_UP=33]="IMPRESSION_TWG_PUBLICATION_NOT_SET_UP",t[t.IMPRESSION_REGWALL_OPT_IN=34]="IMPRESSION_REGWALL_OPT_IN",t[t.IMPRESSION_NEWSLETTER_OPT_IN=35]="IMPRESSION_NEWSLETTER_OPT_IN",t[t.IMPRESSION_SUBSCRIPTION_OFFERS_ERROR=36]="IMPRESSION_SUBSCRIPTION_OFFERS_ERROR",t[t.IMPRESSION_CONTRIBUTION_OFFERS_ERROR=37]="IMPRESSION_CONTRIBUTION_OFFERS_ERROR",t[t.IMPRESSION_TWG_SHORTENED_STICKER_FLOW=38]="IMPRESSION_TWG_SHORTENED_STICKER_FLOW",t[t.IMPRESSION_SUBSCRIPTION_LINKING_LOADING=39]="IMPRESSION_SUBSCRIPTION_LINKING_LOADING",t[t.IMPRESSION_SUBSCRIPTION_LINKING_COMPLETE=40]="IMPRESSION_SUBSCRIPTION_LINKING_COMPLETE",t[t.IMPRESSION_SUBSCRIPTION_LINKING_ERROR=41]="IMPRESSION_SUBSCRIPTION_LINKING_ERROR",t[t.IMPRESSION_SURVEY=42]="IMPRESSION_SURVEY",t[t.IMPRESSION_REGWALL_ERROR=43]="IMPRESSION_REGWALL_ERROR",t[t.IMPRESSION_NEWSLETTER_ERROR=44]="IMPRESSION_NEWSLETTER_ERROR",t[t.IMPRESSION_SURVEY_ERROR=45]="IMPRESSION_SURVEY_ERROR",t[t.IMPRESSION_METER_TOAST_ERROR=46]="IMPRESSION_METER_TOAST_ERROR",t[t.IMPRESSION_MINI_PROMPT=47]="IMPRESSION_MINI_PROMPT",t[t.IMPRESSION_MINI_PROMPT_ERROR=48]="IMPRESSION_MINI_PROMPT_ERROR",t[t.IMPRESSION_REWARDED_AD=49]="IMPRESSION_REWARDED_AD",t[t.IMPRESSION_BYOP_NEWSLETTER_OPT_IN=50]="IMPRESSION_BYOP_NEWSLETTER_OPT_IN",t[t.IMPRESSION_REWARDED_AD_ERROR=51]="IMPRESSION_REWARDED_AD_ERROR",t[t.IMPRESSION_HOSTED_PAGE_SUBSCRIPTION_OFFERS=52]="IMPRESSION_HOSTED_PAGE_SUBSCRIPTION_OFFERS",t[t.IMPRESSION_HOSTED_PAGE_CONTRIBUTION_OFFERS=53]="IMPRESSION_HOSTED_PAGE_CONTRIBUTION_OFFERS",t[t.IMPRESSION_HOSTED_PAGE_SUBSCRIPTION_OFFERS_ERROR=54]="IMPRESSION_HOSTED_PAGE_SUBSCRIPTION_OFFERS_ERROR",t[t.IMPRESSION_HOSTED_PAGE_CONTRIBUTION_OFFERS_ERROR=55]="IMPRESSION_HOSTED_PAGE_CONTRIBUTION_OFFERS_ERROR",t[t.IMPRESSION_BYO_CTA=56]="IMPRESSION_BYO_CTA",t[t.IMPRESSION_BYO_CTA_ERROR=57]="IMPRESSION_BYO_CTA_ERROR",t[t.ACTION_SUBSCRIBE=1e3]="ACTION_SUBSCRIBE",t[t.ACTION_PAYMENT_COMPLETE=1001]="ACTION_PAYMENT_COMPLETE",t[t.ACTION_ACCOUNT_CREATED=1002]="ACTION_ACCOUNT_CREATED",t[t.ACTION_ACCOUNT_ACKNOWLEDGED=1003]="ACTION_ACCOUNT_ACKNOWLEDGED",t[t.ACTION_SUBSCRIPTIONS_LANDING_PAGE=1004]="ACTION_SUBSCRIPTIONS_LANDING_PAGE",t[t.ACTION_PAYMENT_FLOW_STARTED=1005]="ACTION_PAYMENT_FLOW_STARTED",t[t.ACTION_OFFER_SELECTED=1006]="ACTION_OFFER_SELECTED",t[t.ACTION_SWG_BUTTON_CLICK=1007]="ACTION_SWG_BUTTON_CLICK",t[t.ACTION_VIEW_OFFERS=1008]="ACTION_VIEW_OFFERS",t[t.ACTION_ALREADY_SUBSCRIBED=1009]="ACTION_ALREADY_SUBSCRIBED",t[t.ACTION_NEW_DEFERRED_ACCOUNT=1010]="ACTION_NEW_DEFERRED_ACCOUNT",t[t.ACTION_LINK_CONTINUE=1011]="ACTION_LINK_CONTINUE",t[t.ACTION_LINK_CANCEL=1012]="ACTION_LINK_CANCEL",t[t.ACTION_GOOGLE_UPDATED_CLOSE=1013]="ACTION_GOOGLE_UPDATED_CLOSE",t[t.ACTION_USER_CANCELED_PAYFLOW=1014]="ACTION_USER_CANCELED_PAYFLOW",t[t.ACTION_SAVE_SUBSCR_TO_GOOGLE_CONTINUE=1015]="ACTION_SAVE_SUBSCR_TO_GOOGLE_CONTINUE",t[t.ACTION_SAVE_SUBSCR_TO_GOOGLE_CANCEL=1016]="ACTION_SAVE_SUBSCR_TO_GOOGLE_CANCEL",t[t.ACTION_SWG_BUTTON_SHOW_OFFERS_CLICK=1017]="ACTION_SWG_BUTTON_SHOW_OFFERS_CLICK",t[t.ACTION_SWG_BUTTON_SELECT_OFFER_CLICK=1018]="ACTION_SWG_BUTTON_SELECT_OFFER_CLICK",t[t.ACTION_SWG_BUTTON_SHOW_CONTRIBUTIONS_CLICK=1019]="ACTION_SWG_BUTTON_SHOW_CONTRIBUTIONS_CLICK",t[t.ACTION_SWG_BUTTON_SELECT_CONTRIBUTION_CLICK=1020]="ACTION_SWG_BUTTON_SELECT_CONTRIBUTION_CLICK",t[t.ACTION_USER_CONSENT_DEFERRED_ACCOUNT=1021]="ACTION_USER_CONSENT_DEFERRED_ACCOUNT",t[t.ACTION_USER_DENY_DEFERRED_ACCOUNT=1022]="ACTION_USER_DENY_DEFERRED_ACCOUNT",t[t.ACTION_DEFERRED_ACCOUNT_REDIRECT=1023]="ACTION_DEFERRED_ACCOUNT_REDIRECT",t[t.ACTION_GET_ENTITLEMENTS=1024]="ACTION_GET_ENTITLEMENTS",t[t.ACTION_METER_TOAST_SUBSCRIBE_CLICK=1025]="ACTION_METER_TOAST_SUBSCRIBE_CLICK",t[t.ACTION_METER_TOAST_EXPANDED=1026]="ACTION_METER_TOAST_EXPANDED",t[t.ACTION_METER_TOAST_CLOSED_BY_ARTICLE_INTERACTION=1027]="ACTION_METER_TOAST_CLOSED_BY_ARTICLE_INTERACTION",t[t.ACTION_METER_TOAST_CLOSED_BY_SWIPE_DOWN=1028]="ACTION_METER_TOAST_CLOSED_BY_SWIPE_DOWN",t[t.ACTION_METER_TOAST_CLOSED_BY_X_CLICKED=1029]="ACTION_METER_TOAST_CLOSED_BY_X_CLICKED",t[t.ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLICK=1030]="ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLICK",t[t.ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLICK=1031]="ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLICK",t[t.ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLOSE=1032]="ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLOSE",t[t.ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLOSE=1033]="ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLOSE",t[t.ACTION_CONTRIBUTION_OFFER_SELECTED=1034]="ACTION_CONTRIBUTION_OFFER_SELECTED",t[t.ACTION_SHOWCASE_REGWALL_GSI_CLICK=1035]="ACTION_SHOWCASE_REGWALL_GSI_CLICK",t[t.ACTION_SHOWCASE_REGWALL_EXISTING_ACCOUNT_CLICK=1036]="ACTION_SHOWCASE_REGWALL_EXISTING_ACCOUNT_CLICK",t[t.ACTION_SUBSCRIPTION_OFFERS_CLOSED=1037]="ACTION_SUBSCRIPTION_OFFERS_CLOSED",t[t.ACTION_CONTRIBUTION_OFFERS_CLOSED=1038]="ACTION_CONTRIBUTION_OFFERS_CLOSED",t[t.ACTION_TWG_STATIC_CTA_CLICK=1039]="ACTION_TWG_STATIC_CTA_CLICK",t[t.ACTION_TWG_DYNAMIC_CTA_CLICK=1040]="ACTION_TWG_DYNAMIC_CTA_CLICK",t[t.ACTION_TWG_SITE_LEVEL_SUPPORTER_WALL_CTA_CLICK=1041]="ACTION_TWG_SITE_LEVEL_SUPPORTER_WALL_CTA_CLICK",t[t.ACTION_TWG_DIALOG_SUPPORTER_WALL_CTA_CLICK=1042]="ACTION_TWG_DIALOG_SUPPORTER_WALL_CTA_CLICK",t[t.ACTION_TWG_COUNTER_CLICK=1043]="ACTION_TWG_COUNTER_CLICK",t[t.ACTION_TWG_SITE_SUPPORTER_WALL_ALL_THANKS_CLICK=1044]="ACTION_TWG_SITE_SUPPORTER_WALL_ALL_THANKS_CLICK",t[t.ACTION_TWG_PAID_STICKER_SELECTED_SCREEN_CLOSE_CLICK=1045]="ACTION_TWG_PAID_STICKER_SELECTED_SCREEN_CLOSE_CLICK",t[t.ACTION_TWG_PAID_STICKER_SELECTION_CLICK=1046]="ACTION_TWG_PAID_STICKER_SELECTION_CLICK",t[t.ACTION_TWG_FREE_STICKER_SELECTION_CLICK=1047]="ACTION_TWG_FREE_STICKER_SELECTION_CLICK",t[t.ACTION_TWG_MINI_SUPPORTER_WALL_CLICK=1048]="ACTION_TWG_MINI_SUPPORTER_WALL_CLICK",t[t.ACTION_TWG_CREATOR_BENEFIT_CLICK=1049]="ACTION_TWG_CREATOR_BENEFIT_CLICK",t[t.ACTION_TWG_FREE_TRANSACTION_START_NEXT_BUTTON_CLICK=1050]="ACTION_TWG_FREE_TRANSACTION_START_NEXT_BUTTON_CLICK",t[t.ACTION_TWG_PAID_TRANSACTION_START_NEXT_BUTTON_CLICK=1051]="ACTION_TWG_PAID_TRANSACTION_START_NEXT_BUTTON_CLICK",t[t.ACTION_TWG_STICKER_SELECTION_SCREEN_CLOSE_CLICK=1052]="ACTION_TWG_STICKER_SELECTION_SCREEN_CLOSE_CLICK",t[t.ACTION_TWG_ARTICLE_LEVEL_SUPPORTER_WALL_CTA_CLICK=1053]="ACTION_TWG_ARTICLE_LEVEL_SUPPORTER_WALL_CTA_CLICK",t[t.ACTION_REGWALL_OPT_IN_BUTTON_CLICK=1054]="ACTION_REGWALL_OPT_IN_BUTTON_CLICK",t[t.ACTION_REGWALL_ALREADY_OPTED_IN_CLICK=1055]="ACTION_REGWALL_ALREADY_OPTED_IN_CLICK",t[t.ACTION_NEWSLETTER_OPT_IN_BUTTON_CLICK=1056]="ACTION_NEWSLETTER_OPT_IN_BUTTON_CLICK",t[t.ACTION_NEWSLETTER_ALREADY_OPTED_IN_CLICK=1057]="ACTION_NEWSLETTER_ALREADY_OPTED_IN_CLICK",t[t.ACTION_REGWALL_OPT_IN_CLOSE=1058]="ACTION_REGWALL_OPT_IN_CLOSE",t[t.ACTION_NEWSLETTER_OPT_IN_CLOSE=1059]="ACTION_NEWSLETTER_OPT_IN_CLOSE",t[t.ACTION_SHOWCASE_REGWALL_SIWG_CLICK=1060]="ACTION_SHOWCASE_REGWALL_SIWG_CLICK",t[t.ACTION_TWG_CHROME_APP_MENU_ENTRY_POINT_CLICK=1061]="ACTION_TWG_CHROME_APP_MENU_ENTRY_POINT_CLICK",t[t.ACTION_TWG_DISCOVER_FEED_MENU_ENTRY_POINT_CLICK=1062]="ACTION_TWG_DISCOVER_FEED_MENU_ENTRY_POINT_CLICK",t[t.ACTION_SHOWCASE_REGWALL_3P_BUTTON_CLICK=1063]="ACTION_SHOWCASE_REGWALL_3P_BUTTON_CLICK",t[t.ACTION_SUBSCRIPTION_OFFERS_RETRY=1064]="ACTION_SUBSCRIPTION_OFFERS_RETRY",t[t.ACTION_CONTRIBUTION_OFFERS_RETRY=1065]="ACTION_CONTRIBUTION_OFFERS_RETRY",t[t.ACTION_TWG_SHORTENED_STICKER_FLOW_STICKER_SELECTION_CLICK=1066]="ACTION_TWG_SHORTENED_STICKER_FLOW_STICKER_SELECTION_CLICK",t[t.ACTION_INITIATE_UPDATED_SUBSCRIPTION_LINKING=1067]="ACTION_INITIATE_UPDATED_SUBSCRIPTION_LINKING",t[t.ACTION_SURVEY_SUBMIT_CLICK=1068]="ACTION_SURVEY_SUBMIT_CLICK",t[t.ACTION_SURVEY_CLOSED=1069]="ACTION_SURVEY_CLOSED",t[t.ACTION_SURVEY_DATA_TRANSFER=1070]="ACTION_SURVEY_DATA_TRANSFER",t[t.ACTION_REGWALL_PAGE_REFRESH=1071]="ACTION_REGWALL_PAGE_REFRESH",t[t.ACTION_NEWSLETTER_PAGE_REFRESH=1072]="ACTION_NEWSLETTER_PAGE_REFRESH",t[t.ACTION_SURVEY_PAGE_REFRESH=1073]="ACTION_SURVEY_PAGE_REFRESH",t[t.ACTION_METER_TOAST_PAGE_REFRESH=1074]="ACTION_METER_TOAST_PAGE_REFRESH",t[t.ACTION_MINI_PROMPT_INTERACTION=1075]="ACTION_MINI_PROMPT_INTERACTION",t[t.ACTION_SURVEY_PREVIOUS_BUTTON_CLICK=1076]="ACTION_SURVEY_PREVIOUS_BUTTON_CLICK",t[t.ACTION_SURVEY_NEXT_BUTTON_CLICK=1077]="ACTION_SURVEY_NEXT_BUTTON_CLICK",t[t.ACTION_REWARDED_AD_VIEW=1078]="ACTION_REWARDED_AD_VIEW",t[t.ACTION_REWARDED_AD_CLOSE=1079]="ACTION_REWARDED_AD_CLOSE",t[t.ACTION_REWARDED_AD_CLOSE_AD=1080]="ACTION_REWARDED_AD_CLOSE_AD",t[t.ACTION_REWARDED_AD_SIGN_IN=1081]="ACTION_REWARDED_AD_SIGN_IN",t[t.ACTION_REWARDED_AD_SUPPORT=1082]="ACTION_REWARDED_AD_SUPPORT",t[t.ACTION_BACK_TO_HOMEPAGE=1083]="ACTION_BACK_TO_HOMEPAGE",t[t.ACTION_BYOP_NEWSLETTER_OPT_IN_CLOSE=1084]="ACTION_BYOP_NEWSLETTER_OPT_IN_CLOSE",t[t.ACTION_BYOP_NEWSLETTER_OPT_IN_SUBMIT=1085]="ACTION_BYOP_NEWSLETTER_OPT_IN_SUBMIT",t[t.ACTION_SUBSCRIPTION_LINKING_CLOSE=1086]="ACTION_SUBSCRIPTION_LINKING_CLOSE",t[t.ACTION_BYO_CTA_CLOSE=1087]="ACTION_BYO_CTA_CLOSE",t[t.ACTION_BYO_CTA_BUTTON_CLICK=1088]="ACTION_BYO_CTA_BUTTON_CLICK",t[t.EVENT_PAYMENT_FAILED=2e3]="EVENT_PAYMENT_FAILED",t[t.EVENT_REGWALL_OPT_IN_FAILED=2001]="EVENT_REGWALL_OPT_IN_FAILED",t[t.EVENT_NEWSLETTER_OPT_IN_FAILED=2002]="EVENT_NEWSLETTER_OPT_IN_FAILED",t[t.EVENT_REGWALL_ALREADY_OPT_IN=2003]="EVENT_REGWALL_ALREADY_OPT_IN",t[t.EVENT_NEWSLETTER_ALREADY_OPT_IN=2004]="EVENT_NEWSLETTER_ALREADY_OPT_IN",t[t.EVENT_SUBSCRIPTION_LINKING_FAILED=2005]="EVENT_SUBSCRIPTION_LINKING_FAILED",t[t.EVENT_SURVEY_ALREADY_SUBMITTED=2006]="EVENT_SURVEY_ALREADY_SUBMITTED",t[t.EVENT_SURVEY_COMPLETION_RECORD_FAILED=2007]="EVENT_SURVEY_COMPLETION_RECORD_FAILED",t[t.EVENT_SURVEY_DATA_TRANSFER_FAILED=2008]="EVENT_SURVEY_DATA_TRANSFER_FAILED",t[t.EVENT_BYO_CTA_COMPLETION_RECORD_FAILED=2009]="EVENT_BYO_CTA_COMPLETION_RECORD_FAILED",t[t.EVENT_CUSTOM=3e3]="EVENT_CUSTOM",t[t.EVENT_CONFIRM_TX_ID=3001]="EVENT_CONFIRM_TX_ID",t[t.EVENT_CHANGED_TX_ID=3002]="EVENT_CHANGED_TX_ID",t[t.EVENT_GPAY_NO_TX_ID=3003]="EVENT_GPAY_NO_TX_ID",t[t.EVENT_GPAY_CANNOT_CONFIRM_TX_ID=3004]="EVENT_GPAY_CANNOT_CONFIRM_TX_ID",t[t.EVENT_GOOGLE_UPDATED=3005]="EVENT_GOOGLE_UPDATED",t[t.EVENT_NEW_TX_ID=3006]="EVENT_NEW_TX_ID",t[t.EVENT_UNLOCKED_BY_SUBSCRIPTION=3007]="EVENT_UNLOCKED_BY_SUBSCRIPTION",t[t.EVENT_UNLOCKED_BY_METER=3008]="EVENT_UNLOCKED_BY_METER",t[t.EVENT_NO_ENTITLEMENTS=3009]="EVENT_NO_ENTITLEMENTS",t[t.EVENT_HAS_METERING_ENTITLEMENTS=3010]="EVENT_HAS_METERING_ENTITLEMENTS",t[t.EVENT_OFFERED_METER=3011]="EVENT_OFFERED_METER",t[t.EVENT_UNLOCKED_FREE_PAGE=3012]="EVENT_UNLOCKED_FREE_PAGE",t[t.EVENT_INELIGIBLE_PAYWALL=3013]="EVENT_INELIGIBLE_PAYWALL",t[t.EVENT_UNLOCKED_FOR_CRAWLER=3014]="EVENT_UNLOCKED_FOR_CRAWLER",t[t.EVENT_TWG_COUNTER_VIEW=3015]="EVENT_TWG_COUNTER_VIEW",t[t.EVENT_TWG_SITE_SUPPORTER_WALL_VIEW=3016]="EVENT_TWG_SITE_SUPPORTER_WALL_VIEW",t[t.EVENT_TWG_STATIC_BUTTON_VIEW=3017]="EVENT_TWG_STATIC_BUTTON_VIEW",t[t.EVENT_TWG_DYNAMIC_BUTTON_VIEW=3018]="EVENT_TWG_DYNAMIC_BUTTON_VIEW",t[t.EVENT_TWG_PRE_TRANSACTION_PRIVACY_SETTING_PRIVATE=3019]="EVENT_TWG_PRE_TRANSACTION_PRIVACY_SETTING_PRIVATE",t[t.EVENT_TWG_POST_TRANSACTION_SETTING_PRIVATE=3020]="EVENT_TWG_POST_TRANSACTION_SETTING_PRIVATE",t[t.EVENT_TWG_PRE_TRANSACTION_PRIVACY_SETTING_PUBLIC=3021]="EVENT_TWG_PRE_TRANSACTION_PRIVACY_SETTING_PUBLIC",t[t.EVENT_TWG_POST_TRANSACTION_SETTING_PUBLIC=3022]="EVENT_TWG_POST_TRANSACTION_SETTING_PUBLIC",t[t.EVENT_REGWALL_OPTED_IN=3023]="EVENT_REGWALL_OPTED_IN",t[t.EVENT_NEWSLETTER_OPTED_IN=3024]="EVENT_NEWSLETTER_OPTED_IN",t[t.EVENT_SHOWCASE_METERING_INIT=3025]="EVENT_SHOWCASE_METERING_INIT",t[t.EVENT_DISABLE_MINIPROMPT_DESKTOP=3026]="EVENT_DISABLE_MINIPROMPT_DESKTOP",t[t.EVENT_SUBSCRIPTION_LINKING_SUCCESS=3027]="EVENT_SUBSCRIPTION_LINKING_SUCCESS",t[t.EVENT_SURVEY_SUBMITTED=3028]="EVENT_SURVEY_SUBMITTED",t[t.EVENT_LINK_ACCOUNT_SUCCESS=3029]="EVENT_LINK_ACCOUNT_SUCCESS",t[t.EVENT_SAVE_SUBSCRIPTION_SUCCESS=3030]="EVENT_SAVE_SUBSCRIPTION_SUCCESS",t[t.EVENT_SURVEY_DATA_TRANSFER_COMPLETE=3031]="EVENT_SURVEY_DATA_TRANSFER_COMPLETE",t[t.EVENT_RUNTIME_IS_READY=3032]="EVENT_RUNTIME_IS_READY",t[t.EVENT_START_API=3033]="EVENT_START_API",t[t.EVENT_SHOW_OFFERS_API=3034]="EVENT_SHOW_OFFERS_API",t[t.EVENT_SHOW_CONTRIBUTION_OPTIONS_API=3035]="EVENT_SHOW_CONTRIBUTION_OPTIONS_API",t[t.EVENT_REWARDED_AD_FLOW_INIT=3048]="EVENT_REWARDED_AD_FLOW_INIT",t[t.EVENT_REWARDED_AD_READY=3036]="EVENT_REWARDED_AD_READY",t[t.EVENT_REWARDED_AD_GPT_MISSING_ERROR=3037]="EVENT_REWARDED_AD_GPT_MISSING_ERROR",t[t.EVENT_REWARDED_AD_CONFIG_ERROR=3038]="EVENT_REWARDED_AD_CONFIG_ERROR",t[t.EVENT_REWARDED_AD_PAGE_ERROR=3039]="EVENT_REWARDED_AD_PAGE_ERROR",t[t.EVENT_REWARDED_AD_GPT_ERROR=3040]="EVENT_REWARDED_AD_GPT_ERROR",t[t.EVENT_REWARDED_AD_GRANTED=3041]="EVENT_REWARDED_AD_GRANTED",t[t.EVENT_REWARDED_AD_NOT_FILLED=3049]="EVENT_REWARDED_AD_NOT_FILLED",t[t.EVENT_GLOBAL_FREQUENCY_CAP_MET=3042]="EVENT_GLOBAL_FREQUENCY_CAP_MET",t[t.EVENT_PROMPT_FREQUENCY_CAP_MET=3043]="EVENT_PROMPT_FREQUENCY_CAP_MET",t[t.EVENT_ACTION_IMPRESSIONS_STORAGE_KEY_NOT_FOUND_ERROR=3044]="EVENT_ACTION_IMPRESSIONS_STORAGE_KEY_NOT_FOUND_ERROR",t[t.EVENT_LOCAL_STORAGE_TIMESTAMPS_PARSING_ERROR=3052]="EVENT_LOCAL_STORAGE_TIMESTAMPS_PARSING_ERROR",t[t.EVENT_FREQUENCY_CAP_CONFIG_NOT_FOUND_ERROR=3045]="EVENT_FREQUENCY_CAP_CONFIG_NOT_FOUND_ERROR",t[t.EVENT_PROMPT_FREQUENCY_CONFIG_NOT_FOUND=3053]="EVENT_PROMPT_FREQUENCY_CONFIG_NOT_FOUND",t[t.EVENT_BYOP_NEWSLETTER_OPT_IN_CONFIG_ERROR=3046]="EVENT_BYOP_NEWSLETTER_OPT_IN_CONFIG_ERROR",t[t.EVENT_BYOP_NEWSLETTER_OPT_IN_CODE_SNIPPET_ERROR=3047]="EVENT_BYOP_NEWSLETTER_OPT_IN_CODE_SNIPPET_ERROR",t[t.EVENT_SUBSCRIPTION_PAYMENT_COMPLETE=3050]="EVENT_SUBSCRIPTION_PAYMENT_COMPLETE",t[t.EVENT_CONTRIBUTION_PAYMENT_COMPLETE=3051]="EVENT_CONTRIBUTION_PAYMENT_COMPLETE",t[t.EVENT_HOSTED_PAGE_SUBSCRIPTION_PAYMENT_COMPLETE=3054]="EVENT_HOSTED_PAGE_SUBSCRIPTION_PAYMENT_COMPLETE",t[t.EVENT_HOSTED_PAGE_CONTRIBUTION_PAYMENT_COMPLETE=3055]="EVENT_HOSTED_PAGE_CONTRIBUTION_PAYMENT_COMPLETE",t[t.EVENT_COMPLETION_COUNT_FOR_REPEATABLE_ACTION_MISSING_ERROR=3056]="EVENT_COMPLETION_COUNT_FOR_REPEATABLE_ACTION_MISSING_ERROR",t[t.EVENT_SUBSCRIPTION_STATE=4e3]="EVENT_SUBSCRIPTION_STATE",t))(s||{}),r=(t=>(t[t.UNKNOWN_ENTITLEMENT_RESULT=0]="UNKNOWN_ENTITLEMENT_RESULT",t[t.UNLOCKED_SUBSCRIBER=1001]="UNLOCKED_SUBSCRIBER",t[t.UNLOCKED_FREE=1002]="UNLOCKED_FREE",t[t.UNLOCKED_METER=1003]="UNLOCKED_METER",t[t.LOCKED_REGWALL=2001]="LOCKED_REGWALL",t[t.LOCKED_PAYWALL=2002]="LOCKED_PAYWALL",t[t.INELIGIBLE_PAYWALL=2003]="INELIGIBLE_PAYWALL",t))(r||{}),o=(t=>(t[t.UNKNOWN_ENTITLEMENT_SOURCE=0]="UNKNOWN_ENTITLEMENT_SOURCE",t[t.GOOGLE_SUBSCRIBER_ENTITLEMENT=1001]="GOOGLE_SUBSCRIBER_ENTITLEMENT",t[t.GOOGLE_SHOWCASE_METERING_SERVICE=2001]="GOOGLE_SHOWCASE_METERING_SERVICE",t[t.SUBSCRIBE_WITH_GOOGLE_METERING_SERVICE=2002]="SUBSCRIBE_WITH_GOOGLE_METERING_SERVICE",t[t.PUBLISHER_ENTITLEMENT=3001]="PUBLISHER_ENTITLEMENT",t))(o||{}),a=(t=>(t[t.UNKNOWN_CLIENT=0]="UNKNOWN_CLIENT",t[t.SWG_CLIENT=1]="SWG_CLIENT",t[t.AMP_CLIENT=2]="AMP_CLIENT",t[t.PROPENSITY_CLIENT=3]="PROPENSITY_CLIENT",t[t.SWG_SERVER=4]="SWG_SERVER",t[t.PUBLISHER_CLIENT=5]="PUBLISHER_CLIENT",t[t.SHOWCASE_CLIENT=6]="SHOWCASE_CLIENT",t))(a||{});class h{constructor(t=[],e=!0){const i=e?1:0;this.t=null==t[i]?null:t[i]}getComplete(){return this.t}setComplete(t){this.t=t}toArray(t=!0){const e=[this.t];return t&&e.unshift(this.label()),e}label(){return"AccountCreationRequest"}}class l{constructor(t=[],e=!0){const i=e?1:0;this.o=null==t[i]?null:t[i],this.h=null==t[1+i]?null:t[1+i]}getSubscriberOrMember(){return this.o}setSubscriberOrMember(t){this.o=t}getLinkRequested(){return this.h}setLinkRequested(t){this.h=t}toArray(t=!0){const e=[this.o,this.h];return t&&e.unshift(this.label()),e}label(){return"AlreadySubscribedResponse"}}class u{constructor(t=[],e=!0){const i=e?1:0;this.l=null==t[i]?null:t[i],this.u=null==t[1+i]?null:t[1+i],this.p=null==t[2+i]?null:t[2+i],this.g=null==t[3+i]?null:t[3+i],this.m=null==t[4+i]?null:t[4+i],this._=null==t[5+i]?null:t[5+i],this.T=null==t[6+i]?null:t[6+i],this.I=null==t[7+i]?null:t[7+i],this.S=t[8+i]||[],this.O=null==t[9+i]?null:t[9+i],this.C=null==t[10+i]?null:t[10+i],this.N=null==t[11+i]?null:new P(t[11+i],e),this.v=null==t[12+i]?null:t[12+i],this.A=null==t[13+i]?null:t[13+i],this.R=null==t[14+i]?null:new P(t[14+i],e),this.P=null==t[15+i]?null:new m(t[15+i],e),this.L=null==t[16+i]?null:new P(t[16+i],e),this.M=null==t[17+i]?null:t[17+i],this.k=null==t[18+i]?null:t[18+i]}getEmbedderOrigin(){return this.l}setEmbedderOrigin(t){this.l=t}getTransactionId(){return this.u}setTransactionId(t){this.u=t}getReferringOrigin(){return this.p}setReferringOrigin(t){this.p=t}getUtmSource(){return this.g}setUtmSource(t){this.g=t}getUtmCampaign(){return this.m}setUtmCampaign(t){this.m=t}getUtmMedium(){return this._}setUtmMedium(t){this._=t}getSku(){return this.T}setSku(t){this.T=t}getReadyToPay(){return this.I}setReadyToPay(t){this.I=t}getLabelList(){return this.S}setLabelList(t){this.S=t}getClientVersion(){return this.O}setClientVersion(t){this.O=t}getUrl(){return this.C}setUrl(t){this.C=t}getClientTimestamp(){return this.N}setClientTimestamp(t){this.N=t}getReaderSurfaceType(){return this.v}setReaderSurfaceType(t){this.v=t}getIntegrationVersion(){return this.A}setIntegrationVersion(t){this.A=t}getPageLoadBeginTimestamp(){return this.R}setPageLoadBeginTimestamp(t){this.R=t}getLoadEventStartDelay(){return this.P}setLoadEventStartDelay(t){this.P=t}getRuntimeCreationTimestamp(){return this.L}setRuntimeCreationTimestamp(t){this.L=t}getIsLockedContent(){return this.M}setIsLockedContent(t){this.M=t}getUrlFromMarkup(){return this.k}setUrlFromMarkup(t){this.k=t}toArray(t=!0){const e=[this.l,this.u,this.p,this.g,this.m,this._,this.T,this.I,this.S,this.O,this.C,this.N?this.N.toArray(t):[],this.v,this.A,this.R?this.R.toArray(t):[],this.P?this.P.toArray(t):[],this.L?this.L.toArray(t):[],this.M,this.k];return t&&e.unshift(this.label()),e}label(){return"AnalyticsContext"}}class c{constructor(t=[],e=!0){const i=e?1:0;this.D=null==t[i]?null:t[i],this.U=null==t[1+i]?null:t[1+i],this.G=null==t[2+i]?null:t[2+i]}getEventOriginator(){return this.D}setEventOriginator(t){this.D=t}getIsFromUserAction(){return this.U}setIsFromUserAction(t){this.U=t}getConfigurationId(){return this.G}setConfigurationId(t){this.G=t}toArray(t=!0){const e=[this.D,this.U,this.G];return t&&e.unshift(this.label()),e}label(){return"AnalyticsEventMeta"}}class d{constructor(t=[],e=!0){const i=e?1:0;this.j=null==t[i]?null:new u(t[i],e),this.F=null==t[1+i]?null:t[1+i],this.B=null==t[2+i]?null:new c(t[2+i],e),this.W=null==t[3+i]?null:new w(t[3+i],e)}getContext(){return this.j}setContext(t){this.j=t}getEvent(){return this.F}setEvent(t){this.F=t}getMeta(){return this.B}setMeta(t){this.B=t}getParams(){return this.W}setParams(t){this.W=t}toArray(t=!0){const e=[this.j?this.j.toArray(t):[],this.F,this.B?this.B.toArray(t):[],this.W?this.W.toArray(t):[]];return t&&e.unshift(this.label()),e}label(){return"AnalyticsRequest"}}class p{constructor(t=[],e=!0){const i=e?1:0;this.F=null==t[i]?null:t[i]}getEvent(){return this.F}setEvent(t){this.F=t}toArray(t=!0){const e=[this.F];return t&&e.unshift(this.label()),e}label(){return"AudienceActivityClientLogsRequest"}}class g{constructor(t=[],e=!0){const i=e?1:0;this.V=null==t[i]?null:t[i],this.Y=null==t[1+i]?null:t[1+i],this.K=null==t[2+i]?null:t[2+i],this.q=null==t[3+i]?null:t[3+i],this.H=null==t[4+i]?null:t[4+i],this.$=null==t[5+i]?null:t[5+i],this.J=null==t[6+i]?null:t[6+i]}getSwgUserToken(){return this.V}setSwgUserToken(t){this.V=t}getActionCompleted(){return this.Y}setActionCompleted(t){this.Y=t}getUserEmail(){return this.K}setUserEmail(t){this.K=t}getAlreadyCompleted(){return this.q}setAlreadyCompleted(t){this.q=t}getDisplayName(){return this.H}setDisplayName(t){this.H=t}getGivenName(){return this.$}setGivenName(t){this.$=t}getFamilyName(){return this.J}setFamilyName(t){this.J=t}toArray(t=!0){const e=[this.V,this.Y,this.K,this.q,this.H,this.$,this.J];return t&&e.unshift(this.label()),e}label(){return"CompleteAudienceActionResponse"}}let m=class{constructor(t=[],e=!0){const i=e?1:0;this.seconds_=null==t[i]?null:t[i],this.nanos_=null==t[1+i]?null:t[1+i]}getSeconds(){return this.seconds_}setSeconds(t){this.seconds_=t}getNanos(){return this.nanos_}setNanos(t){this.nanos_=t}toArray(t=!0){const e=[this.seconds_,this.nanos_];return t&&e.unshift(this.label()),e}label(){return"Duration"}};class _{constructor(t=[],e=!0){const i=e?1:0;this.X=null==t[i]?null:t[i],this.Z=null==t[1+i]?null:t[1+i]}getJwt(){return this.X}setJwt(t){this.X=t}getSource(){return this.Z}setSource(t){this.Z=t}toArray(t=!0){const e=[this.X,this.Z];return t&&e.unshift(this.label()),e}label(){return"EntitlementJwt"}}class f{constructor(t=[],e=!0){const i=e?1:0;this.tt=null==t[i]?null:new _(t[i],e),this.et=null==t[1+i]?null:new P(t[1+i],e),this.nt=null==t[2+i]?null:t[2+i],this.st=null==t[3+i]?null:t[3+i],this.rt=null==t[4+i]?null:t[4+i],this.ot=null==t[5+i]?null:t[5+i],this.ht=null==t[6+i]?null:new P(t[6+i],e)}getUsedEntitlement(){return this.tt}setUsedEntitlement(t){this.tt=t}getClientEventTime(){return this.et}setClientEventTime(t){this.et=t}getEntitlementSource(){return this.nt}setEntitlementSource(t){this.nt=t}getEntitlementResult(){return this.st}setEntitlementResult(t){this.st=t}getToken(){return this.rt}setToken(t){this.rt=t}getIsUserRegistered(){return this.ot}setIsUserRegistered(t){this.ot=t}getSubscriptionTimestamp(){return this.ht}setSubscriptionTimestamp(t){this.ht=t}toArray(t=!0){const e=[this.tt?this.tt.toArray(t):[],this.et?this.et.toArray(t):[],this.nt,this.st,this.rt,this.ot,this.ht?this.ht.toArray(t):[]];return t&&e.unshift(this.label()),e}label(){return"EntitlementsRequest"}}class E{constructor(t=[],e=!0){const i=e?1:0;this.X=null==t[i]?null:t[i],this.V=null==t[1+i]?null:t[1+i]}getJwt(){return this.X}setJwt(t){this.X=t}getSwgUserToken(){return this.V}setSwgUserToken(t){this.V=t}toArray(t=!0){const e=[this.X,this.V];return t&&e.unshift(this.label()),e}label(){return"EntitlementsResponse"}}class w{constructor(t=[],e=!0){const i=e?1:0;this.lt=null==t[i]?null:t[i],this.ut=null==t[1+i]?null:t[1+i],this.ct=null==t[2+i]?null:t[2+i],this.T=null==t[3+i]?null:t[3+i],this.dt=null==t[4+i]?null:t[4+i],this.ot=null==t[5+i]?null:t[5+i],this.gt=null==t[6+i]?null:t[6+i],this.ht=null==t[7+i]?null:new P(t[7+i],e)}getSmartboxMessage(){return this.lt}setSmartboxMessage(t){this.lt=t}getGpayTransactionId(){return this.ut}setGpayTransactionId(t){this.ut=t}getHadLogged(){return this.ct}setHadLogged(t){this.ct=t}getSku(){return this.T}setSku(t){this.T=t}getOldTransactionId(){return this.dt}setOldTransactionId(t){this.dt=t}getIsUserRegistered(){return this.ot}setIsUserRegistered(t){this.ot=t}getSubscriptionFlow(){return this.gt}setSubscriptionFlow(t){this.gt=t}getSubscriptionTimestamp(){return this.ht}setSubscriptionTimestamp(t){this.ht=t}toArray(t=!0){const e=[this.lt,this.ut,this.ct,this.T,this.dt,this.ot,this.gt,this.ht?this.ht.toArray(t):[]];return t&&e.unshift(this.label()),e}label(){return"EventParams"}}class b{constructor(t=[],e=!0){const i=e?1:0;this.t=null==t[i]?null:t[i],this._t=null==t[1+i]?null:t[1+i]}getComplete(){return this.t}setComplete(t){this.t=t}getError(){return this._t}setError(t){this._t=t}toArray(t=!0){const e=[this.t,this._t];return t&&e.unshift(this.label()),e}label(){return"FinishedLoggingResponse"}}class T{constructor(t=[],e=!0){const i=e?1:0;this.ft=null==t[i]?null:t[i],this.rt=null==t[1+i]?null:t[1+i]}getAuthCode(){return this.ft}setAuthCode(t){this.ft=t}getToken(){return this.rt}setToken(t){this.rt=t}toArray(t=!0){const e=[this.ft,this.rt];return t&&e.unshift(this.label()),e}label(){return"LinkSaveTokenRequest"}}class I{constructor(t=[],e=!0){const i=e?1:0;this.Et=null==t[i]?null:t[i]}getRequested(){return this.Et}setRequested(t){this.Et=t}toArray(t=!0){const e=[this.Et];return t&&e.unshift(this.label()),e}label(){return"LinkingInfoResponse"}}class y{constructor(t=[],e=!0){const i=e?1:0;this.T=null==t[i]?null:t[i],this.wt=null==t[1+i]?null:t[1+i],this.bt=null==t[2+i]?null:t[2+i],this.Tt=null==t[3+i]?null:t[3+i],this.It=null==t[4+i]?null:t[4+i],this.yt=null==t[5+i]?null:t[5+i],this.St=null==t[6+i]?null:t[6+i],this.Ot=null==t[7+i]?null:t[7+i]}getSku(){return this.T}setSku(t){this.T=t}getOldSku(){return this.wt}setOldSku(t){this.wt=t}getOneTime(){return this.bt}setOneTime(t){this.bt=t}getPlayOffer(){return this.Tt}setPlayOffer(t){this.Tt=t}getOldPlayOffer(){return this.It}setOldPlayOffer(t){this.It=t}getCustomMessage(){return this.yt}setCustomMessage(t){this.yt=t}getAnonymous(){return this.St}setAnonymous(t){this.St=t}getSharingPolicyEnabled(){return this.Ot}setSharingPolicyEnabled(t){this.Ot=t}toArray(t=!0){const e=[this.T,this.wt,this.bt,this.Tt,this.It,this.yt,this.St,this.Ot];return t&&e.unshift(this.label()),e}label(){return"SkuSelectedResponse"}}class S{constructor(t=[],e=!0){const i=e?1:0;this.Ct=null==t[i]?null:t[i]}getIsClicked(){return this.Ct}setIsClicked(t){this.Ct=t}toArray(t=!0){const e=[this.Ct];return t&&e.unshift(this.label()),e}label(){return"SmartBoxMessage"}}let O=class{constructor(t=[],e=!0){const i=e?1:0;this.Nt=null==t[i]?null:t[i]}getSubscribe(){return this.Nt}setSubscribe(t){this.Nt=t}toArray(t=!0){const e=[this.Nt];return t&&e.unshift(this.label()),e}label(){return"SubscribeResponse"}};class C{constructor(t=[],e=!0){const i=e?1:0;this.vt=null==t[i]?null:t[i],this.At=null==t[1+i]?null:t[1+i]}getPublisherProvidedId(){return this.vt}setPublisherProvidedId(t){this.vt=t}getSuccess(){return this.At}setSuccess(t){this.At=t}toArray(t=!0){const e=[this.vt,this.At];return t&&e.unshift(this.label()),e}label(){return"SubscriptionLinkingCompleteResponse"}}class N{constructor(t=[],e=!0){const i=e?1:0;this.Rt=null==t[i]?null:t[i],this.Pt=null==t[1+i]?null:t[1+i],this.xt=null==t[2+i]?null:t[2+i],this.Lt=null==t[3+i]?null:t[3+i]}getAnswerId(){return this.Rt}setAnswerId(t){this.Rt=t}getAnswerText(){return this.Pt}setAnswerText(t){this.Pt=t}getAnswerCategory(){return this.xt}setAnswerCategory(t){this.xt=t}getPpsValue(){return this.Lt}setPpsValue(t){this.Lt=t}toArray(t=!0){const e=[this.Rt,this.Pt,this.xt,this.Lt];return t&&e.unshift(this.label()),e}label(){return"SurveyAnswer"}}class v{constructor(t=[],e=!0){const i=e?1:0;this.Mt=(t[i]||[]).map((t=>new R(t,e))),this.kt=null==t[1+i]?null:t[1+i]}getSurveyQuestionsList(){return this.Mt}setSurveyQuestionsList(t){this.Mt=t}getStorePpsInLocalStorage(){return this.kt}setStorePpsInLocalStorage(t){this.kt=t}toArray(t=!0){const e=[this.Mt?this.Mt.map((e=>e.toArray(t))):[],this.kt];return t&&e.unshift(this.label()),e}label(){return"SurveyDataTransferRequest"}}class A{constructor(t=[],e=!0){const i=e?1:0;this.At=null==t[i]?null:t[i]}getSuccess(){return this.At}setSuccess(t){this.At=t}toArray(t=!0){const e=[this.At];return t&&e.unshift(this.label()),e}label(){return"SurveyDataTransferResponse"}}class R{constructor(t=[],e=!0){const i=e?1:0;this.Dt=null==t[i]?null:t[i],this.Ut=null==t[1+i]?null:t[1+i],this.Gt=null==t[2+i]?null:t[2+i],this.jt=(t[3+i]||[]).map((t=>new N(t,e)))}getQuestionId(){return this.Dt}setQuestionId(t){this.Dt=t}getQuestionText(){return this.Ut}setQuestionText(t){this.Ut=t}getQuestionCategory(){return this.Gt}setQuestionCategory(t){this.Gt=t}getSurveyAnswersList(){return this.jt}setSurveyAnswersList(t){this.jt=t}toArray(t=!0){const e=[this.Dt,this.Ut,this.Gt,this.jt?this.jt.map((e=>e.toArray(t))):[]];return t&&e.unshift(this.label()),e}label(){return"SurveyQuestion"}}class P{constructor(t=[],e=!0){const i=e?1:0;this.seconds_=null==t[i]?null:t[i],this.nanos_=null==t[1+i]?null:t[1+i]}getSeconds(){return this.seconds_}setSeconds(t){this.seconds_=t}getNanos(){return this.nanos_}setNanos(t){this.nanos_=t}toArray(t=!0){const e=[this.seconds_,this.nanos_];return t&&e.unshift(this.label()),e}label(){return"Timestamp"}}class x{constructor(t=[],e=!0){const i=e?1:0;this.Ft=null==t[i]?null:t[i]}getClose(){return this.Ft}setClose(t){this.Ft=t}toArray(t=!0){const e=[this.Ft];return t&&e.unshift(this.label()),e}label(){return"ToastCloseRequest"}}class L{constructor(t=[],e=!0){const i=e?1:0;this.zt=null==t[i]?null:t[i]}getNative(){return this.zt}setNative(t){this.zt=t}toArray(t=!0){const e=[this.zt];return t&&e.unshift(this.label()),e}label(){return"ViewSubscriptionsResponse"}}const M={AccountCreationRequest:h,ActionRequest:class{constructor(t=[],e=!0){const i=e?1:0;this.Bt=null==t[i]?null:t[i]}getAction(){return this.Bt}setAction(t){this.Bt=t}toArray(t=!0){const e=[this.Bt];return t&&e.unshift(this.label()),e}label(){return"ActionRequest"}},AlreadySubscribedResponse:l,AnalyticsContext:u,AnalyticsEventMeta:c,AnalyticsRequest:d,AudienceActivityClientLogsRequest:p,CompleteAudienceActionResponse:g,Duration:m,EntitlementJwt:_,EntitlementsRequest:f,EntitlementsResponse:E,EventParams:w,FinishedLoggingResponse:b,LinkSaveTokenRequest:T,LinkingInfoResponse:I,OpenDialogRequest:class{constructor(t=[],e=!0){const i=e?1:0;this.Wt=null==t[i]?null:t[i]}getUrlPath(){return this.Wt}setUrlPath(t){this.Wt=t}toArray(t=!0){const e=[this.Wt];return t&&e.unshift(this.label()),e}label(){return"OpenDialogRequest"}},SkuSelectedResponse:y,SmartBoxMessage:S,SubscribeResponse:O,SubscriptionLinkingCompleteResponse:C,SubscriptionLinkingResponse:class{constructor(t=[],e=!0){const i=e?1:0;this.vt=null==t[i]?null:t[i]}getPublisherProvidedId(){return this.vt}setPublisherProvidedId(t){this.vt=t}toArray(t=!0){const e=[this.vt];return t&&e.unshift(this.label()),e}label(){return"SubscriptionLinkingResponse"}},SurveyAnswer:N,SurveyDataTransferRequest:v,SurveyDataTransferResponse:A,SurveyQuestion:R,Timestamp:P,ToastCloseRequest:x,ViewSubscriptionsResponse:L};var k=(t=>(t.NONE="none",t.CONTRIBUTION="contribution",t.CONTRIBUTION_LARGE="contribution_large",t.SUBSCRIPTION="subscription",t.SUBSCRIPTION_LARGE="subscription_large",t))(k||{}),D=(t=>(t.OPEN="OPEN",t.CLOSED="CLOSED",t))(D||{});const U=String.raw,G=String.raw,j=G(_a||(_a=__template(["\n  @keyframes slideUp {\n    from {\n      transform: translate(0, 200px);\n    }\n    to {\n      transform: translate(0, 0);\n    }\n  }\n"]))),F=G(_b||(_b=__template(["\n  .exit-container {\n    width: 100%;\n    display: flex;\n    flex-direction: row-reverse;\n  }\n"]))),z=G(_c||(_c=__template(["\n  .back-to-home-button {\n    border-radius: 4px;\n    text-decoration: none;\n    font-size: 14px;\n    color: #1a73e8;\n    padding: 17px;\n    outline-offset: 4px;\n    outline-color: #145ab5;\n  }\n\n  .back-to-home-button:focus,\n  .back-to-home-button:hover {\n    background-color: #f2f8ff;\n  }\n"]))),B=U(_d||(_d=__template(['\n  <a class="back-to-home-button" href="$BACK_TO_HOME_LINK$">\n    $BACK_TO_HOME_TEXT$\n  </a>\n']))),W=G(_e||(_e=__template(["\n  ","\n\n  .rewarded-ad-prompt {\n    animation: 0.5s slideUp;\n    margin-left: auto !important;\n    margin-right: auto !important;\n    margin-top: auto !important;\n    border-top-left-radius: 20px !important;\n    border-top-right-radius: 20px !important;\n    pointer-events: auto !important;\n    background: white !important;\n    max-height: 90%;\n    overflow: auto;\n    outline: none;\n    font-family: 'Google Sans', 'Roboto-Regular', sans-serif, arial;\n    width: 100%;\n  }\n\n  @media (min-width: 450px) {\n    .rewarded-ad-prompt {\n      width: 375px !important;\n    }\n  }\n"])),j),V=G(_f||(_f=__template(["\n  button {\n    background: none;\n    color: inherit;\n    border: none;\n    padding: 0;\n    font: inherit;\n    cursor: pointer;\n    outline-offset: 4px; // 0.25rem;\n    outline-color: #145ab5;\n  }\n"]))),Y=G(_g||(_g=__template(["\n  .rewarded-ad-close-button {\n    margin: 8px 8px 0px 0px;\n    padding: 12px;\n    height: 48px;\n    width: 48px;\n    grid-column: 3;\n    grid-row: 1;\n    border-radius: 4px;\n  }\n  .rewarded-ad-close-img {\n    border-radius: 20px;\n    height: 24px;\n    width: 24px;\n    background: #5f6368;\n    -webkit-mask: url(https://fonts.gstatic.com/s/i/short-term/release/googlesymbols/close/default/24px.svg)\n      center/contain no-repeat;\n  }\n\n  .rewarded-ad-close-button:hover,\n  .rewarded-ad-close-button:focus {\n    background-color: #f2f8ff;\n  }\n"]))),K=U(_h||(_h=__template([' <button\n  aria-label="$CLOSE_BUTTON_DESCRIPTION$"\n  class="rewarded-ad-close-button"\n>\n  <div class="rewarded-ad-close-img"></div>\n</button>']))),q=G(_i||(_i=__template(["\n  .opt-in-close-button-container {\n    text-align: end !important;\n  }\n\n  .opt-in-close-button {\n    background: none;\n    border: none;\n    border-radius: 4px;\n    height: 48px;\n    padding: 12px;\n    width: 48px;\n  }\n\n  .opt-in-close-img {\n    border-radius: 20px;\n    height: 24px;\n    width: 24px;\n  }\n\n  .opt-in-close-button:hover,\n  .opt-in-close-button:focus {\n    background-color: #f2f8ff;\n  }\n\n  @media (forced-colors: active) {\n    .opt-in-close-img {\n      background: buttonText;\n    }\n  }\n"]))),H=U(_j||(_j=__template(["<style>\n    ",'\n  </style>\n  <div class="opt-in-close-button-container">\n    <button aria-label="$CLOSE_BUTTON_DESCRIPTION$" class="opt-in-close-button">\n      <img\n        class="opt-in-close-img"\n        src="https://fonts.gstatic.com/s/i/short-term/release/googlesymbols/close/default/24px.svg"\n        alt="Close button"\n      />\n    </button>\n  </div>'])),q),$=G(_k||(_k=__template(["\n  ","\n"])),W),J=U(_l||(_l=__template(["\n  <style>\n    ",' .rewarded-ad-prompt {\n      height: 120px;\n      width: 100%;\n      align-items: center;\n      justify-items: center;\n      display: grid;\n    }\n  </style>\n  <div class="rewarded-ad-prompt">Something went wrong.</div>\n'])),$),Q=G(_m||(_m=__template(["\n  swg-container,\n  swg-loading,\n  swg-loading-animate,\n  swg-loading-image {\n    display: block;\n  }\n\n  swg-loading-container {\n    margin-left: auto !important;\n    margin-right: auto !important;\n    margin-top: auto !important;\n\n    border-top-left-radius: 8px !important;\n    border-top-right-radius: 8px !important;\n\n    height: 148px !important;\n    width: 100% !important;\n\n    display: flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n\n    bottom: 0 !important;\n    z-index: 2147483647 !important;\n\n    background-color: rgba(255, 255, 255, 1) !important;\n    box-shadow: rgba(60, 64, 67, 0.3) 0 1px 1px,\n      rgba(60, 64, 67, 0.15) 0 1px 4px 1px !important;\n  }\n\n  swg-loading-container.centered-on-desktop {\n    height: 120px !important;\n    min-height: 120px !important;\n    border-radius: 8px !important;\n  }\n\n  swg-loading {\n    z-index: 2147483647 !important;\n    width: 36px;\n    height: 36px;\n    overflow: hidden;\n    animation: mspin-rotate 1568.63ms infinite linear;\n  }\n\n  swg-loading-animate {\n    animation: mspin-revrot 5332ms infinite steps(4);\n  }\n\n  swg-loading-image {\n    background-image: url('","/loader.svg');\n    background-size: 100%;\n    width: 11664px;\n    height: 36px;\n    animation: swg-loading-film 5332ms infinite steps(324);\n  }\n\n  @keyframes swg-loading-film {\n    from {\n      transform: translateX(0);\n    }\n    to {\n      transform: translateX(-11664px);\n    }\n  }\n\n  @keyframes mspin-rotate {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n\n  @keyframes mspin-revrot {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(-360deg);\n    }\n  }\n\n  @media (min-width: 450px) {\n    swg-loading-container {\n      width: 375px !important;\n    }\n  }\n"])),n),X=U(_n||(_n=__template(["\n  <style>\n    ","\n  </style>\n  <swg-loading-container>\n    <swg-loading>\n      <swg-loading-animate>\n        <swg-loading-image></swg-loading-image>\n      </swg-loading-animate>\n    </swg-loading>\n  </swg-loading-container>\n"])),Q),Z=G(_o||(_o=__template(["\n  ","\n  ","\n  ","\n  ","\n  ","\n\n  .rewarded-ad-container {\n    margin: 0px;\n    text-align: center;\n  }\n\n  .rewarded-ad-header {\n    display: grid !important;\n    grid-template-columns: 56px 1fr 56px;\n  }\n\n  .rewarded-ad-title {\n    font-size: 28px; //1.75rem;\n    line-height: 36px; // 2.25rem;\n    font-weight: 400;\n    letter-spacing: 0em;\n    color: #202124;\n    grid-column: 2;\n    grid-row: 1;\n    line-break: auto;\n  }\n\n  .rewarded-ad-message {\n    margin-top: 8px;\n    padding: 0px 11px 0px 11px;\n    font-size: 16px; // 1rem;\n    font-weight: 500;\n    line-height: 24px; // 1.5rem;\n    letter-spacing: 0.25px;\n    color: #202124;\n  }\n\n  .rewarded-ad-cta {\n    margin: 20px 14px 0px 14px;\n  }\n\n  .rewarded-ad-cta-button {\n    padding: 6px; // 0.375rem;\n    width: 100%;\n    outline-offset: -2px; // 0.125rem;\n  }\n\n  .rewarded-ad-cta-button-inner {\n    width: 100%;\n    height: 36px; // 2.25rem;\n    border-radius: 4px; // 0.25rem;\n    font-size: 14px; // 0.875rem;\n    font-weight: 500;\n    letter-spacing: 0.25px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .rewarded-ad-view-ad-button-inner {\n    background-color: #1a73e8;\n    color: white;\n  }\n\n  .rewarded-ad-cta-button:focus .rewarded-ad-view-ad-button-inner,\n  .rewarded-ad-cta-button:hover .rewarded-ad-view-ad-button-inner {\n    background-color: #145ab5;\n  }\n\n  .rewarded-ad-view-ad-button:disabled .rewarded-ad-view-ad-button-inner {\n    background-color: darkgrey;\n    color: lightgrey;\n  }\n\n  .rewarded-ad-support-button-inner {\n    border: 1px solid #dadce0;\n    border-radius: 4px; // 0.25rem;\n    color: #1a73e8;\n  }\n\n  .rewarded-ad-cta-button:focus .rewarded-ad-support-button-inner,\n  .rewarded-ad-cta-button:hover .rewarded-ad-support-button-inner {\n    background-color: #e6e6e6;\n  }\n\n  .rewarded-ad-google-logo {\n    float: left;\n    height: 24px;\n    margin: 20px 0px 20px 0px;\n  }\n\n  .rewarded-ad-sign-in-button {\n    float: right;\n    font-size: 14px; // 0.875rem;\n    font-weight: 500;\n    line-height: 20px; // 1.25rem;\n    letter-spacing: 0.25px;\n    text-align: right;\n    color: #1a73e8;\n    height: 48px;\n    border-radius: 4px;\n    margin: 8px 0px 8px 0px;\n    padding: 0px 7px 0px 7px;\n  }\n\n  .rewarded-ad-sign-in-button:focus,\n  .rewarded-ad-sign-in-button:hover {\n    background-color: #f2f8ff;\n  }\n\n  .rewarded-ad-footer {\n    margin-left: 20px;\n    margin-right: 20px;\n  }\n"])),V,Y,W,z,F),tt=U(_p||(_p=__template(['<button\n  class="rewarded-ad-support-button rewarded-ad-cta-button"\n>\n  <div class="rewarded-ad-support-button-inner rewarded-ad-cta-button-inner">\n    $SUPPORT_MESSAGE$\n  </div>\n</button>']))),et=U(_q||(_q=__template(['<button\n  class="rewarded-ad-sign-in-button"\n>\n  $SIGN_IN_MESSAGE$\n</button>']))),it=U(_r||(_r=__template(["\n  <style>\n    ",'\n  </style>\n  <div\n    class="rewarded-ad-prompt"\n    tabindex="-1"\n    role="dialog"\n    aria-labelledby="title-id"\n    aria-describedby="message-id"\n    aria-modal="true"\n  >\n    <div class="rewarded-ad-container">\n      <div class="exit-container">$EXIT$</div>\n      <div class="rewarded-ad-header">\n        <div class="rewarded-ad-title" id="title-id">$TITLE$</div>\n      </div>\n      <div class="rewarded-ad-message" id="message-id">$MESSAGE$</div>\n      <div class="rewarded-ad-cta">\n        <button class="rewarded-ad-view-ad-button rewarded-ad-cta-button">\n          <div\n            class="rewarded-ad-view-ad-button-inner rewarded-ad-cta-button-inner"\n          >\n            $VIEW_AN_AD$\n          </div>\n        </button>\n        $SUPPORT_BUTTON$\n      </div>\n      <div class="rewarded-ad-footer">\n        <img\n          alt="Google"\n          class="rewarded-ad-google-logo"\n          src="','"\n        />\n        $SIGN_IN_BUTTON$\n      </div>\n    </div>\n  </div>\n'])),Z,"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDc0IDI0Ij48cGF0aCBmaWxsPSIjNDI4NUY0IiBkPSJNOS4yNCA4LjE5djIuNDZoNS44OGMtLjE4IDEuMzgtLjY0IDIuMzktMS4zNCAzLjEtLjg2Ljg2LTIuMiAxLjgtNC41NCAxLjgtMy42MiAwLTYuNDUtMi45Mi02LjQ1LTYuNTRzMi44My02LjU0IDYuNDUtNi41NGMxLjk1IDAgMy4zOC43NyA0LjQzIDEuNzZMMTUuNCAyLjVDMTMuOTQgMS4wOCAxMS45OCAwIDkuMjQgMCA0LjI4IDAgLjExIDQuMDQuMTEgOXM0LjE3IDkgOS4xMyA5YzIuNjggMCA0LjctLjg4IDYuMjgtMi41MiAxLjYyLTEuNjIgMi4xMy0zLjkxIDIuMTMtNS43NSAwLS41Ny0uMDQtMS4xLS4xMy0xLjU0SDkuMjR6Ii8+PHBhdGggZmlsbD0iI0VBNDMzNSIgZD0iTTI1IDYuMTljLTMuMjEgMC01LjgzIDIuNDQtNS44MyA1LjgxIDAgMy4zNCAyLjYyIDUuODEgNS44MyA1LjgxczUuODMtMi40NiA1LjgzLTUuODFjMC0zLjM3LTIuNjItNS44MS01LjgzLTUuODF6bTAgOS4zM2MtMS43NiAwLTMuMjgtMS40NS0zLjI4LTMuNTIgMC0yLjA5IDEuNTItMy41MiAzLjI4LTMuNTJzMy4yOCAxLjQzIDMuMjggMy41MmMwIDIuMDctMS41MiAzLjUyLTMuMjggMy41MnoiLz48cGF0aCBmaWxsPSIjNDI4NUY0IiBkPSJNNTMuNTggNy40OWgtLjA5Yy0uNTctLjY4LTEuNjctMS4zLTMuMDYtMS4zQzQ3LjUzIDYuMTkgNDUgOC43MiA0NSAxMmMwIDMuMjYgMi41MyA1LjgxIDUuNDMgNS44MSAxLjM5IDAgMi40OS0uNjIgMy4wNi0xLjMyaC4wOXYuODFjMCAyLjIyLTEuMTkgMy40MS0zLjEgMy40MS0xLjU2IDAtMi41My0xLjEyLTIuOTMtMi4wN2wtMi4yMi45MmMuNjQgMS41NCAyLjMzIDMuNDMgNS4xNSAzLjQzIDIuOTkgMCA1LjUyLTEuNzYgNS41Mi02LjA1VjYuNDloLTIuNDJ2MXptLTIuOTMgOC4wM2MtMS43NiAwLTMuMS0xLjUtMy4xLTMuNTIgMC0yLjA1IDEuMzQtMy41MiAzLjEtMy41MiAxLjc0IDAgMy4xIDEuNSAzLjEgMy41NC4wMSAyLjAzLTEuMzYgMy41LTMuMSAzLjV6Ii8+PHBhdGggZmlsbD0iI0ZCQkMwNSIgZD0iTTM4IDYuMTljLTMuMjEgMC01LjgzIDIuNDQtNS44MyA1LjgxIDAgMy4zNCAyLjYyIDUuODEgNS44MyA1LjgxczUuODMtMi40NiA1LjgzLTUuODFjMC0zLjM3LTIuNjItNS44MS01LjgzLTUuODF6bTAgOS4zM2MtMS43NiAwLTMuMjgtMS40NS0zLjI4LTMuNTIgMC0yLjA5IDEuNTItMy41MiAzLjI4LTMuNTJzMy4yOCAxLjQzIDMuMjggMy41MmMwIDIuMDctMS41MiAzLjUyLTMuMjggMy41MnoiLz48cGF0aCBmaWxsPSIjMzRBODUzIiBkPSJNNTggLjI0aDIuNTF2MTcuNTdINTh6Ii8+PHBhdGggZmlsbD0iI0VBNDMzNSIgZD0iTTY4LjI2IDE1LjUyYy0xLjMgMC0yLjIyLS41OS0yLjgyLTEuNzZsNy43Ny0zLjIxLS4yNi0uNjZjLS40OC0xLjMtMS45Ni0zLjctNC45Ny0zLjctMi45OSAwLTUuNDggMi4zNS01LjQ4IDUuODEgMCAzLjI2IDIuNDYgNS44MSA1Ljc2IDUuODEgMi42NiAwIDQuMi0xLjYzIDQuODQtMi41N2wtMS45OC0xLjMyYy0uNjYuOTYtMS41NiAxLjYtMi44NiAxLjZ6bS0uMTgtNy4xNWMxLjAzIDAgMS45MS41MyAyLjIgMS4yOGwtNS4yNSAyLjE3YzAtMi40NCAxLjczLTMuNDUgMy4wNS0zLjQ1eiIvPjwvc3ZnPg=="),nt=G(_s||(_s=__template(["\n  ","\n  ","\n  ","\n  ","\n\n  .rewarded-ad-prompt {\n    width: 100%;\n  }\n\n  .rewarded-ad-thanks-message {\n    font-size: 22px; // 1.375rem;\n    font-weight: 400;\n    line-height: 28px; // 1.75rem;\n    letter-spacing: 0px;\n    text-align: center;\n    color: #202124;\n    margin-block-end: 48px; // 3rem;\n  }\n"])),V,Y,W,F),st=U(_t||(_t=__template(["\n  <style>\n    ",'\n  </style>\n  <div\n    class="rewarded-ad-prompt"\n    tabindex="-1"\n    role="dialog"\n    aria-labelledby="thanks-id"\n    aria-modal="true"\n  >\n    <div class="exit-container">','</div>\n    <div class="rewarded-ad-thanks-message" id="thanks-id">\n      $THANKS_FOR_VIEWING_THIS_AD$\n    </div>\n  </div>\n'])),nt,K);var rt=(t=>(t.TYPE_REGISTRATION_WALL="TYPE_REGISTRATION_WALL",t.TYPE_NEWSLETTER_SIGNUP="TYPE_NEWSLETTER_SIGNUP",t.TYPE_REWARDED_SURVEY="TYPE_REWARDED_SURVEY",t.TYPE_REWARDED_AD="TYPE_REWARDED_AD",t.TYPE_CONTRIBUTION="TYPE_CONTRIBUTION",t.TYPE_SUBSCRIPTION="TYPE_SUBSCRIPTION",t.TYPE_BYO_CTA="TYPE_BYO_CTA",t))(rt||{});const ot={en:"Subscribe with Google",ar:"Google اشترك مع",de:"Abonnieren mit Google","en-au":"Subscribe with Google","en-ca":"Subscribe with Google","en-gb":"Subscribe with Google","en-us":"Subscribe with Google",es:"Suscríbete con Google","es-419":"Suscríbete con Google","es-latam":"Suscríbete con Google","es-latn":"Suscríbete con Google",fr:"S'abonner avec Google","fr-ca":"S'abonner avec Google",hi:"Google के ज़रिये सदस्यता",id:"Berlangganan dengan Google",it:"Abbonati con Google",ja:"Google で購読",ko:"Google 을 통한구독",ms:"Langgan dengan Google",nl:"Abonneren via Google",no:"Abonner med Google",pl:"Subskrybuj z Google",pt:"Subscrever com o Google","pt-br":"Assine com o Google",ru:"Подпиcка через Google",sv:"Prenumerera med Google",th:"สมัครฟาน Google",tr:"Google ile Abone Ol",uk:"Підписатися через Google","zh-cn":"通过 Google 订阅","zh-hk":"透過 Google 訂閱","zh-tw":"透過 Google 訂閱"},at={en:"Contribute with Google",ar:"المساهمة باستخدام Google",de:"Mit Google beitragen","en-au":"Contribute with Google","en-ca":"Contribute with Google","en-gb":"Contribute with Google","en-us":"Contribute with Google",es:"\tContribuye con Google","es-419":"Contribuir con Google","es-latam":"Contribuir con Google","es-latn":"Contribuye con Google",fr:"Contribuer avec Google","fr-ca":"Contribuer avec Google",hi:"Google खाते की मदद से योगदान करें",id:"Berkontribusi dengan Google",it:"Contribuisci con Google",ja:"Google で寄付",ko:"Google을 통해 참여하기",ms:"Sumbangkan dengan Google",nl:"Bijdragen met Google",no:"Bidra med Google",pl:"Wesprzyj publikację przez Google",pt:"Contribuir utilizando o Google","pt-br":"Contribua usando o Google",ru:"Внести средства через Google",sv:"Bidra med Google",th:"มีส่วนร่วมผ่าน Google",tr:"Google ile Katkıda Bulun",uk:"Зробити внесок через Google","zh-cn":"通过 Google 捐赠","zh-hk":"透過 Google 提供內容","zh-tw":"透過 Google 捐款"},ht={en:"You have signed up before.",ar:"سبق أن اشتركت في النشرة الإخبارية.",de:"Du hast dich bereits angemeldet.","en-au":"You have signed up before.","en-ca":"You have signed up before.","en-gb":"You have signed up before.","en-us":"You have signed up before.",es:"Ya te has registrado anteriormente.","es-419":"Ya te registraste antes.",fr:"Vous vous êtes déjà inscrit.","fr-ca":"Vous vous êtes inscrit auparavant.",hi:"न्यूज़लेटर के लिए पहले ही साइन अप किया जा चुका है.",id:"Anda telah mendaftar sebelumnya.",it:"Hai già effettuato l'iscrizione.",ja:"すでに登録されています。",ko:"이전에 가입한 사용자입니다.",ms:"Anda sudah mendaftar sebelum ini.",nl:"Je hebt je al eerder aangemeld.",no:"Du er allerede registrert.",pl:"Już wcześniej się zarejestrowałeś(-aś).",pt:"Já se inscreveu anteriormente.","pt-br":"Você se inscreveu anteriormente.",ru:"Вы уже зарегистрированы.",sv:"Du har redan registrerat dig.",th:"คุณสมัครรับข้อมูลมาก่อนแล้ว",tr:"Daha önce kaydolmuştunuz.",uk:"Ви вже зареєструвалися.","zh-cn":"您之前已注册。","zh-hk":"您之前已訂閱。","zh-tw":"你已經訂閱了。"},lt={en:"Registration failed. Try registering again.",ar:"تعذَّرت عملية التسجيل. يُرجى إعادة المحاولة.",de:"Registrierung fehlgeschlagen. Versuche es noch einmal.","en-au":"Registration failed. Try registering again.","en-ca":"Registration failed. Try registering again.","en-gb":"Registration failed. Try registering again.","en-us":"Registration failed. Try registering again.",es:"No se ha podido completar el registro. Prueba a registrarte de nuevo.","es-419":"No se pudo completar el registro. Vuelve a intentarlo.",fr:"Échec de l'enregistrement. Réessayez.","fr-ca":"Échec de l'inscription. Essayez de vous inscrire à nouveau.",hi:"रजिस्ट्रेशन नहीं हो सका. फिर से रजिस्टर करने की कोशिश करें.",id:"Pendaftaran gagal. Coba daftar lagi.",it:"Registrazione non riuscita. Prova a registrarti di nuovo.",ja:"登録できませんでした。もう一度お試しください。",ko:"등록에 실패했습니다. 다시 등록해 보세요.",ms:"Pendaftaran gagal. Cuba mendaftar lagi.",nl:"Registratie mislukt. Probeer opnieuw te registreren.",no:"Registreringen mislyktes. Prøv å registrere deg på nytt.",pl:"Rejestracja się nie udała. Spróbuj jeszcze raz się zarejestrować.",pt:"Falha no registo. Tente registar-se novamente.","pt-br":"Não foi possível fazer o registro. Tente novamente.",ru:"Ошибка регистрации. Повторите попытку.",sv:"Registreringen misslyckades. Försök att registrera dig igen.",th:"ลงทะเบียนไม่สำเร็จ ลองลงทะเบียนอีกครั้ง",tr:"Kayıt işlemi başarısız oldu. Tekrar kaydolmayı deneyin.",uk:"Помилка реєстрації. Повторіть спробу.","zh-cn":"注册失败。请尝试重新注册。","zh-hk":"註冊失敗。請嘗試重新註冊。","zh-tw":"註冊失敗，請再試一次。"},ut={en:"Signup failed. Try signing up again.",ar:"تعذَّرت عملية الاشتراك. يُرجى إعادة المحاولة.",de:"Anmeldung fehlgeschlagen. Versuche es noch einmal.","en-au":"Sign-up failed. Try signing up again.","en-ca":"Sign-up failed. Try signing up again.","en-gb":"Sign-up failed. Try signing up again.","en-us":"Sign-up failed. Try signing up again.",es:"No se ha podido completar la suscripción. Prueba a suscribirte de nuevo.","es-419":"Se produjo un error de registro. Vuelve a intentarlo.",fr:"Échec de l'inscription. Réessayez.","fr-ca":"Échec de l'inscription. Essayez de vous inscrire à nouveau.",hi:"साइन अप नहीं किया जा सका. फिर से साइन अप करने की कोशिश करें.",id:"Pendaftaran gagal. Coba daftar lagi.",it:"Iscrizione non riuscita. Prova a iscriverti di nuovo.",ja:"登録できませんでした。もう一度お試しください。",ko:"가입에 실패했습니다. 다시 가입해 보세요.",ms:"Daftar gagal. Cuba daftar lagi.",nl:"Aanmelding mislukt. Probeer opnieuw aan te melden.",no:"Registreringen mislyktes. Prøv å registrere deg på nytt.",pl:"Rejestracja się nie udała. Spróbuj jeszcze raz się zarejestrować.",pt:"Falha na inscrição. Tente inscrever-se novamente.","pt-br":"Não foi possível se inscrever. Tente novamente.",ru:"Не удалось зарегистрироваться. Повторите попытку.",sv:"Registreringen misslyckades. Försök att registrera dig igen.",th:"ลงชื่อสมัครใช้ไม่สำเร็จ ลองลงชื่อสมัครใช้อีกครั้ง",tr:"Kaydolma işlemi başarısız oldu. Tekrar kaydolmayı deneyin.",uk:"Помилка реєстрації. Повторіть спробу.","zh-cn":"注册失败。请尝试重新注册。","zh-hk":"申請失敗。請嘗試重新申請。","zh-tw":"訂閱失敗，請再試一次。"},ct={en:'Created an account with <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',ar:'تم إنشاء حساب باستخدام <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>.',de:'Konto bei <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> wurde erstellt',"en-au":'Created an account with <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',"en-ca":'Created an account with <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',"en-gb":'Created an account with <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',"en-us":'Created an account with <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',es:'Has creado una cuenta con <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',"es-419":'Se creó una cuenta con <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',fr:'A créé un compte avec <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',"fr-ca":'Un compte a été créé avec l\'adresse <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',hi:'<ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> का इस्तेमाल करके, एक खाता बनाया गया',id:'Membuat akun dengan <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',it:'È stato creato un account con l\'indirizzo <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',ja:'<ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> でアカウントを作成しました',ko:'<ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>(으)로 계정을 만들었습니다.',ms:'Membuat akaun dengan <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',nl:'Account gemaakt met <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',no:'Du har opprettet en konto med <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',pl:'Utworzono konto za pomocą adresu <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',pt:'Criou uma conta com <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',"pt-br":'Conta criada com o e-mail <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',ru:'Вы зарегистрировали аккаунт на адрес <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>.',sv:'Du skapade ett konto med <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',th:'สร้างบัญชีด้วย <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',tr:'<ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> ile bir hesap oluşturun',uk:'Обліковий запис створено за допомогою електронної адреси <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',"zh-cn":'已使用 <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> 创建帐号',"zh-hk":'已使用 <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> 建立帳戶',"zh-tw":'已使用 <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> 建立帳戶'},dt={en:'Signed up with <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> for the newsletter',ar:'تم الاشتراك في النشرة الإخبارية باستخدام <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>.',de:'Du hast dich für den Newsletter von <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> angemeldet',"en-au":'Signed up with <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> for the newsletter',"en-ca":'Signed up with <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> for the newsletter',"en-gb":'Signed up with <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> for the newsletter',"en-us":'Signed up with <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> for the newsletter',es:'Te has suscrito a la newsletter con <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',"es-419":'Te registraste con <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> para recibir el boletín informativo',fr:'S\'est abonné à la newsletter avec <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',"fr-ca":"Vous êtes inscrit au bulletin d'information avec l'adresse <ph name=\"EMAIL\"><ex>user@gmail.com</ex>%s</ph>",hi:'न्यूज़लेटर पाने के लिए, <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> से साइन अप किया गया',id:'Mendaftar dengan <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> untuk mendapatkan newsletter',it:'Iscrizione alla newsletter con l\'indirizzo <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> effettuata',ja:'<ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> でニュースレターを登録しました',ko:'<ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>(으)로 뉴스레터에 가입했습니다.',ms:'Mendaftar dengan <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> untuk surat berita',nl:'Aangemeld met <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> voor de nieuwsbrief',no:'Du har registrert deg for nyhetsbrevet med <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',pl:'Zapisano się na newsletter za pomocą adresu <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',pt:'Inscreveu-se com <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> no boletim informativo',"pt-br":'Inscrição na newsletter feita com o e-mail <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',ru:'Вы подписались на новостную рассылку, используя аккаунт <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>.',sv:'Du registrerade dig för nyhetsbrevet med <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',th:'ลงชื่อเข้าใช้ด้วย <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> สำหรับจดหมายข่าว',tr:'Bülten için <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> ile kaydoldunuz',uk:'Ви підписалися на інформаційні листи на електронну адресу <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph>',"zh-cn":'已使用 <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> 订阅简报',"zh-hk":'已使用 <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> 註冊通訊',"zh-tw":'已使用 <ph name="EMAIL"><ex>user@gmail.com</ex>%s</ph> 訂閱電子報'},pt={en:"No membership found",ar:"لم يتم العثور على أي اشتراك.",de:"Keine Mitgliedschaftsdaten gefunden","en-au":"No membership found","en-ca":"No membership found","en-gb":"No membership found","en-us":"No membership found",es:"No se han encontrado suscripciones","es-419":"No se encontró ninguna membresía",fr:"Aucun abonnement trouvé","fr-ca":"Aucun abonnement trouvé",hi:"पैसे चुकाकर ली जाने वाली कोई सदस्यता नहीं मिली",id:"Langganan tidak ditemukan",it:"Nessun abbonamento trovato",ja:"メンバーシップが見つかりません",ko:"멤버십 정보를 찾을 수 없습니다.",ms:"Tiada keahlian ditemukan",nl:"Geen lidmaatschap gevonden",no:"Fant ingen abonnementer",pl:"Nie znaleziono subskrypcji",pt:"Nenhuma subscrição encontrada","pt-br":"Nenhuma assinatura foi encontrada",ru:"Подписка не найдена.",sv:"Inget medlemskap hittades",th:"ไม่พบการเป็นสมาชิก",tr:"Üyelik bulunamadı",uk:"Немає підписок","zh-cn":"未找到会员资料","zh-hk":"找不到會籍","zh-tw":"找不到會員資料"},gt={en:"Close dialog",ar:"إغلاق مربّع الحوار",de:"Dialogfeld schließen","en-au":"Close dialog","en-ca":"Close dialog","en-gb":"Close dialog","en-us":"Close dialog",es:"Cerrar cuadro de diálogo","es-419":"Cerrar diálogo",fr:"Fermer la boîte de dialogue","fr-ca":"Fermer la boîte de dialogue",hi:"डायलॉग बॉक्स बंद करें",id:"Tutup dialog",it:"Chiudi la finestra di dialogo",ja:"ダイアログを閉じる",ko:"대화상자 닫기",ms:"Tutup dialog",nl:"Dialoogvenster sluiten",no:"Lukk dialogboksen",pl:"Zamknij okno",pt:"Fechar caixa de diálogo","pt-br":"Fechar caixa de diálogo",ru:"Закрыть диалоговое окно",sv:"Stäng dialogrutan",th:"ปิดกล่องโต้ตอบ",tr:"İletişim kutusunu kapat",uk:"Закрити вікно","zh-cn":"关闭对话框","zh-hk":"閂對話框","zh-tw":"關閉對話方塊"},mt={en:"Contribute",ar:"مساهمة",de:"Beitragen","en-au":"Contribute","en-ca":"Contribute","en-gb":"Contribute","en-us":"Contribute",es:"Contribuir","es-419":"Contribuir",fr:"Contribuer","fr-ca":"Faire une contribution",hi:"योगदान दें",id:"Beri kontribusi",it:"Contribuisci",ja:"寄付",ko:"후원",ms:"Sumbang",nl:"Bijdragen",no:"Bidra",pl:"Przekaż darowiznę",pt:"Contribuir","pt-br":"Contribuir",ru:"Сделать взнос",sv:"Bidra",th:"สนับสนุน",tr:"Katkıda bulun",uk:"Зробити внесок","zh-cn":"捐赠","zh-hk":"資助","zh-tw":"捐款"},ft={en:"Subscribe",ar:"اشتراك",de:"Abonnieren","en-au":"Subscribe","en-ca":"Subscribe","en-gb":"Subscribe","en-us":"Subscribe",es:"Suscribirme","es-419":"Suscribirse",fr:"S'abonner","fr-ca":"S'abonner",hi:"सदस्यता लें",id:"Langganan",it:"Iscriviti",ja:"購読",ko:"구독",ms:"Langgan",nl:"Abonneren",no:"Abonner",pl:"Subskrybuj",pt:"Subscrever","pt-br":"Fazer inscrição",ru:"Подписаться",sv:"Prenumerera",th:"สมัครสมาชิก",tr:"Abone ol",uk:"Підписатися","zh-cn":"订阅","zh-hk":"訂閱","zh-tw":"訂閱"},Et={en:"Already a contributor?",ar:"هل أنت مساهم حالي؟",de:"Du bist schon Beitragende/r?","en-au":"Already a contributor?","en-ca":"Already a contributor?","en-gb":"Already a contributor?","en-us":"Already a contributor?",es:"¿Ya has contribuido?","es-419":"¿Ya contribuyes?",fr:"Déjà contributeur ?","fr-ca":"Vous êtes déjà contributeur?",hi:"क्या आपने पहले योगदान दिया है?",id:"Sudah menjadi kontributor?",it:"Hai già dato contributi?",ja:"すでに寄付していますか？",ko:"이미 후원하고 계신가요?",ms:"Sudah menjadi penyumbang?",nl:"Ben je al een bijdrager?",no:"Har du allerede bidratt?",pl:"Już przekazujesz darowizny?",pt:"Já contribui?","pt-br":"Já faz contribuições?",ru:"Уже делаете взносы?",sv:"Är du redan en bidragsgivare?",th:"หากเป็นผู้สนับสนุนอยู่แล้ว",tr:"Halihazırda katkıda bulunuyor musunuz?",uk:"Уже робите внески?","zh-cn":"已是捐赠者？","zh-hk":"已是資助者？","zh-tw":"已經是捐款者了嗎？"},wt={en:"Already a subscriber?",ar:"هل أنت مشترك حالي؟",de:"Du bist bereits Abonnent/in?","en-au":"Already a subscriber?","en-ca":"Already a subscriber?","en-gb":"Already a subscriber?","en-us":"Already a subscriber?",es:"¿Ya te has suscrito?","es-419":"¿Ya te suscribiste?",fr:"Déjà abonné ?","fr-ca":"Vous êtes déjà abonné?",hi:"क्या आपने पहले ही सदस्यता ले ली है?",id:"Sudah berlangganan?",it:"Hai già l'abbonamento?",ja:"購読済みですか？",ko:"이미 구독 중이신가요?",ms:"Sudah menjadi pelanggan?",nl:"Ben je al abonnee?",no:"Er du allerede abonnent?",pl:"Już subskrybujesz?",pt:"Já subscreve?","pt-br":"Já é assinante?",ru:"Уже подписаны?",sv:"Prenumererar du redan?",th:"หากเป็นสมาชิกอยู่แล้ว",tr:"Halihazırda abone misiniz?",uk:"Уже підписалися?","zh-cn":"已订阅？","zh-hk":"已經是訂閱者？","zh-tw":"已經是訂閱者了嗎？"},bt={en:"Thanks for viewing this ad",ar:"نشكرك على مشاهدة هذا الإعلان.",de:"Vielen Dank, dass du dir diese Anzeige angesehen hast","en-au":"Thanks for viewing this ad","en-ca":"Thanks for viewing this ad","en-gb":"Thanks for viewing this ad","en-us":"Thanks for viewing this ad",es:"Gracias por ver este anuncio","es-419":"Gracias por ver este anuncio",fr:"Merci d'avoir regardé cette annonce","fr-ca":"Merci d'avoir regardé cette annonce",hi:"यह विज्ञापन देखने के लिए धन्यवाद",id:"Terima kasih telah melihat iklan ini",it:"Grazie per aver visualizzato questo annuncio",ja:"この広告をご覧いただきありがとうございます",ko:"이 광고를 시청해 주셔서 감사합니다.",ms:"Terima kasih kerana menonton iklan ini",nl:"Bedankt dat je deze advertentie hebt bekeken",no:"Takk for at du så på denne annonsen",pl:"Dziękujemy za obejrzenie tej reklamy",pt:"Obrigado por ver este anúncio","pt-br":"Agradecemos por assistir este anúncio",ru:"Спасибо, что посмотрели эту рекламу!",sv:"Tack för att du tittade på den här annonsen",th:"ขอบคุณที่ดูโฆษณานี้",tr:"Bu reklamı görüntülediğiniz için teşekkür ederiz",uk:"Дякуємо, що переглянули це оголошення","zh-cn":"感谢观看此广告","zh-hk":"感謝觀看此廣告","zh-tw":"感謝觀看這則廣告"},Tt={en:"View an ad",ar:"عرض إعلان",de:"Anzeige ansehen","en-au":"View an ad","en-ca":"View an ad","en-gb":"View an ad","en-us":"View an ad",es:"Ver un anuncio","es-419":"Ver un anuncio",fr:"Visionner une annonce","fr-ca":"Afficher une annonce",hi:"कोई विज्ञापन देखें",id:"Lihat iklan",it:"Visualizza un annuncio",ja:"広告を表示",ko:"광고 보기",ms:"Lihat iklan",nl:"Een advertentie bekijken",no:"Se en annonsv",pl:"Obejrzyj reklamę",pt:"Mostrar um anúncio","pt-br":"Ver anúncio",ru:"Посмотреть рекламу",sv:"Se en annons",th:"ดูโฆษณา",tr:"Reklam izle",uk:"Переглянути оголошення","zh-cn":"观看广告","zh-hk":"觀看廣告","zh-tw":"觀看廣告"},It={en:"Back to homepage",ar:"الرجوع إلى الصفحة الرئيسية",de:"Zurück zur Startseite","en-au":"Back to homepage","en-ca":"Back to homepage","en-gb":"Back to homepage","en-us":"Back to homepage",es:"Volver a la página principal","es-419":"Volver a la página principal",fr:"Retourner à la page d'accueil","fr-ca":"Retour à la page d'accueil",hi:"होम पेज पर वापस जाएं",id:"Kembali ke halaman beranda",it:"Torna alla home page",ja:"ホームページに戻る",ko:"홈페이지로 돌아가기",ms:"Kembali kepada halaman utama",nl:"Terug naar homepage",no:"Tilbake til startsiden",pl:"Powrót do strony głównej",pt:"Volte à página inicial","pt-br":"Voltar à página inicial",ru:"Вернуться на главную страницу",sv:"Tillbaka till startsidan",th:"กลับไปที่หน้าแรก",tr:"Ana sayfaya geri dön",uk:"Назад на головну сторінку","zh-cn":"返回首页","zh-hk":"返回首頁","zh-tw":"返回首頁"},yt="USER_TOKEN",St="READ_TIME",Ot="ents",Ct="isreadytopay",Nt="subscribe.google.com:rk",vt="toast",At={PPS_TAXONOMIES:"ppstaxonomies"};function Rt(t,e,i,n){const s=t.createElement(e);return function(t,e={}){for(const[i,n]of Object.entries(e))t.setAttribute(i,n)}(s,i),n&&(s.textContent=n),s}function Pt(t){t.parentElement&&t.parentElement.removeChild(t)}function xt(t,e){var i;const n=Rt(t.getWin().document,"style",{type:"text/css"});return n.textContent=e,null==(i=t.getHead())||i.appendChild(n),n}function Lt(t){let e=t;do{if(e.nextSibling)return!0}while(e=e.parentNode);return!1}const Mt={"align-content":"normal",animation:"none","align-items":"normal","align-self":"auto","alignment-baseline":"auto","backface-visibility":"hidden","background-clip":"border-box","background-image":"none","baseline-shift":"0","block-size":"auto",border:"none","border-collapse":"separate",bottom:"0","box-sizing":"border-box","break-after":"auto","break-before":"auto","break-inside":"auto","buffered-rendering":"auto","caption-side":"top","caret-color":"rgb(51, 51, 51)",clear:"none",color:"rgb(51, 51, 51)","color-rendering":"auto","column-count":"auto","column-fill":"balance","column-gap":"normal","column-rule-color":"rgb(51, 51, 51)","column-rule-style":"none","column-rule-width":"0","column-span":"none","column-width":"auto",contain:"none","counter-increment":"none","counter-reset":"none",cursor:"auto",direction:"inherit",display:"block","empty-cells":"show",filter:"none",flex:"none","flex-flow":"row nowrap",float:"none","flood-color":"rgb(0, 0, 0)","flood-opacity":"1",font:"none","font-size":"medium","font-family":"",height:"auto",hyphens:"manual","image-rendering":"auto","inline-size":"",isolation:"auto","justify-content":"normal","justify-items":"normal","justify-self":"auto","letter-spacing":"normal","lighting-color":"rgb(255, 255, 255)","line-break":"auto","line-height":"normal","margin-bottom":"0",mask:"none","max-block-size":"none","max-height":"none","max-inline-size":"none","max-width":"none","min-block-size":"none","min-height":"0","min-inline-size":"0","min-width":"0","mix-blend-mode":"normal","object-fit":"fill","offset-distance":"none","offset-path":"none","offset-rotate":"auto 0deg",opacity:"1",order:"0",orphans:"2",outline:"none","overflow-anchor":"auto","overflow-wrap":"normal",overflow:"visible",padding:"0",page:"",perspective:"none","pointer-events":"auto",position:"static",quotes:"",resize:"none",right:"0","scroll-behavior":"auto","tab-size":"8","table-layout":"auto","text-align":"start","text-align-last":"auto","text-anchor":"start","text-combine-upright":"none","text-decoration":"none","text-indent":"0","text-orientation":"mixed","text-overflow":"clip","text-rendering":"auto","text-shadow":"none","text-size-adjust":"auto","text-transform":"none","text-underline-position":"auto",top:"auto","touch-action":"auto",transform:"none",transition:"none 0s ease 0s","unicode-bidi":"normal","user-select":"auto","vector-effect":"none","vertical-align":"baseline",visibility:"visible","white-space":"normal",widows:"2","word-break":"normal","word-spacing":"0","word-wrap":"normal","writing-mode":"horizontal-tb",zoom:"1","z-index":"auto"};function kt(t,e){for(const[i,n]of Object.entries(e))t.style.setProperty(i,n.toString(),"important")}function Dt(t,e,i){t.style.setProperty(e,i)}async function Ut(t,e,i,n){const s=t.ownerDocument.defaultView,r=t.style.transition||"";await new Promise((r=>{s.setTimeout((()=>{s.setTimeout(r,i);const o="".concat(i,"ms ").concat(n);kt(t,Object.assign({transition:"transform ".concat(o,", opacity ").concat(o)},e))}))})),kt(t,{transition:r})}const Gt={height:"0"},jt={frameborder:"0",scrolling:"no",class:"swg-toast"};class Ft{constructor(t,e,i={}){this.Vt=e,this.Yt=i,this.Kt=null,this.qt=t.doc(),this.Ht=t.activities(),this.$t=Rt(this.qt.getWin().document,"iframe",jt),kt(this.$t,Gt)}getElement(){return this.$t}open(){var t;return null==(t=this.qt.getBody())||t.appendChild(this.$t),this.Jt()}async Jt(){const t=await this.Ht.openIframe(this.$t,this.Vt,this.Yt);await t.whenReady(),function(t,e){for(const i of["height"])Dt(t,i,"")}(this.$t),this.Kt=this.Qt({callback:()=>(kt(this.$t,{transform:"translateY(100%)",opacity:"1",visibility:"visible"}),Ut(this.$t,{transform:"translateY(0)",opacity:"1",visibility:"visible"},400,"ease-out"))}),this.qt.getWin().setTimeout((()=>{this.close()}),8e3)}async Qt({callback:t}){await this.Kt;try{await t()}catch(e){}}close(){return this.Kt=this.Qt({callback:()=>(this.qt.getWin().setTimeout((()=>{var t;null==(t=this.qt.getBody())||t.removeChild(this.$t)}),500),Ut(this.$t,{transform:"translateY(100%)",opacity:"1",visibility:"visible"},400,"ease-out"))}),this.Kt}}function zt(t){return"AbortError"===(null==t?void 0:t.name)}function Bt(t){const e=new Error("AbortError: "+t);return e.name="AbortError",e}class Wt{static throwAsync(t){setTimeout((()=>{throw t}))}}function Vt(...t){/swg.debug=1/.test(self.location.hash)&&(t.unshift("[Subscriptions]"),Yt(...t))}function Yt(...t){console.log(...t)}function Kt(...t){console.warn(...t)}function qt(t,e="Assertion failed",...i){if(t)return;const n=e.split("%s");let s=n.shift();for(const r of i){const t=n.shift();s+=Ht(r)+t}throw new Error(s)}function Ht(t){const e=t;return 1==(null==e?void 0:e.nodeType)?e.tagName.toLowerCase()+(e.id?"#"+e.id:""):String(t)}const $t=self.document.createElement("a"),Jt={};function Qt(t){const e=Jt[t];if(e)return e;const i=function(t,e){t.href=e;const i={href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:"0"==t.port?"":t.port,pathname:t.pathname,search:t.search,hash:t.hash,origin:t.protocol+"//"+t.host};return t.origin&&"null"!==t.origin?i.origin=t.origin:"data:"!==i.protocol&&i.host||(i.origin=i.href),i}($t,t);return Jt[t]=i}function Xt(t){return t?(/^[?#]/.test(t)?t.slice(1):t).split("&").reduce(((t,e)=>{const i=e.split("=");try{const e=decodeURIComponent(i[0]||""),n=decodeURIComponent(i[1]||"");e&&(t[e]=n)}catch(n){Kt("SwG could not parse a URL query param: ".concat(i[0]))}return t}),{}):{}}function Zt(t,e,i){const n=t.indexOf("?"),s=t.indexOf("#");let r="";return-1!=s&&(r=t.substring(s),t=t.substring(0,s)),-1==n?t+="?":n<t.length-1&&(t+="&"),(t+=encodeURIComponent(e)+"="+encodeURIComponent(i))+r}function te(t){return JSON.stringify(t.toArray(!1))}function ee(t){const e=t.getRootNode().querySelector("link[rel='canonical']");return null==e?void 0:e.href}function ie(t){const e=t.getRootNode();return ee(t)||e.location.origin+e.location.pathname}const ne=Qt(self.window.location.href);Qt(self.document.referrer);const se=/^(\)\]\}'\n)/;class re{constructor(t){this.Xt=t}async fetchCredentialedJson(t){const e=await this.fetch(t,{method:"GET",headers:{Accept:"text/plain, application/json"},credentials:"include"}),i=(await e.text()).replace(se,"");return JSON.parse(i)}async sendPost(t,e){const i={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},credentials:"include",body:"f.req="+te(e)},n=await this.fetch(t,i);if(!n)return{};const s=await n.text();try{const t=s.replace(se,"");return JSON.parse(t)}catch(r){return Wt.throwAsync(r),{}}}async fetch(t,e){try{return await this.Xt.fetch(t,e)}catch(i){const e=Qt(t).origin;throw new Error("XHR Failed fetching (".concat(e,"/...): (Note: a CORS error above may indicate that this publisher or domain is not configured in Publisher Center. The CORS error happens because 4xx responses do not set CORS headers.)\n\n")+i)}}sendBeacon(t,e){const i=new Blob(["f.req="+te(e)],{type:"application/x-www-form-urlencoded;charset=UTF-8"});navigator.sendBeacon(t,i)}}const oe={zero:"0",nocache:"1",hr1:"3600000",hr12:"43200000"},ae={default:{frontEnd:e,payEnv:"PRODUCTION",playEnv:"PROD",feCache:"nocache"},prod:{frontEnd:"https://news.google.com",payEnv:"PRODUCTION",playEnv:"PROD",feCache:"nocache"},autopush:{frontEnd:"https://subscribe-autopush.sandbox.google.com",payEnv:"PRODUCTION",playEnv:"AUTOPUSH",feCache:"nocache"},qual:{frontEnd:"https://subscribe-qual.sandbox.google.com",payEnv:"SANDBOX",playEnv:"STAGING",feCache:"nocache"}};function he(){const t=Xt(self.location.hash)["swg.mode"];return t&&ae[t]?ae[t]:ae.default}function le(){return Qt(he().frontEnd).origin}function ue(t){const e=Xt(self.location.hash)["swg.experiments"];return void 0!==e&&(t=Zt(t,"e",e)),"".concat(he().frontEnd,"/swg/_/api/v1")+t}function ce(t){return"https://pubads.g.doubleclick.net"+t}function de(t,e={},i=""){const n=i?"swg/".concat(i):"swg";t=function(t){return Zt(t,"_",function(t){const e=Number(oe[t]||1);if(0===e)return"_";const i=Date.now();return String(e<=1?i:Math.floor(i/e))}
/**
   * @license
   * SPDX-License-Identifier: Apache-2.0
   */(he().feCache))}("".concat(he().frontEnd,"/").concat(n,"/ui/v1").concat(t));const s=Xt(self.location.hash),r=s["swg.boqjsmode"];void 0!==r&&(t=Zt(t,"jsmode",r));const o=s["swg.experiments"];void 0!==o&&(t=Zt(t,"e",o));for(const a in e)t=Zt(t,a,e[a]);return t}function pe(t){return Object.assign(t,{_client:"SwG ".concat(i)})}const ge={};
/**
   * @license
   * SPDX-License-Identifier: Apache-2.0
   */let me;function fe(){var t;return null!==(t=function(){if("undefined"!=typeof window)return window.trustedTypes}())&&void 0!==t?t:null}
/**
   * @license
   * SPDX-License-Identifier: Apache-2.0
   */
class Ee{constructor(t,e){this.privateDoNotAccessOrElseWrappedHtml=t}toString(){return this.privateDoNotAccessOrElseWrappedHtml.toString()}}
/**
   * @license
   * SPDX-License-Identifier: Apache-2.0
   */
function we(t,e={}){if(function(t){var e;return(null===(e=fe())||void 0===e?void 0:e.isHTML(t))||t instanceof Ee}(t))return t;let i=String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;");return e.preserveSpaces&&(i=i.replace(/(^|[\r\n\t ]) /g,"$1&#160;")),e.preserveNewlines&&(i=i.replace(/(\r\n|\n|\r)/g,"<br>")),e.preserveTabs&&(i=i.replace(/(\t+)/g,'<span style="white-space:pre">$1</span>')),function(t){var e;const i=t;return function(t,e){return null!=e?e:new Ee(t,ge)}(i,null===(e=function(){var t,e;if(void 0===me)try{me=null!==(e=null===(t=fe())||void 0===t?void 0:t.createPolicy("google#safe",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t}))&&void 0!==e?e:null}catch(i){me=null}return me}())||void 0===e?void 0:e.createHTML(i))}(i)}function be(t,e){const i=t.en;if("object"!=typeof t||!e)return i;let n="string"==typeof e?e:(s=e).lang?s.lang:(null==(o=null==(r=null==s?void 0:s.ownerDocument)?void 0:r.documentElement)?void 0:o.lang)?s.ownerDocument.documentElement.lang:"en";var s,r,o;n=n.toLowerCase(),n=n.replace(/_/g,"-");const a=n.split("-");for(;a.length;){const e=a.join("-");if(e in t)return t[e];a.pop()}return i}class Te{constructor(t,e,i=1e4,n=3e3){this.Zt=t,this.W=e,this.te=i,this.ee=n,this.ie=t.clientConfigManager(),this.qt=t.doc().getRootNode(),this.ne=this.se(),this.re=this.oe(),this.ae=new re(t.win()),this.he=t.eventManager(),this.le=t.entitlementsManager(),this.rewardedSlotReadyHandler=this.ue.bind(this),this.rewardedSlotClosedHandler=this.ce.bind(this),this.rewardedSlotGrantedHandler=this.pe.bind(this),this.slotRenderEndedHandler=this.ge.bind(this)}oe(){const t=Rt(this.qt,"div",{class:"audience-action-local-wrapper"});kt(t,{all:"unset","background-color":"rgba(32, 33, 36, 0.6)",border:"none",bottom:"0",height:"100%",left:"0",opacity:"0","pointer-events":"auto",position:"fixed",right:"0",transition:"opacity 0.5s",top:"0",width:"100%","z-index":"2147483646"}),this.W.isClosable&&(t.onclick=this.close.bind(this));const e=t.attachShadow({mode:"open"}),i=Rt(this.qt,"audience-action-top-sentinal",{tabindex:"0"});return i.addEventListener("focus",this.me.bind(this)),this._e=Rt(this.qt,"audience-action-bottom-sentinal",{tabindex:"0"}),this._e.addEventListener("focus",this.fe.bind(this)),e.appendChild(i),e.appendChild(this.ne),e.appendChild(this._e),t}se(){const t=Rt(this.qt,"div",{});return kt(t,{height:"100%",display:"flex","display-flex-direction":"column","pointer-events":"none"}),t.onclick=t=>{t.stopPropagation()},t}Ee(){this.ne.innerHTML=J}we(){var t,e,i,n;this.W.isClosable||this.W.monetizationFunction||this.he.logSwgEvent(s.IMPRESSION_REWARDED_AD_ERROR),this.cleanUpGoogletag(),null==(e=(t=this.W).onCancel)||e.call(t),null==(n=(i=this.W).monetizationFunction)||n.call(i),this.triggerRewardedAdOnResultCallback(!1,!1)}be(){this.ne.innerHTML=X}async Te(){var t,e;this.W.action===rt.TYPE_REWARDED_AD?await this.Ie():this.W.action===rt.TYPE_NEWSLETTER_SIGNUP?await this.ye():(null==(e=(t=this.W).onCancel)||e.call(t),this.W.isClosable||(this.Ee(),this.Se()))}async ye(){var t,e;this.be(),this.Se(),this.he.logSwgEvent(s.IMPRESSION_BYOP_NEWSLETTER_OPT_IN);const i=await this.Oe(),n=null==(t=null==i?void 0:i.optInParameters)?void 0:t.rawCodeSnippet;n&&"PREFERENCE_PUBLISHER_PROVIDED_PROMPT"===(null==(e=null==i?void 0:i.optInParameters)?void 0:e.promptPreference)?this.Ce(n):(this.he.logSwgEvent(s.EVENT_BYOP_NEWSLETTER_OPT_IN_CONFIG_ERROR),this.Ee())}Ce(t){var e,i,n;const r=Rt(this.qt,"div",{}),o=this.Ne(H);r.innerHTML=o.concat(t);const a=r.querySelector("form");a&&this.re?(kt(r,{"background-color":"white",border:"none","border-top-left-radius":"20px","border-top-right-radius":"20px",bottom:"0",left:"50%","max-height":"90%","max-width":"100%","pointer-events":"auto",position:"fixed",overflow:"auto","text-align":"center",transform:"translate(-50%, 0)","z-index":"2147483646"}),r.onclick=t=>{t.stopPropagation()},null==(e=this.re.shadowRoot)||e.removeChild(this.ne),null==(i=this.re.shadowRoot)||i.appendChild(r),this.ve(),null==(n=r.querySelector(".opt-in-close-button"))||n.addEventListener("click",this.Ae.bind(this)),a.addEventListener("submit",this.Re.bind(this))):(this.he.logSwgEvent(s.EVENT_BYOP_NEWSLETTER_OPT_IN_CODE_SNIPPET_ERROR),this.Ee())}ve(){var t;null==(t=this.re.shadowRoot)||t.appendChild(this._e),this.Pe().length>0&&this.Pe()[0].focus()}async Re(){kt(this.re,{opacity:"0"}),this.he.logSwgEvent(s.ACTION_BYOP_NEWSLETTER_OPT_IN_SUBMIT),await this.t(),await this.xe(1e3),this.Le()}async xe(t){return new Promise((e=>this.Zt.win().setTimeout(e,t)))}Ae(){var t,e;this.he.logSwgEvent(s.ACTION_BYOP_NEWSLETTER_OPT_IN_CLOSE),this.W.isClosable&&(this.Le(),null==(e=(t=this.W).onCancel)||e.call(t))}isSubscription(){var t,e,i;return this.W.autoPromptType===k.SUBSCRIPTION||this.W.autoPromptType===k.SUBSCRIPTION_LARGE||!this.W.autoPromptType&&!!(null==(i=null==(e=null==(t=this.config)?void 0:t.publication)?void 0:e.revenueModel)?void 0:i.subscriptions)}isContribution(){var t,e,i;return this.W.autoPromptType===k.CONTRIBUTION||this.W.autoPromptType===k.CONTRIBUTION_LARGE||!this.W.autoPromptType&&!!(null==(i=null==(e=null==(t=this.config)?void 0:t.publication)?void 0:e.revenueModel)?void 0:i.contributions)}async Me(){var t,e;const i=this.Zt.win();return!((null==(t=i.googletag)?void 0:t.apiReady)&&!(null==(e=i.googletag)?void 0:e.getVersion()))&&new Promise((t=>{const e=setTimeout((()=>t(!1)),this.te);i.googletag=i.googletag||{cmd:[]},i.googletag.cmd.push((()=>{clearTimeout(e),t(!0)}))}))}async Ie(){var t,e,i;this.he.logSwgEvent(s.EVENT_REWARDED_AD_FLOW_INIT);const[n,r]=await Promise.all([this.Oe(),this.Me()]);return r?(null==(t=null==n?void 0:n.rewardedAdParameters)?void 0:t.adunit)&&(null==(e=null==n?void 0:n.rewardedAdParameters)?void 0:e.customMessage)&&(null==(i=null==n?void 0:n.publication)?void 0:i.name)?(this.config=n,this.Zt.win().googletag.cmd.push(this.ke.bind(this)),void(this.De=setTimeout((()=>{this.he.logSwgEvent(s.EVENT_REWARDED_AD_GPT_ERROR),this.we()}),this.te))):(this.he.logSwgEvent(s.EVENT_REWARDED_AD_CONFIG_ERROR),void this.we()):(this.he.logSwgEvent(s.EVENT_REWARDED_AD_GPT_MISSING_ERROR),void this.we())}ke(){const t=this.Zt.win().googletag;if(this.Ue=t.defineOutOfPageSlot(this.config.rewardedAdParameters.adunit,t.enums.OutOfPageFormat.REWARDED),!this.Ue)return this.he.logSwgEvent(s.EVENT_REWARDED_AD_PAGE_ERROR),void this.we();this.Ue.addService(t.pubads()),t.pubads().addEventListener("rewardedSlotReady",this.rewardedSlotReadyHandler),t.pubads().addEventListener("rewardedSlotClosed",this.rewardedSlotClosedHandler),t.pubads().addEventListener("rewardedSlotGranted",this.rewardedSlotGrantedHandler),t.pubads().addEventListener("slotRenderEnded",this.slotRenderEndedHandler),t.enableServices(),t.display(this.Ue),t.pubads().refresh([this.Ue])}ge(t){t.slot===this.Ue&&t.isEmpty&&(clearTimeout(this.De),this.he.logSwgEvent(s.EVENT_REWARDED_AD_NOT_FILLED),Kt("Rewarded ad slot could not be filled"),this.we())}ue(t){var e,i,n,r;clearTimeout(this.De),this.Ge=t.makeRewardedVisible;const o=!this.isContribution()&&!this.isSubscription(),a=this.ie.getLanguage(),h=we(this.config.publication.name).toString(),l=this.Ne(K),u=we(this.config.rewardedAdParameters.customMessage).toString(),c=be(Tt,a),d=this.isSubscription()||this.W.onAlternateAction?be(ft,a):be(mt,a),p=!this.W.onAlternateAction&&o?"":tt.replace("$SUPPORT_MESSAGE$",d),g=this.isSubscription()||this.W.onSignIn?be(wt,a):be(Et,a),m=!this.W.onSignIn&&o?"":et.replace("$SIGN_IN_MESSAGE$",g);this.ne.innerHTML=it.replace("$TITLE$",h).replace("$EXIT$",l).replace("$MESSAGE$",u).replace("$VIEW_AN_AD$",c).replace("$SUPPORT_BUTTON$",p).replace("$SIGN_IN_BUTTON$",m),null==(e=this.ne.querySelector(".rewarded-ad-support-button"))||e.addEventListener("click",this.je.bind(this)),null==(i=this.ne.querySelector(".rewarded-ad-view-ad-button"))||i.addEventListener("click",this.Fe.bind(this)),null==(n=this.ne.querySelector(".rewarded-ad-close-button"))||n.addEventListener("click",this.ze.bind(this)),null==(r=this.ne.querySelector(".rewarded-ad-sign-in-button"))||r.addEventListener("click",this.Be.bind(this)),this.Se(),this.We(),this.he.logSwgEvent(s.EVENT_REWARDED_AD_READY),this.he.logSwgEvent(s.IMPRESSION_REWARDED_AD)}ce(){var t,e;this.cleanUpGoogletag(),this.W.isClosable&&(this.Le(),null==(e=(t=this.W).onCancel)||e.call(t)),this.he.logSwgEvent(s.ACTION_REWARDED_AD_CLOSE_AD,!0),this.triggerRewardedAdOnResultCallback(!0,!1)}async pe(t){var e,i,n;const r=this.ie.getLanguage(),o=be(gt,r),a=be(bt,r);this.ne.innerHTML=st.replace("$CLOSE_BUTTON_DESCRIPTION$",o).replace("$THANKS_FOR_VIEWING_THIS_AD$",a);const h=this.ne.getElementsByClassName("rewarded-ad-close-button"),l=setTimeout(this.Le.bind(this),this.ee);null==(e=h.item(0))||e.addEventListener("click",(()=>{clearTimeout(l),this.Le()})),this.cleanUpGoogletag(),this.he.logSwgEvent(s.EVENT_REWARDED_AD_GRANTED),this.We(),this.triggerRewardedAdOnResultCallback(!0,!0,null==(i=null==t?void 0:t.payload)?void 0:i.amount,null==(n=null==t?void 0:t.payload)?void 0:n.type),await this.t()}ze(){var t,e;this.cleanUpGoogletag(),this.Le(),null==(e=(t=this.W).onCancel)||e.call(t),this.he.logSwgEvent(s.ACTION_REWARDED_AD_CLOSE,!0),this.triggerRewardedAdOnResultCallback(!0,!1)}je(){var t,e;this.he.logSwgEvent(s.ACTION_REWARDED_AD_SUPPORT,!0),null==(e=(t=this.W).onCancel)||e.call(t),this.Le(),this.cleanUpGoogletag(),this.W.onAlternateAction?this.W.onAlternateAction():this.W.monetizationFunction()}Fe(){var t;null==(t=this.ne.getElementsByClassName("rewarded-ad-view-ad-button").item(0))||t.setAttribute("disabled","true"),this.he.logSwgEvent(s.ACTION_REWARDED_AD_VIEW,!0),this.Ge()}Be(){var t,e;this.he.logSwgEvent(s.ACTION_REWARDED_AD_SIGN_IN,!0),this.W.onSignIn?(null==(e=(t=this.W).onCancel)||e.call(t),this.Le(),this.cleanUpGoogletag(),this.W.onSignIn()):this.Zt.callbacks().triggerLoginRequest({linkRequested:!1})}Ve(t,e){const i=this.Zt.pageConfig().getPublicationId(),n="/publication/".concat(encodeURIComponent(i),"/").concat(t);return e.reduce(((t,[e,i])=>Zt(t,e,i)),ue(n))}async Oe(){const t=[["publicationId",this.Zt.pageConfig().getPublicationId()],["configurationId",this.W.configurationId],["origin",Qt(this.Zt.win().location.href).origin],["previewEnabled",(!!this.W.shouldRenderPreview).toString()]],e=this.Ve("getactionconfigurationui",t);return await this.ae.fetchCredentialedJson(e)}async t(){if(this.W.shouldRenderPreview)return;const t=[["sut",await this.Zt.storage().get(yt,!0)],["configurationId",this.W.configurationId],["audienceActionType",this.W.action]],e=this.Ve("completeaudienceaction",t),i={toArray:()=>[],label:String},n=await this.ae.sendPost(e,i);if(n.updated){this.le.clear(),n.swgUserToken&&await this.Zt.storage().set(yt,n.swgUserToken,!0);const t=Date.now().toString();await this.Zt.storage().set(St,t,!1),await this.le.getEntitlements()}}Se(){this.qt.documentElement.appendChild(this.re),Dt(this.qt.body,"overflow","hidden"),this.re.offsetHeight,kt(this.re,{opacity:"1.0"})}Le(){Pt(this.re),Dt(this.qt.body,"overflow","")}We(){this.ne.querySelector(".rewarded-ad-prompt").focus()}fe(){this.Ye()[1].focus()}me(){const t=this.Ye();t[t.length-2].focus()}Ye(){return this.re.shadowRoot.querySelectorAll('a[href], button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])')}Pe(){return this.re.shadowRoot.querySelectorAll("input, textarea")}async start(){await this.Te()}Ne(t){const e=this.ie.getLanguage();if(this.W.isClosable){const i=be(gt,e);return t.replace("$CLOSE_BUTTON_DESCRIPTION$",i)}{if(this.W.action===rt.TYPE_NEWSLETTER_SIGNUP)return"";const t=be(It,e);return B.replace("$BACK_TO_HOME_TEXT$",t).replace("$BACK_TO_HOME_LINK$",Qt(this.Zt.win().location.href).origin)}}showNoEntitlementFoundToast(){const t=this.ie.getLanguage(),e=be(pt,t);new Ft(this.Zt,de("/toastiframe",{flavor:"custom",customText:e})).open()}close(){this.W.action===rt.TYPE_REWARDED_AD?this.ze():this.W.action===rt.TYPE_NEWSLETTER_SIGNUP&&this.Ae()}cleanUpGoogletag(){var t,e,i,n,s,r;const o=this.Zt.win().googletag;this.Ue&&(null==(t=null==o?void 0:o.destroySlots)||t.call(o,[this.Ue]));const a=null==(e=null==o?void 0:o.pubads)?void 0:e.call(o);null==(i=null==a?void 0:a.removeEventListener)||i.call(a,"rewardedSlotReady",this.rewardedSlotReadyHandler),null==(n=null==a?void 0:a.removeEventListener)||n.call(a,"rewardedSlotClosed",this.rewardedSlotClosedHandler),null==(s=null==a?void 0:a.removeEventListener)||s.call(a,"rewardedSlotGranted",this.rewardedSlotGrantedHandler),null==(r=null==a?void 0:a.removeEventListener)||r.call(a,"slotRenderEnded",this.slotRenderEndedHandler)}triggerRewardedAdOnResultCallback(t,e,i,n){var s,r;null==(r=(s=this.W).onResult)||r.call(s,{configurationId:this.W.configurationId,data:{rendered:t,rewardGranted:e,reward:i,type:n}})}}const Ie=new Set([s.ACTION_BYO_CTA_BUTTON_CLICK,s.ACTION_BYO_CTA_CLOSE,s.ACTION_CONTRIBUTION_OFFER_SELECTED,s.ACTION_NEWSLETTER_ALREADY_OPTED_IN_CLICK,s.ACTION_NEWSLETTER_OPT_IN_BUTTON_CLICK,s.ACTION_PAYMENT_COMPLETE,s.ACTION_PAYMENT_FLOW_STARTED,s.ACTION_REGWALL_ALREADY_OPTED_IN_CLICK,s.ACTION_REGWALL_OPT_IN_BUTTON_CLICK,s.ACTION_SURVEY_CLOSED,s.ACTION_SURVEY_NEXT_BUTTON_CLICK,s.ACTION_SURVEY_PREVIOUS_BUTTON_CLICK,s.ACTION_SURVEY_SUBMIT_CLICK,s.EVENT_NEWSLETTER_OPTED_IN,s.EVENT_REGWALL_OPTED_IN,s.EVENT_SURVEY_SUBMITTED,s.IMPRESSION_BYO_CTA,s.IMPRESSION_CONTRIBUTION_OFFERS,s.IMPRESSION_NEWSLETTER_OPT_IN,s.IMPRESSION_OFFERS,s.IMPRESSION_PAGE_LOAD,s.IMPRESSION_PAYWALL,s.IMPRESSION_REGWALL_OPT_IN,s.IMPRESSION_SURVEY]);class ye{constructor(t,e){this.Zt=t,this.ae=e,this.he=this.Zt.eventManager(),this.Ke=this.Zt.storage()}start(){this.he.registerEventListener(this.qe.bind(this))}async qe(t){if(!t.eventType||!Ie.has(t.eventType))return;const e=await this.Ke.get(yt,!0);if(!e)return;const i=encodeURIComponent(this.Zt.pageConfig().getPublicationId()),n=this.He(t);let s="/publication/".concat(i,"/audienceactivity");s=Zt(s,"sut",e),this.ae.sendBeacon(ue(s),n)}He(t){const e=new p;return e.setEvent(t.eventType),e}}var Se=(t=>(t.ENABLE_PUBLICATION_ID_SUFFIX_FOR_STORAGE_KEY="enable-pub-id-suffix-for-storage-key",t))(Se||{}),Oe=(t=>(t.BACKGROUND_CLICK_BEHAVIOR_EXPERIMENT="background_click_behavior_experiment",t.ACTION_ORCHESTRATION_EXPERIMENT="action_orchestration_experiment",t))(Oe||{});class Ce{constructor(){}resized(){}}async function Ne(t,e,i,n){const s=await t.acceptResult();if(s.origin!=e||i&&!s.originVerified||n&&!s.secureChannel)throw new Error("channel mismatch");return s.data}const ve={frameborder:"0",scrolling:"no"};class Ae extends Ce{constructor(t,e,i,n,s=!1,r=!1,o=!0){super(),this.Xt=t,this.Ht=e,this.Vt=i,this.Yt=n,this.$e=s,this.Je=r,this.Qe=o,this.Xe=null,this.qt=this.Xt.document,this.$t=Rt(this.qt,"iframe",ve),this.Ze=new Promise((t=>{this.ti=t}))}getElement(){return this.$t}async init(t){const e=await this.Ht.openIframe(this.$t,this.Vt,this.Yt);return this.ei(e,t)}shouldFadeBody(){return this.$e}hasLoadingIndicator(){return this.Je}ei(t,e){return this.Xe=t,this.ti(t),this.Xe.onResizeRequest((t=>{e.resizeView(this,t)})),this.Xe.whenReady()}ii(){return this.Ze}async on(t,e){(await this.ii()).on(t,e)}async execute(t){(await this.ii()).execute(t)}async acceptResult(){return(await this.ii()).acceptResult()}async acceptResultAndVerify(t,e,i){return Ne(await this.ii(),t,e,i)}async whenComplete(){await this.acceptResult()}async onCancel(t){try{await this.acceptResult()}catch(e){throw zt(e)&&t(),e}}resized(){this.Xe&&this.Xe.resized()}shouldAnimateFade(){return this.Qe}}var Re=(t=>(t.UNKNOWN="unknown",t.NON_SUBSCRIBER="non_subscriber",t.SUBSCRIBER="subscriber",t.PAST_SUBSCRIBER="past_subscriber",t))(Re||{}),Pe=(t=>(t.IMPRESSION_PAYWALL="paywall",t.IMPRESSION_AD="ad_shown",t.IMPRESSION_OFFERS="offers_shown",t.ACTION_SUBSCRIPTIONS_LANDING_PAGE="subscriptions_landing_page",t.ACTION_OFFER_SELECTED="offer_selected",t.ACTION_PAYMENT_FLOW_STARTED="payment_flow_start",t.ACTION_PAYMENT_COMPLETED="payment_complete",t.EVENT_CUSTOM="custom",t))(Pe||{}),xe=(t=>(t.EVENT_SHOWCASE_METER_OFFERED="EVENT_SHOWCASE_METER_OFFERED",t.EVENT_SHOWCASE_UNLOCKED_BY_SUBSCRIPTION="EVENT_SHOWCASE_UNLOCKED_BY_SUBSCRIPTION",t.EVENT_SHOWCASE_UNLOCKED_BY_METER="EVENT_SHOWCASE_UNLOCKED_BY_METER",t.EVENT_SHOWCASE_UNLOCKED_FREE_PAGE="EVENT_SHOWCASE_UNLOCKED_FREE_PAGE",t.EVENT_SHOWCASE_NO_ENTITLEMENTS_REGWALL="EVENT_SHOWCASE_NO_ENTITLEMENTS_REGWALL",t.EVENT_SHOWCASE_INELIGIBLE_PAYWALL="EVENT_SHOWCASE_INELIGIBLE_PAYWALL",t.EVENT_SHOWCASE_NO_ENTITLEMENTS_PAYWALL="EVENT_SHOWCASE_NO_ENTITLEMENTS_PAYWALL",t))(xe||{}),Le=(t=>(t.SHOW_OFFERS="showOffers",t.SHOW_SUBSCRIBE_OPTION="showSubscribeOption",t.SHOW_ABBRV_OFFER="showAbbrvOffer",t.SHOW_CONTRIBUTION_OPTIONS="showContributionOptions",t.SUBSCRIBE="subscribe",t.CONTRIBUTE="contribute",t.COMPLETE_DEFERRED_ACCOUNT_CREATION="completeDeferredAccountCreation",t.LINK_ACCOUNT="linkAccount",t.SHOW_LOGIN_PROMPT="showLoginPrompt",t.SHOW_LOGIN_NOTIFICATION="showLoginNotification",t.SHOW_METER_TOAST="showMeterToast",t))(Le||{}),Me=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.IMPRESSIONS=1]="IMPRESSIONS",t))(Me||{}),ke=(t=>(t.AUTO="auto",t.REDIRECT="redirect",t))(ke||{}),De=(t=>(t.SUBSCRIPTION="SUBSCRIPTION",t.UI_CONTRIBUTION="UI_CONTRIBUTION",t))(De||{}),Ue=(t=>(t.LIGHT="light",t.DARK="dark",t))(Ue||{});const Ge={[Pe.IMPRESSION_PAYWALL]:s.IMPRESSION_PAYWALL,[Pe.IMPRESSION_AD]:s.IMPRESSION_AD,[Pe.IMPRESSION_OFFERS]:s.IMPRESSION_OFFERS,[Pe.ACTION_SUBSCRIPTIONS_LANDING_PAGE]:s.ACTION_SUBSCRIPTIONS_LANDING_PAGE,[Pe.ACTION_OFFER_SELECTED]:s.ACTION_OFFER_SELECTED,[Pe.ACTION_PAYMENT_FLOW_STARTED]:s.ACTION_PAYMENT_FLOW_STARTED,[Pe.ACTION_PAYMENT_COMPLETED]:s.ACTION_PAYMENT_COMPLETE,[Pe.EVENT_CUSTOM]:s.EVENT_CUSTOM},je={[s.UNKNOWN]:null,[s.IMPRESSION_PAYWALL]:Pe.IMPRESSION_PAYWALL,[s.IMPRESSION_AD]:Pe.IMPRESSION_AD,[s.IMPRESSION_OFFERS]:Pe.IMPRESSION_OFFERS,[s.IMPRESSION_SUBSCRIBE_BUTTON]:null,[s.IMPRESSION_SMARTBOX]:null,[s.ACTION_SUBSCRIBE]:null,[s.ACTION_PAYMENT_COMPLETE]:Pe.ACTION_PAYMENT_COMPLETED,[s.ACTION_ACCOUNT_CREATED]:null,[s.ACTION_ACCOUNT_ACKNOWLEDGED]:null,[s.ACTION_SUBSCRIPTIONS_LANDING_PAGE]:Pe.ACTION_SUBSCRIPTIONS_LANDING_PAGE,[s.ACTION_PAYMENT_FLOW_STARTED]:Pe.ACTION_PAYMENT_FLOW_STARTED,[s.ACTION_OFFER_SELECTED]:Pe.ACTION_OFFER_SELECTED,[s.EVENT_PAYMENT_FAILED]:null,[s.EVENT_CUSTOM]:Pe.EVENT_CUSTOM},Fe={[xe.EVENT_SHOWCASE_METER_OFFERED]:[s.EVENT_HAS_METERING_ENTITLEMENTS,s.EVENT_OFFERED_METER],[xe.EVENT_SHOWCASE_UNLOCKED_BY_SUBSCRIPTION]:[s.EVENT_UNLOCKED_BY_SUBSCRIPTION],[xe.EVENT_SHOWCASE_UNLOCKED_BY_METER]:[s.EVENT_HAS_METERING_ENTITLEMENTS,s.EVENT_UNLOCKED_BY_METER],[xe.EVENT_SHOWCASE_UNLOCKED_FREE_PAGE]:[s.EVENT_UNLOCKED_FREE_PAGE],[xe.EVENT_SHOWCASE_NO_ENTITLEMENTS_REGWALL]:[s.EVENT_NO_ENTITLEMENTS,s.IMPRESSION_REGWALL,s.IMPRESSION_SHOWCASE_REGWALL],[xe.EVENT_SHOWCASE_NO_ENTITLEMENTS_PAYWALL]:[s.EVENT_NO_ENTITLEMENTS,s.IMPRESSION_PAYWALL],[xe.EVENT_SHOWCASE_INELIGIBLE_PAYWALL]:[s.EVENT_INELIGIBLE_PAYWALL,s.EVENT_NO_ENTITLEMENTS]},ze={[s.IMPRESSION_REGWALL]:r.LOCKED_REGWALL,[s.EVENT_UNLOCKED_BY_METER]:r.UNLOCKED_METER,[s.EVENT_UNLOCKED_BY_SUBSCRIPTION]:r.UNLOCKED_SUBSCRIBER,[s.EVENT_UNLOCKED_FREE_PAGE]:r.UNLOCKED_FREE,[s.IMPRESSION_PAYWALL]:r.LOCKED_PAYWALL,[s.EVENT_INELIGIBLE_PAYWALL]:r.INELIGIBLE_PAYWALL};function Be(t,e,i,n){return{eventCategory:t,eventAction:e,eventLabel:i,nonInteraction:n}}const We={[s.IMPRESSION_OFFERS]:Be("NTG paywall","paywall modal impression","",!0),[s.IMPRESSION_CONTRIBUTION_OFFERS]:Be("NTG membership","offer impressions","",!0),[s.ACTION_OFFER_SELECTED]:Be("NTG paywall","click","",!1),[s.ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLICK]:Be("NTG subscription","marketing modal click","",!1),[s.IMPRESSION_SWG_SUBSCRIPTION_MINI_PROMPT]:Be("NTG subscription","marketing modal impression","",!0),[s.ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLICK]:Be("NTG membership","marketing modal click","",!1),[s.IMPRESSION_SWG_CONTRIBUTION_MINI_PROMPT]:Be("NTG membership","membership modal impression","",!0),[s.IMPRESSION_NEWSLETTER_OPT_IN]:Be("NTG newsletter","newsletter modal impression","",!0),[s.EVENT_NEWSLETTER_OPTED_IN]:Be("NTG newsletter","newsletter signup","success",!1),[s.IMPRESSION_BYOP_NEWSLETTER_OPT_IN]:Be("NTG newsletter","newsletter modal impression","",!0),[s.ACTION_BYOP_NEWSLETTER_OPT_IN_SUBMIT]:Be("NTG newsletter","newsletter signup","success",!1),[s.IMPRESSION_REGWALL_OPT_IN]:Be("NTG account","registration modal impression","",!0),[s.EVENT_REGWALL_OPTED_IN]:Be("NTG account","registration","success",!1),[s.ACTION_SURVEY_DATA_TRANSFER]:Be("","survey submission","",!1),[s.IMPRESSION_BYO_CTA]:Be("","custom cta modal impression","",!0),[s.ACTION_BYO_CTA_BUTTON_CLICK]:Be("","custom cta click","",!1)},Ve={[s.ACTION_PAYMENT_COMPLETE]:Be("NTG subscription","submit","success",!1)},Ye={[s.ACTION_PAYMENT_COMPLETE]:Be("NTG membership","submit","success",!1)};function Ke(t){return Ge[t]}function qe(t){return"[object Object]"===Object.prototype.toString.call(t)}function He(t,e){return Object.values(t).includes(e)}function $e(t){return"function"==typeof t}function Je(t){return"boolean"==typeof t}class Qe{constructor(t){this.Zt=t,this.he=t.eventManager()}start(){this.he.registerEventListener(this.qe.bind(this))}qe(t,e){var i,n,s;const r=Qe.isGaEligible(this.Zt),o=Qe.isGtagEligible(this.Zt),a=Qe.isGtmEligible(this.Zt);if(!(r||o||a))return;const{ga:h,gtag:l,dataLayer:u}=this.Zt.win(),c=(null==(i=t.additionalParameters)?void 0:i.subscriptionFlow)||(null==(s=null==(n=t.additionalParameters)?void 0:n.getSubscriptionFlow)?void 0:s.call(n))||"";let d=function(t,e){if(!t)return;let i;return e===Le.SUBSCRIBE?i=Ve[t]:e===Le.CONTRIBUTE&&(i=Ye[t]),i||We[t]}(t.eventType,c);if(!d)return;const p=(null==e?void 0:e.googleAnalyticsParameters)||{};if(d={...d,eventCategory:p.event_category||d.eventCategory,eventLabel:p.event_label||d.eventLabel},r&&h("send","event",d),o){const t={event_category:d.eventCategory,event_label:d.eventLabel,non_interaction:d.nonInteraction,...p};l("event",d.eventAction,t)}a&&u.push({event:d.eventAction,event_category:d.eventCategory,event_label:d.eventLabel,non_interaction:d.nonInteraction,configurationId:t.configurationId||"",...p})}static isGaEligible(t){return $e(t.win().ga)}static isGtagEligible(t){return $e(t.win().gtag)}static isGtmEligible(t){var e;return $e(null==(e=t.win().dataLayer)?void 0:e.push)}}const Xe={TYPE_REGISTRATION_WALL:"/regwalliframe",TYPE_NEWSLETTER_SIGNUP:"/newsletteriframe",TYPE_REWARDED_SURVEY:"/surveyiframe",TYPE_BYO_CTA:"/byoctaiframe"},Ze={[k.SUBSCRIPTION]:De.SUBSCRIPTION,[k.SUBSCRIPTION_LARGE]:De.SUBSCRIPTION,[k.CONTRIBUTION]:De.UI_CONTRIBUTION,[k.CONTRIBUTION_LARGE]:De.UI_CONTRIBUTION},ti=De.SUBSCRIPTION,ei=/<ph name="EMAIL".+?\/ph>/g;class ii{constructor(t,e){this.Zt=t,this.W=e,this.ni=e.autoPromptType?Ze[e.autoPromptType]:ti,this.si=t.dialogManager(),this.le=t.entitlementsManager(),this.ie=t.clientConfigManager(),this.Ke=t.storage();const i={origin:Qt(t.win().location.href).origin,configurationId:this.W.configurationId||"",isClosable:(!!e.isClosable).toString(),calledManually:e.calledManually.toString(),previewEnabled:(!!e.shouldRenderPreview).toString()};this.ie.shouldForceLangInIframes()&&(i.hl=this.ie.getLanguage()),this.ri=new Ae(t.win(),t.activities(),de(Xe[e.action],i),pe({supportsEventManager:!0,productType:this.ni,windowHeight:t.win().innerHeight}),!0),e.shouldRenderPreview&&"TYPE_BYO_CTA"!==e.action&&kt(this.ri.getElement(),{"pointer-events":"none"})}start(){this.ri.on(g,(t=>this.oi(t))),this.ri.on(v,(t=>this.ai(t))),this.ri.on(l,this.li.bind(this));const{onCancel:t}=this.W;return t&&this.ri.onCancel(t),this.si.openView(this.ri,!1,{shouldDisableBodyScrolling:!0,closeOnBackgroundClick:!!this.W.isClosable})}oi(t){var e;const{onResult:i,configurationId:n}=this.W;this.si.completeView(this.ri),this.le.clear();const s=t.getSwgUserToken();s&&this.Zt.storage().set(yt,s,!0),this.isOptIn(this.W.action)&&i&&i({configurationId:n,data:{email:t.getUserEmail(),displayName:t.getDisplayName(),givenName:t.getGivenName(),familyName:t.getFamilyName()}}),this.W.suppressToast||(t.getActionCompleted()?this.ui(null!=(e=t.getUserEmail())?e:""):t.getAlreadyCompleted()?this.ci():this.di());const r=Date.now().toString();this.Zt.storage().set(St,r,!1),this.le.getEntitlements()}ui(t){const e=this.ie.getLanguage();let i="";switch(this.W.action){case"TYPE_REGISTRATION_WALL":i=be(ct,e).replace(ei,t);break;case"TYPE_NEWSLETTER_SIGNUP":i=be(dt,e).replace(ei,t);break;default:return}new Ft(this.Zt,de("/toastiframe",{flavor:"custom",customText:i})).open()}isOptIn(t){return"TYPE_NEWSLETTER_SIGNUP"===t||"TYPE_REGISTRATION_WALL"===t}ci(){let t;switch(this.W.action){case"TYPE_REGISTRATION_WALL":t={flavor:"basic"};break;case"TYPE_NEWSLETTER_SIGNUP":const e=this.ie.getLanguage();t={flavor:"custom",customText:be(ht,e)};break;default:return}new Ft(this.Zt,de("/toastiframe",t)).open()}di(){const t=this.ie.getLanguage();let e="";switch(this.W.action){case"TYPE_REGISTRATION_WALL":e=be(lt,t);break;case"TYPE_NEWSLETTER_SIGNUP":e=be(ut,t);break;default:return}new Ft(this.Zt,de("/toastiframe",{flavor:"custom",customText:e})).open()}li(t){t.getSubscriberOrMember()&&this.Zt.callbacks().triggerLoginRequest({linkRequested:!1})}async ai(t){const e=await this.attemptSurveyDataTransfer(t);e?this.Zt.eventManager().logSwgEvent(s.EVENT_SURVEY_DATA_TRANSFER_COMPLETE,!0):this.Zt.eventManager().logSwgEvent(s.EVENT_SURVEY_DATA_TRANSFER_FAILED,!1);const i=new A;t.getStorePpsInLocalStorage()&&await this.storePpsValuesFromSurveyAnswers(t),i.setSuccess(e),this.ri.execute(i)}async attemptSurveyDataTransfer(t){const{onResult:e}=this.W;if(e)try{return await e({configurationId:this.W.configurationId,data:t})}catch(i){return Kt("[swg.js] Exception in publisher provided logging callback: ".concat(i)),!1}return this.logSurveyDataToGoogleAnalytics(t)}async storePpsValuesFromSurveyAnswers(t){var e,i;const n=At.PPS_TAXONOMIES,s=t.getSurveyQuestionsList().flatMap((t=>t.getSurveyAnswersList())).map((t=>null==t?void 0:t.getPpsValue())).filter((t=>null!==t)),r=await this.Ke.get(n,!0);let o=[];try{const t=null==(i=null==(e=JSON.parse(r))?void 0:e[1])?void 0:i.values;o=Array.isArray(t)?t:[]}catch(h){}const a={[1]:{values:Array.from(new Set(s.concat(o)))}};await Promise.resolve(this.Ke.set(n,JSON.stringify(a),!0))}logSurveyDataToGoogleAnalytics(t){var e;return!!(Qe.isGaEligible(this.Zt)||Qe.isGtagEligible(this.Zt)||Qe.isGtmEligible(this.Zt))&&(null==(e=t.getSurveyQuestionsList())||e.map((t=>{const e=t.getSurveyAnswersList()[0],i={eventType:s.ACTION_SURVEY_DATA_TRANSFER,eventOriginator:a.SWG_CLIENT,isFromUserAction:!0,additionalParameters:null},n={googleAnalyticsParameters:{survey_question:t.getQuestionText()||"",survey_question_category:t.getQuestionCategory()||"",survey_answer:e.getAnswerText()||"",survey_answer_category:e.getAnswerCategory()||"",content_id:t.getQuestionCategory()||"",content_group:t.getQuestionText()||"",content_type:e.getAnswerText()||"",event_category:t.getQuestionCategory()||"",event_label:e.getAnswerText()||""}};this.Zt.eventManager().logEvent(i,n)})),!0)}showNoEntitlementFoundToast(){this.ri.execute(new E)}}var ni=(t=>(t.UNSPECIFIED="UNSPECIFIED",t.DISMISSIBLE="DISMISSIBLE",t.BLOCKING="BLOCKING",t))(ni||{}),si=(t=>(t.UNSPECIFIED="UNSPECIFIED",t.FINITE="FINITE",t.INFINITE="INFINITE",t))(si||{});class ri{constructor(t){this.qt=t.doc(),this.ie=t.clientConfigManager(),qt(this.ie,"MiniPromptApi requires an instance of ClientConfigManager."),this.he=t.eventManager()}init(){const t=this.qt.getHead();if(!t)return void Kt("Unable to retrieve the head node of the current document, which is needed by MiniPromptApi.");const e="".concat(n,"/swg-mini-prompt.css");t.querySelector('link[href="'.concat(e,'"]'))||t.appendChild(Rt(this.qt.getWin().document,"link",{rel:"stylesheet",type:"text/css",href:e}))}create(t){if(t.autoPromptType!==k.CONTRIBUTION&&t.autoPromptType!==k.SUBSCRIPTION)return;const e=this.ie.getTheme(),i=this.ie.getLanguage();let n="";t.autoPromptType===k.CONTRIBUTION?n=be(at,i):t.autoPromptType===k.SUBSCRIPTION&&(n=be(ot,i));const s=Rt(this.qt.getWin().document,"div",{role:"dialog",lang:i});s.classList.add("swg-mini-prompt-".concat(e));const r=Rt(this.qt.getWin().document,"div",{role:"button"});r.classList.add("swg-mini-prompt-title-container"),r.innerHTML='\n<div class="swg-mini-prompt-icon-$theme$"></div>\n<h1 class="swg-mini-prompt-title-text-$theme$">$textContent$</h1>\n'.replace(/\$theme\$/g,e).replace("$textContent$",n);const o=Rt(this.qt.getWin().document,"div",{});o.classList.add("swg-mini-prompt-close-button-container"),o.innerHTML='\n<div class="swg-mini-prompt-close-icon-$theme$"></div>\n'.replace("$theme$",e),s.appendChild(r),s.appendChild(o),this.qt.getWin().document.body.appendChild(s),r.addEventListener("click",(()=>{this.pi(t.autoPromptType),"function"==typeof t.clickCallback&&t.clickCallback(),Dt(s,"visibility","hidden")})),o.addEventListener("click",(()=>{Dt(s,"visibility","hidden"),this.gi(t.autoPromptType)})),this.mi(t.autoPromptType)}mi(t){let e;t===k.CONTRIBUTION?e=s.IMPRESSION_SWG_CONTRIBUTION_MINI_PROMPT:t===k.SUBSCRIPTION&&(e=s.IMPRESSION_SWG_SUBSCRIPTION_MINI_PROMPT),e&&this.he.logSwgEvent(e,!1)}pi(t){let e;t===k.CONTRIBUTION?e=s.ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLICK:t===k.SUBSCRIPTION&&(e=s.ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLICK),e&&this.he.logSwgEvent(e,!0)}gi(t){let e;t===k.CONTRIBUTION?e=s.ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLOSE:t===k.SUBSCRIPTION&&(e=s.ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLOSE),e&&this.he.logSwgEvent(e,!0)}}let oi="enable-pub-id-suffix-for-storage-key",ai=null;function hi(t){if(!ai){ai={};let i=oi;try{const e=Xt(t.location.hash)["swg.experiments"];e&&(i+=","+e)}catch(e){Wt.throwAsync(e)}for(let n of i.split(","))if(n=n.trim(),n)try{li(t,ai,n)}catch(e){Wt.throwAsync(e)}}return ai}function li(t,e,i){let n,s,r=!1;const o=i.indexOf(":");if(-1==o?(n=i,s=100,r=!1):(n=i.substring(0,o).trim(),"c"==(i=i.substring(o+1)).substring(i.length-1)&&(r=!0,i=i.substring(0,i.length-1)),s=parseInt(i,10)),isNaN(s))throw new Error("invalid fraction");let a;if(s>99)a=!0;else if(s<1)a=!1;else if(t.sessionStorage){r=r&&s<=20;try{const e="subscribe.google.com:e:"+n+":"+s+(r?"c":"");let i="e"==(h=t.sessionStorage.getItem(e))?"e":"c"==h?"c":null;!i&&100*Math.random()<=s*(r?2:1)&&(i=!r||Math.random()<=.5?"e":"c",t.sessionStorage.setItem(e,i)),a=!!i,"c"==i&&(n="c-"+n)}catch(l){a=!1,Wt.throwAsync(l)}}else a=!1;var h;e[n]=a}function ui(t,e){return hi(t)[e]||!1}function ci(t){const e=hi(t),i=[];for(const n in e)e[n]&&i.push(n);return i}const di="subscribe.google.com";class pi{constructor(t,e){this.Xt=t,this._i=e,this.fi={}}async get(t,e=!1){const i=this.Ei(t),n=this.wi(t),s=await this.bi(n,e);return null!==s?s:this.bi(i,e)}bi(t,e){return this.fi[t]||(this.fi[t]=new Promise((i=>{const n=e?this.Xt.localStorage:this.Xt.sessionStorage;if(n)try{i(n.getItem(t))}catch(s){i(null)}else i(null)}))),this.fi[t]}async set(t,e,i=!1){const n=this.Ei(t),s=this.wi(t);return null!==await this.bi(s,i)||ui(this.Xt,Se.ENABLE_PUBLICATION_ID_SUFFIX_FOR_STORAGE_KEY)?(await this.Ti(n,i),this.Ii(s,e,i)):this.Ii(n,e,i)}Ii(t,e,i){return this.fi[t]=Promise.resolve(e),new Promise((n=>{const s=i?this.Xt.localStorage:this.Xt.sessionStorage;if(s)try{s.setItem(t,e)}catch(r){}n()}))}async remove(t,e=!1){const i=this.Ei(t),n=this.wi(t);return null!==await this.bi(n,e)||ui(this.Xt,Se.ENABLE_PUBLICATION_ID_SUFFIX_FOR_STORAGE_KEY)?this.Ti(n,e):this.Ti(i,e)}Ti(t,e){return delete this.fi[t],new Promise((i=>{const n=e?this.Xt.localStorage:this.Xt.sessionStorage;if(n)try{n.removeItem(t)}catch(s){}i()}))}Ei(t){return di+":"+t}wi(t){if(Object.values(At).includes(t))return this.Ei(t);const e=this._i.getPublicationId();return di+":"+t+":"+e}}function gi(t,e=6048e5){const i=Date.now();let n=t.length;for(let s=0;s<t.length;s++)if(i-t[s]<=e){n=s;break}return t.slice(n)}const mi="TYPE_CONTRIBUTION",fi="TYPE_SUBSCRIPTION",Ei="TYPE_NEWSLETTER_SIGNUP",wi="TYPE_REGISTRATION_WALL",bi="TYPE_REWARDED_SURVEY",Ti="TYPE_REWARDED_AD",Ii="TYPE_BYO_CTA",yi=12096e5,Si=[s.IMPRESSION_SWG_CONTRIBUTION_MINI_PROMPT,s.IMPRESSION_SWG_SUBSCRIPTION_MINI_PROMPT,s.IMPRESSION_OFFERS,s.IMPRESSION_CONTRIBUTION_OFFERS],Oi=new Map([[s.ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLOSE,mi],[s.ACTION_CONTRIBUTION_OFFERS_CLOSED,mi],[s.ACTION_NEWSLETTER_OPT_IN_CLOSE,Ei],[s.ACTION_BYOP_NEWSLETTER_OPT_IN_CLOSE,Ei],[s.ACTION_REGWALL_OPT_IN_CLOSE,wi],[s.ACTION_SURVEY_CLOSED,bi],[s.ACTION_REWARDED_AD_CLOSE,Ti],[s.ACTION_BYO_CTA_CLOSE,Ii],[s.ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLOSE,fi],[s.ACTION_SUBSCRIPTION_OFFERS_CLOSED,fi]]),Ci=new Map([[s.EVENT_CONTRIBUTION_PAYMENT_COMPLETE,mi],[s.ACTION_NEWSLETTER_OPT_IN_BUTTON_CLICK,Ei],[s.ACTION_BYOP_NEWSLETTER_OPT_IN_SUBMIT,Ei],[s.ACTION_REGWALL_OPT_IN_BUTTON_CLICK,wi],[s.ACTION_SURVEY_SUBMIT_CLICK,bi],[s.ACTION_REWARDED_AD_VIEW,Ti],[s.ACTION_BYO_CTA_BUTTON_CLICK,Ii],[s.EVENT_SUBSCRIPTION_PAYMENT_COMPLETE,fi]]),Ni=new Map([[s.IMPRESSION_SWG_CONTRIBUTION_MINI_PROMPT,mi],[s.IMPRESSION_CONTRIBUTION_OFFERS,mi],[s.IMPRESSION_NEWSLETTER_OPT_IN,Ei],[s.IMPRESSION_BYOP_NEWSLETTER_OPT_IN,Ei],[s.IMPRESSION_REGWALL_OPT_IN,wi],[s.IMPRESSION_SURVEY,bi],[s.IMPRESSION_REWARDED_AD,Ti],[s.IMPRESSION_BYO_CTA,Ii],[s.IMPRESSION_SWG_SUBSCRIPTION_MINI_PROMPT,fi],[s.IMPRESSION_OFFERS,fi]]),vi=[s.EVENT_PAYMENT_FAILED],Ai=[s.ACTION_SWG_BUTTON_SHOW_OFFERS_CLICK,s.ACTION_SWG_BUTTON_SHOW_CONTRIBUTIONS_CLICK];class Ri{constructor(t,e){this.Zt=t,this.yi=e,this.Si=!1,this.Oi=!1,this.Ci=null,this.Ni=!1,this.vi=!1,this.qt=t.doc(),this._i=t.pageConfig(),this.le=t.entitlementsManager(),this.ie=t.clientConfigManager(),qt(this.ie,"AutoPromptManager requires an instance of ClientConfigManager."),this.Ke=t.storage(),t.eventManager().registerEventListener(this.qe.bind(this)),this.Ai=new ri(t),this.Ai.init(),this.he=t.eventManager()}async showAutoPrompt(t){if(t.autoPromptType===k.NONE)return;if(this.Ri=t.contentType,t.alwaysShow)return this.Pi=this.xi(t.autoPromptType),this.Li=this.Ri!=D.CLOSED,void this.Mi()();const[e,i,n]=await Promise.all([this.ie.getClientConfig(),this.le.getEntitlements(),this.le.getArticle()]);this.ki(n),this.Ni=!!(null==n?void 0:n.previewEnabled),this.Ni?this.Di(n,t):this.Ui(e,i,n,t)}ki(t){t&&(this.vi=this.Gi(t,Oe.ACTION_ORCHESTRATION_EXPERIMENT))}async Di(t,e){var i,n;const s=null==(i=t.audienceActions)?void 0:i.actions;if(!s||0===s.length)return;this.Pi=this.ji(null==(n=t.audienceActions)?void 0:n.actions,e.autoPromptType),this.Li=this.Ri!=D.CLOSED;const r=s[0];this.Fi(r)()}async Ui(t,e,i,n){var s,r,o,a,h,l,u,c;if(!i)return;if(!(null==(s=t.uiPredicates)?void 0:s.canDisplayAutoPrompt))return;if(e.enablesThis())return;let d;if(this.Pi=this.ji(null==(r=i.audienceActions)?void 0:r.actions,n.autoPromptType),this.vi&&i.actionOrchestration){const e=await this.zi(t,i);if(e){switch(null==e?void 0:e.closability){case ni.BLOCKING:this.Li=!1;break;case ni.DISMISSIBLE:this.Li=!0;break;default:this.Li=this.Ri!=D.CLOSED}d=null==(a=null==(o=i.audienceActions)?void 0:o.actions)?void 0:a.find((t=>t.configurationId===e.configId))}}else{this.Li=null!=(h=n.isClosable)?h:!this.Bi();const e=null==(l=t.autoPromptConfig)?void 0:l.frequencyCapConfig;d=await this.Wi({article:i,frequencyCapConfig:e})}const p=d?this.Fi(d):void 0;if(!p)return;this.Oi=!1;const g=this.Li?1e3*((null==(c=null==(u=null==t?void 0:t.autoPromptConfig)?void 0:u.clientDisplayTrigger)?void 0:c.displayDelaySeconds)||0):0;this.Zt.win().setTimeout(p,g)}Bi(){return this.Pi===k.SUBSCRIPTION||this.Pi===k.SUBSCRIPTION_LARGE}Vi(){return this.Pi===k.CONTRIBUTION||this.Pi===k.CONTRIBUTION_LARGE}Yi(t){return t===fi||t===mi}ji(t=[],e){const i=t.find((t=>t.type===mi||t.type===fi));if(!i)return;const n=i.type===mi?e===k.CONTRIBUTION?k.CONTRIBUTION:k.CONTRIBUTION_LARGE:e===k.SUBSCRIPTION?k.SUBSCRIPTION:k.SUBSCRIPTION_LARGE;return this.xi(n)}async Wi({article:t,frequencyCapConfig:e}){var i,n,r,o,a;let h=null==(i=t.audienceActions)?void 0:i.actions;if(!h||0===h.length)return;const l=await this.getTimestamps();if(h=h.filter((t=>this.Ki(t,l))),0===h.length)return;if(!this.Li)return h[0];if(!this.qi(e))return this.he.logSwgEvent(s.EVENT_FREQUENCY_CAP_CONFIG_NOT_FOUND_ERROR),h[0];let u;for(const d of h){let t=null==(r=null==(n=null==e?void 0:e.promptFrequencyCaps)?void 0:n.find((t=>t.audienceActionType===d.type)))?void 0:r.frequencyCapDuration;if(t||(this.he.logSwgEvent(s.EVENT_PROMPT_FREQUENCY_CONFIG_NOT_FOUND),t=null==(o=null==e?void 0:e.anyPromptFrequencyCap)?void 0:o.frequencyCapDuration),this.Hi(t)){const e=l[d.type],i=[...(null==e?void 0:e.dismissals)||[],...(null==e?void 0:e.completions)||[]];if(this.$i(t,i)){this.he.logSwgEvent(s.EVENT_PROMPT_FREQUENCY_CAP_MET);continue}}u=d;break}if(!u)return;const c=null==(a=null==e?void 0:e.globalFrequencyCap)?void 0:a.frequencyCapDuration;if(this.Hi(c)){const t=Array.prototype.concat.apply([],Object.entries(l).filter((([t,e])=>t!==u.type)).map((([t,e])=>e.impressions)));if(this.$i(c,t))return void this.he.logSwgEvent(s.EVENT_GLOBAL_FREQUENCY_CAP_MET)}return u}async zi(t,e){var i,n,r,o,a,h,l;const u=null==(i=e.audienceActions)?void 0:i.actions;let c=null==(r=null==(n=e.actionOrchestration)?void 0:n.interventionFunnel)?void 0:r.interventions;if(!(null==u?void 0:u.length)||!(null==c?void 0:c.length))return;const d=await this.getTimestamps(),p=new Set(u.filter((t=>this.Ki(t,d))).map((t=>t.configurationId)));if(0===p.size)return;const g=new Map(e.audienceActions.actions.filter((t=>!!t.numberOfCompletions)).map((t=>[t.configurationId,t.numberOfCompletions])));if(c=c.filter((t=>this.Ji(t,p,g))),0===c.length)return;if(this.Ri===D.CLOSED)return c[0];let m;if(!this.qi(null==(o=t.autoPromptConfig)?void 0:o.frequencyCapConfig))return this.he.logSwgEvent(s.EVENT_FREQUENCY_CAP_CONFIG_NOT_FOUND_ERROR),c[0];for(const f of c){const e=this.Qi(null==(a=t.autoPromptConfig)?void 0:a.frequencyCapConfig,f);if(this.Hi(e)){const t=this.Xi(d,f);if(this.$i(e,t)){this.he.logSwgEvent(s.EVENT_PROMPT_FREQUENCY_CAP_MET);continue}}m=f;break}if(!m)return;const _=this.Zi(null==(h=t.autoPromptConfig)?void 0:h.frequencyCapConfig,null==(l=e.actionOrchestration)?void 0:l.interventionFunnel);if(this.Hi(_)){const t=Array.prototype.concat.apply([],Object.entries(d).map((([t,e])=>t===m.type?e.completions:e.impressions)));if(this.$i(_,t))return void this.he.logSwgEvent(s.EVENT_GLOBAL_FREQUENCY_CAP_MET)}return m}nn(t=!0){const e={isClosable:!!this.Li,shouldAnimateFade:t};return this.Bi()?()=>{this.yi.showOffers(e)}:this.Vi()?()=>{this.yi.showContributionOptions(e)}:void 0}sn({actionType:t,configurationId:e,preference:i}){return()=>{const n=t===Ti?new Te(this.Zt,{action:t,configurationId:e,autoPromptType:this.Pi,isClosable:this.Li,monetizationFunction:this.nn(!1),calledManually:!1,shouldRenderPreview:!!this.Ni}):t===Ei&&"PREFERENCE_PUBLISHER_PROVIDED_PROMPT"===i?new Te(this.Zt,{action:t,configurationId:e,autoPromptType:this.Pi,isClosable:this.Li,calledManually:!1,shouldRenderPreview:!!this.Ni}):new ii(this.Zt,{action:t,configurationId:e,autoPromptType:this.Pi,isClosable:this.Li,calledManually:!1,shouldRenderPreview:!!this.Ni});this.setLastAudienceActionFlow(n),n.start()}}setLastAudienceActionFlow(t){this.Ci=t}getLastAudienceActionFlow(){return this.Ci}Mi(){const t=this.nn();return()=>{this.Pi===k.SUBSCRIPTION||this.Pi===k.CONTRIBUTION?this.Ai.create({autoPromptType:this.Pi,clickCallback:t}):this.Pi!==k.SUBSCRIPTION_LARGE&&this.Pi!==k.CONTRIBUTION_LARGE||!t||t()}}xi(t){if(this.rn()>480){if(t===k.SUBSCRIPTION)return this.an(t),k.SUBSCRIPTION_LARGE;if(t===k.CONTRIBUTION)return this.an(t),k.CONTRIBUTION_LARGE}return t}an(t){this.he.logEvent({eventType:s.EVENT_DISABLE_MINIPROMPT_DESKTOP,eventOriginator:a.SWG_CLIENT,isFromUserAction:!1,additionalParameters:{publicationid:this._i.getPublicationId(),promptType:t}})}async qe(t){t.eventType&&(Ai.find((e=>e===t.eventType))&&(this.Oi=!0),await this.hn(t.eventType))}async hn(t){if(this.vi){if(this.Ri===D.CLOSED)return}else if(!this.Li)return;if(Ni.has(t)||Oi.has(t)||Ci.has(t)||vi.find((e=>e===t))){if(!this.Oi&&Si.includes(t)){if(this.Si)return;this.Si=!0}this.storeEvent(t)}}async getTimestamps(){const t=await this.Ke.get("tsp",!0);if(!t)return{};const e=JSON.parse(t);return this.ln(e)?Object.entries(e).reduce(((t,[e,i])=>({...t,[e]:{impressions:gi(i.impressions,yi),dismissals:gi(i.dismissals,yi),completions:gi(i.completions,yi)}})),{}):(this.he.logSwgEvent(s.EVENT_LOCAL_STORAGE_TIMESTAMPS_PARSING_ERROR),{})}Xi(t,e){const i=t[e.type];return e.closability===ni.BLOCKING?(null==i?void 0:i.completions)||[]:[...(null==i?void 0:i.dismissals)||[],...(null==i?void 0:i.completions)||[]]}ln(t){return t instanceof Object&&!(t instanceof Array)&&Object.values(Object.values(t).map((t=>3===Object.keys(t).length&&t.impressions.every((t=>!isNaN(t)))&&t.dismissals.every((t=>!isNaN(t)))&&t.completions.every((t=>!isNaN(t)))))).every(Boolean)}async setTimestamps(t){const e=JSON.stringify(t);this.Ke.set("tsp",e,!0)}async storeImpression(t){const e=await this.getTimestamps(),i=e[t]||{impressions:[],dismissals:[],completions:[]};i.impressions.push(Date.now()),e[t]=i,this.setTimestamps(e)}async storeDismissal(t){const e=await this.getTimestamps(),i=e[t]||{impressions:[],dismissals:[],completions:[]};i.dismissals.push(Date.now()),e[t]=i,this.setTimestamps(e)}async storeCompletion(t){const e=await this.getTimestamps(),i=e[t]||{impressions:[],dismissals:[],completions:[]};i.completions.push(Date.now()),e[t]=i,this.setTimestamps(e)}async storeEvent(t){let e;Ni.has(t)?this.Oi||(e=Ni.get(t),this.storeImpression(e)):Oi.has(t)?(e=Oi.get(t),this.storeDismissal(e)):Ci.has(t)?(e=Ci.get(t),this.storeCompletion(e)):vi.includes(t)&&(this.Vi()&&this.storeCompletion(mi),this.Bi()&&this.storeCompletion(fi))}rn(){return this.qt.getWin().innerWidth}Ki(t,e){var i;return t.type!==bi||!!(Qe.isGaEligible(this.Zt)||Qe.isGtagEligible(this.Zt)||Qe.isGtmEligible(this.Zt))&&!((null==(i=e[bi])?void 0:i.completions)||[]).length}Ji(t,e,i){var n,r,o;if(!e.has(t.configId))return!1;if((null==(n=t.repeatability)?void 0:n.type)!==si.INFINITE){const e=si.FINITE===(null==(r=t.repeatability)?void 0:r.type)&&t.repeatability.count||1;let n;if(i.has(t.configId)?n=i.get(t.configId):(si.FINITE===(null==(o=t.repeatability)?void 0:o.type)&&this.he.logSwgEvent(s.EVENT_COMPLETION_COUNT_FOR_REPEATABLE_ACTION_MISSING_ERROR),n=0),n>=e)return!1}return!0}$i(t,e){if(0===e.length)return!1;const i=Math.max(...e),n=1e3*(t.seconds||0)+this.un(t.nanos||0);return Date.now()-i<n}un(t){return Math.floor(t/Math.pow(10,6))}Qi(t,e){var i,n;return(null==(i=e.promptFrequencyCap)?void 0:i.duration)||(this.he.logSwgEvent(s.EVENT_PROMPT_FREQUENCY_CONFIG_NOT_FOUND),null==(n=t.anyPromptFrequencyCap)?void 0:n.frequencyCapDuration)}Zi(t,e){var i;return(null==(i=e.globalFrequencyCap)?void 0:i.duration)||t.globalFrequencyCap.frequencyCapDuration}qi(t){var e,i,n;return this.Hi(null==(e=null==t?void 0:t.globalFrequencyCap)?void 0:e.frequencyCapDuration)||(null==(i=null==t?void 0:t.promptFrequencyCaps)?void 0:i.map((t=>t.frequencyCapDuration)).some(this.Hi))||this.Hi(null==(n=null==t?void 0:t.anyPromptFrequencyCap)?void 0:n.frequencyCapDuration)}Hi(t){return!!(null==t?void 0:t.seconds)||!!(null==t?void 0:t.nanos)}Fi(t){return this.Yi(t.type)?this.Mi():this.sn({actionType:t.type,configurationId:t.configurationId,preference:t.preference})}Gi(t,e){return this.le.parseArticleExperimentConfigFlags(t).includes(e)}}const Pi={frameborder:"0",scrolling:"no"};var xi=(t=>(t.LIGHT="light",t.DARK="dark",t))(xi||{});class Li{constructor(t,e,i,n){this.Zt=t,this.cn=e,this.dn=i,this.gn=n,this.Vt=de("/smartboxiframe"),this.Ht=t.activities(),this.$t=Rt(t.win().document,"iframe",Pi);const s={publicationId:this.Zt.pageConfig().getPublicationId(),theme:this.dn&&this.dn.theme||"light",lang:this.dn&&this.dn.lang||"en"},r=this.dn&&this.dn.messageTextColor;r&&(s.messageTextColor=r),this.Yt=pe(s)}mn(t){var e;t&&t.getIsClicked()&&(null==(e=this.gn)||e.call(this))}start(){kt(this.$t,{opacity:"1",position:"absolute",top:"0",bottom:"0",left:"0",height:"100%",right:"0",width:"100%"}),this.cn.appendChild(this.$t);const t=this.Ht.addDefaultArguments(this.Yt);return this.Ht.openIframe(this.$t,this.Vt,t).then((t=>{t.on(S,this.mn.bind(this))})),this.$t}}var Mi=(t=>(t.SUBSCRIPTION="subscription",t.CONTRIBUTION="contribution",t))(Mi||{});const ki='<div class="swg-button-v2-icon-$theme$"></div>$textContent$';class Di{constructor(t,e){this.qt=t,this._n=e}init(){const t=this.qt.getHead();if(!t)return;const e="".concat(n,"/swg-button.css");t.querySelector('link[href="'.concat(e,'"]'))||t.appendChild(Rt(this.qt.getWin().document,"link",{rel:"stylesheet",type:"text/css",href:e}))}create(t,e){const i=Rt(this.qt.getWin().document,"button",{});return this.attach(i,t,e)}attach(t,e,i){const n=this.fn(t,s.ACTION_SWG_BUTTON_CLICK,e,i).options,r=n.theme;return t.classList.add("swg-button-".concat(r)),t.setAttribute("role","button"),n.lang&&t.setAttribute("lang",n.lang),t.setAttribute("title",be(ot,t)),this.En(s.IMPRESSION_SWG_BUTTON),t}attachSubscribeButton(t,e,i){const n=this.fn(t,s.ACTION_SWG_BUTTON_SHOW_OFFERS_CLICK,e,i).options,r=n.theme;return t.classList.add("swg-button-v2-".concat(r)),t.setAttribute("role","button"),n.lang&&t.setAttribute("lang",n.lang),n.enable||t.setAttribute("disabled","disabled"),t.innerHTML=ki.replace("$theme$",r).replace("$textContent$",be(ot,t)),this.En(s.IMPRESSION_SHOW_OFFERS_SWG_BUTTON),t}attachContributeButton(t,e,i){const n=this.fn(t,s.ACTION_SWG_BUTTON_SHOW_CONTRIBUTIONS_CLICK,e,i).options,r=n.theme;return t.classList.add("swg-button-v2-".concat(r)),t.setAttribute("role","button"),n.lang&&t.setAttribute("lang",n.lang),n.enable||t.setAttribute("disabled","disabled"),t.innerHTML=ki.replace("$theme$",r).replace("$textContent$",be(at,t)),this.En(s.IMPRESSION_SHOW_CONTRIBUTIONS_SWG_BUTTON),t}attachButtonsWithAttribute(t,e,i,n){for(const s of e){const e=Array.from(this.qt.getRootNode().querySelectorAll("[".concat(t,'="').concat(s,'"]')));for(const t of e)"subscription"===s?this.attachSubscribeButton(t,i,n[s]):"contribution"===s&&this.attachContributeButton(t,i,n[s])}}async En(t,e){(await this._n).eventManager().logSwgEvent(t,e)}wn(t){const e=t&&"function"!=typeof t?t:{theme:xi.LIGHT},i=e.theme;return i!==xi.LIGHT&&i!==xi.DARK&&(e.theme=xi.LIGHT),e}bn(t,e){return("function"==typeof t?t:null)||e}fn(t,e,i,n){const s=this.wn(i),r=this.bn(i,n),o=t=>{this.En(e,!0),"function"==typeof r&&r(t)};return t.addEventListener("click",o),{options:s,clickFun:o}}attachSmartButton(t,e,i,n){const r=this.fn(e,s.ACTION_SWG_BUTTON_CLICK,i,n);return e.classList.add("swg-smart-button"),new Li(t,e,r.options,r.clickFun).start()}}function Ui(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++){const n=t.charCodeAt(i);qt(n<=255,"Characters must be in range [0,255]"),e[i]=n}return e}function Gi(t){const e=new Array(t.length);for(let i=0;i<t.length;i++)e[i]=String.fromCharCode(t[i]);return e.join("")}function ji(t){if("undefined"!=typeof TextDecoder)return new TextDecoder("utf-8").decode(t);const e=Gi(new Uint8Array(t));return decodeURIComponent(escape(e))}function Fi(t){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(t):Ui(unescape(encodeURIComponent(t)))}function zi(t){return Ui(atob(t.replaceAll("-","+").replaceAll("_","/")))}function Bi(t){const e=Gi(t);return btoa(e).replaceAll("+","-").replaceAll("/","_").replaceAll("=","")}function Wi(t,e){try{return JSON.parse(t)}catch(i){return void(e&&e(i))}}function Vi(t,e){const i=Wi(t);return null==i?void 0:i[e]}class Yi{constructor(){}decode(t){return this.Tn(t).payload}Tn(t){function e(){throw new Error('Invalid token: "'.concat(t,'"'))}const i=t.split(".");3!=i.length&&e();const n=zi(i[0]),s=zi(i[1]);return{header:Wi(ji(n),e),payload:Wi(ji(s),e),verifiable:"".concat(i[0],".").concat(i[1]),sig:i[2]}}}class Ki{constructor(t,e,i,n,s,r,o=null,a=null,h=null,l=null){this.raw=t,this.purchaseData=e,this.userData=i,this.entitlements=n,this.productType=s,this.In=r,this.oldSku=o,this.swgUserToken=a,this.paymentRecurrence=h,this.requestMetadata=l}clone(){return new Ki(this.raw,this.purchaseData,this.userData,this.entitlements,this.productType,this.In,this.oldSku,this.swgUserToken)}json(){return{purchaseData:this.purchaseData.json(),userData:this.userData?this.userData.json():null,entitlements:this.entitlements?this.entitlements.json():null,oldSku:this.oldSku,productType:this.productType,swgUserToken:this.swgUserToken}}complete(){return this.In()}}class qi{constructor(t,e){this.raw=t,this.signature=e,this.data=t}clone(){return new qi(this.raw,this.signature)}json(){return{data:this.raw,signature:this.signature}}}class Hi{constructor(t,e){this.idToken=t,this.data=e,this.id=e.sub,this.email=e.email,this.emailVerified=e.email_verified,this.name=e.name,this.givenName=e.given_name,this.familyName=e.family_name,this.pictureUrl=e.picture}clone(){return new Hi(this.idToken,this.data)}json(){return{id:this.id,email:this.email,emailVerified:this.emailVerified,name:this.name,givenName:this.givenName,familyName:this.familyName,pictureUrl:this.pictureUrl}}}const $i={IMMEDIATE_WITH_TIME_PRORATION:1};function Ji(t,e=null){return new w([,,,,t,,,e])}class Qi{constructor(t,e,i=De.SUBSCRIPTION){this.Zt=t,this.yn=e,this.ni=i,this.Sn=t.payClient(),this._i=t.pageConfig(),this.On=t.analytics(),this.he=t.eventManager(),this.ie=t.clientConfigManager()}async start(){const t=await this.ie.getClientConfig();this.Cn(t.paySwgVersion)}Cn(t){const e={skuId:this.yn.skuId,publicationId:this._i.getPublicationId()};if(t&&(e.swgVersion=t),this.yn.oldSku){e.oldSku=this.yn.oldSku;const t=this.yn.replaceSkuProrationMode;e.replaceSkuProrationMode=t?$i[t]:$i.IMMEDIATE_WITH_TIME_PRORATION,this.On.setSku(e.oldSku)}this.yn.oneTime&&(e.paymentRecurrence=2),this.yn.metadata&&(e.metadata=this.yn.metadata);const i=this.ni==De.UI_CONTRIBUTION?Le.CONTRIBUTE:Le.SUBSCRIBE;this.Zt.callbacks().triggerFlowStarted(i,this.yn),this.he.logSwgEvent(s.ACTION_PAYMENT_FLOW_STARTED,!0,Ji(e.skuId)),Zi.waitingForPayClient=!0,this.Sn.start({apiVersion:1,allowedPaymentMethods:["CARD"],environment:he().payEnv,playEnvironment:he().playEnv,swg:e,i:{startTimeMs:Date.now(),productType:this.ni}},{forceRedirect:this.Zt.config().windowOpenMode==ke.REDIRECT,forceDisableNative:"2"==t})}}const Xi=class t{constructor(t){this.Zt=t,this.ri=null,this.Nn=null,this.T=null,this.Xt=t.win(),this.Ht=t.activities(),this.si=t.dialogManager(),this.he=t.eventManager(),this.ie=t.clientConfigManager()}static configurePending(e){const i=e.eventManager();e.payClient().onResponse((async n=>{e.entitlementsManager().blockNextNotification();const r=new t(e),o=async function(t,e,i){const n=!Zi.waitingForPayClient;Zi.waitingForPayClient=!1;const r=await e;let o,a=s.UNKNOWN;if("object"==typeof r&&r.googleTransactionId){const e=t.analytics().getTransactionId(),i=r.googleTransactionId;n?(t.analytics().setTransactionId(i),a=s.EVENT_GPAY_CANNOT_CONFIRM_TX_ID):e===i?a=s.EVENT_CONFIRM_TX_ID:(o=new w,o.setGpayTransactionId(i),a=s.EVENT_CHANGED_TX_ID)}else o=new w,o.setHadLogged(!n),a=s.EVENT_GPAY_NO_TX_ID;return t.eventManager().logSwgEvent(a,!0,o),function(t,e,i){var n;let s=null,r=null,o=De.SUBSCRIPTION,a=null,h=null,l=null;if(e)if("string"==typeof e)r=e;else{const t=e;if(t.swgCallbackData?s=t.swgCallbackData:t.integratorClientCallbackData&&(r=t.integratorClientCallbackData),e.paymentRequest){const t=e.paymentRequest.swg||{};a=t.oldSku,h=t.paymentRecurrence,l=t.metadata,o=(null==(n=e.paymentRequest.i)?void 0:n.productType)||De.SUBSCRIPTION}else e.productType&&(o=e.productType)}if(r&&!s&&(r=atob(r),r)&&(s=JSON.parse(r).swgCallbackData),!s)throw new Error("unexpected payment response");return r=JSON.stringify(s),new Ki(r,function(t){const e=t.purchaseData,i=t.purchaseDataSignature;return new qi(e,i)}(s),function(t){const e=t.idToken;if(!e)return null;const i=(new Yi).decode(e);return new Hi(e,i)}(s),function(t,e){return e.signedEntitlements?t.entitlementsManager().parseEntitlements(e):null}(t,s),o,i,a,s.swgUserToken,h,l)}(t,r,i)}(e,n,r.complete.bind(r));e.callbacks().triggerPaymentResponse(o);try{const t=await o,n=tn(t.purchaseData);e.analytics().setSku(n||""),i.logSwgEvent(s.ACTION_PAYMENT_COMPLETE,!0,Ji(n||"",t.productType==De.UI_CONTRIBUTION?Le.CONTRIBUTE:Le.SUBSCRIBE)),t.productType==De.UI_CONTRIBUTION?i.logSwgEvent(s.EVENT_CONTRIBUTION_PAYMENT_COMPLETE,!0,Ji(n||"",Le.CONTRIBUTE)):t.productType==De.SUBSCRIPTION&&i.logSwgEvent(s.EVENT_SUBSCRIPTION_PAYMENT_COMPLETE,!0,Ji(n||"",Le.SUBSCRIBE)),r.start(t)}catch(a){const t=a;if(!zt(t))throw e.eventManager().logSwgEvent(s.EVENT_PAYMENT_FAILED,!1),e.jserror().error("Pay failed",t),t;{const i=t.productType==De.UI_CONTRIBUTION?Le.CONTRIBUTE:Le.SUBSCRIBE;e.callbacks().triggerFlowCanceled(i),e.eventManager().logSwgEvent(s.ACTION_USER_CANCELED_PAYFLOW,!0)}}}))}async start(t){var e;this.T=tn(t.purchaseData),this.he.logSwgEvent(s.IMPRESSION_ACCOUNT_CHANGED,!0,Ji(this.T||"")),this.Zt.entitlementsManager().reset(!0);const i={publicationId:this.Zt.pageConfig().getPublicationId(),productType:t.productType,isSubscriptionUpdate:!!t.oldSku,isOneTime:!!t.paymentRecurrence};t.userData&&t.entitlements?(i.idToken=t.userData.idToken,this.Zt.entitlementsManager().pushNextEntitlements(t.entitlements.raw),t.swgUserToken&&this.Zt.storage().set(yt,t.swgUserToken,!0)):i.loginHint=null==(e=t.userData)?void 0:e.email;const n={};this.ie.shouldForceLangInIframes()&&(n.hl=this.ie.getLanguage());const r=de("/payconfirmiframe",n),o=await this.ie.getClientConfig();i.useUpdatedConfirmUi=o.useUpdatedOfferFlows,i.skipAccountCreationScreen=o.skipAccountCreationScreen,this.ri=new Ae(this.Xt,this.Ht,r,pe(i),!0),this.ri.on(E,this.vn.bind(this)),this.ri.acceptResult().then((()=>{this.si.completeView(this.ri)})),this.Nn=this.si.openView(this.ri),this.Nn.then((()=>{this.Zt.callbacks().triggerPayConfirmOpened(this.ri)}))}vn(t){const e=t.getJwt();e&&this.Zt.entitlementsManager().pushNextEntitlements(e)}async complete(){this.he.logSwgEvent(s.ACTION_ACCOUNT_CREATED,!0,Ji(this.T||""));const t=Date.now().toString();this.Zt.storage().set(St,t,!1),this.Zt.entitlementsManager().unblockNextNotification();const e=await this.ie.getClientConfig();if(await this.Nn,!e.skipAccountCreationScreen){const t=new h;t.setComplete(!0),this.ri.execute(t)}try{await this.ri.acceptResult()}catch(i){}e.skipAccountCreationScreen||this.he.logSwgEvent(s.ACTION_ACCOUNT_ACKNOWLEDGED,!0,Ji(this.T||"")),this.Zt.entitlementsManager().setToastShown(!0)}};Xi.waitingForPayClient=!1;let Zi=Xi;function tn(t){return Vi(t.raw,"productId")||null}class en{constructor(t,e){var i;this.Zt=t,this.ri=null,this.Xt=t.win(),this.Ht=t.activities(),this.si=t.dialogManager(),this.he=t.eventManager(),this.ie=t.clientConfigManager(),this.Qe=void 0===(null==e?void 0:e.shouldAnimateFade)||(null==e?void 0:e.shouldAnimateFade),this.Li=null!=(i=null==e?void 0:e.isClosable)&&i;const n=t.activities().addDefaultArguments({showNative:t.callbacks().hasSubscribeRequestCallback(),productType:De.SUBSCRIPTION,list:(null==e?void 0:e.list)||"default",skus:(null==e?void 0:e.skus)||null,isClosable:this.Li});if(null==e?void 0:e.oldSku){n.oldSku=e.oldSku,qt(n.skus,"Need a sku list if old sku is provided!");let t=n.skus;const i=n.oldSku;t=t.filter((t=>t!==i)),qt(t.length>0,"Sku list only contained offer user already has"),n.skus=t}if(n.skus&&1===n.skus.length){const t=n.skus[0],e=n.oldSku;if(e){const i=new y;return i.setSku(t),i.setOldSku(e),void this.An(i)}}this.Rn=n.skus||["*"],this.Pn=this.ie.getClientConfig(),this.xn=this.Ln(n)}async Ln(t){const e=await this.Pn;return new Ae(this.Xt,this.Ht,this.Mn(e,this.Zt.pageConfig()),t,!0,!1,this.Qe)}An(t){const e=t.getSku();if(e){const i={skuId:e},n=t.getOldSku();n&&(i.oldSku=n,this.Zt.analytics().setSku(n)),this.he.logSwgEvent(s.ACTION_OFFER_SELECTED,!0,function(t){return new w([,,,,t])}(e)),new Qi(this.Zt,i).start()}}li(t){t.getSubscriberOrMember()&&(this.he.logSwgEvent(s.ACTION_ALREADY_SUBSCRIBED,!0),this.Zt.callbacks().triggerLoginRequest({linkRequested:!!t.getLinkRequested()}))}kn(t){t.getNative()&&this.Zt.callbacks().triggerSubscribeRequest()}async start(){if(this.ri=await this.xn,!this.ri)return;this.Zt.callbacks().triggerFlowStarted(Le.SHOW_OFFERS,{skus:this.Rn,source:"SwG"}),this.ri.onCancel((()=>{this.Zt.callbacks().triggerFlowCanceled(Le.SHOW_OFFERS)})),this.ri.on(y,this.An.bind(this)),this.ri.on(l,this.li.bind(this)),this.ri.on(L,this.kn.bind(this));const t=await this.Pn;return this.si.openView(this.ri,!1,this.Dn(t,this.ie.shouldAllowScroll()))}Dn(t,e){return t.useUpdatedOfferFlows?{desktopConfig:{isCenterPositioned:!0,supportsWideScreen:!0},shouldDisableBodyScrolling:!e,closeOnBackgroundClick:this.Li}:{}}Mn(t,e){var i;if(!t.useUpdatedOfferFlows){const t=Xt(this.Xt.location.hash)["swg.newoffercard"];return de("/offersiframe",t?{useNewOfferCard:t}:{})}const n={publicationId:e.getPublicationId()};return this.ie.shouldForceLangInIframes()&&(n.hl=this.ie.getLanguage()),(null==(i=t.uiPredicates)?void 0:i.purchaseUnavailableRegion)&&(n.purchaseUnavailableRegion="true"),de("/subscriptionoffersiframe",n)}showNoEntitlementFoundToast(){this.ri&&this.ri.execute(new E)}}class nn{constructor(t,e){this.Zt=t,this.dn=e,this.Ht=t.activities(),this.si=t.dialogManager(),this.he=t.eventManager(),this.ri=new Ae(t.win(),this.Ht,de("/optionsiframe"),pe({publicationId:t.pageConfig().getPublicationId(),productId:t.pageConfig().getProductId(),list:(null==e?void 0:e.list)||"default",skus:(null==e?void 0:e.skus)||null,isClosable:!0}),!1)}start(){return this.Zt.callbacks().triggerFlowStarted(Le.SHOW_SUBSCRIBE_OPTION),this.ri.onCancel((()=>{this.Zt.callbacks().triggerFlowCanceled(Le.SHOW_SUBSCRIBE_OPTION)})),this.ri.on(O,this.Un.bind(this)),this.ri.acceptResult().then((t=>{const e=t.data,i=new O;e.subscribe&&i.setSubscribe(!0),this.Un(i)}),(t=>{throw this.si.completeView(this.ri),t})),this.he.logSwgEvent(s.IMPRESSION_CLICK_TO_SHOW_OFFERS),this.si.openView(this.ri)}Un(t){if(t.getSubscribe()){const t=this.dn||{};null==t.isClosable&&(t.isClosable=!0),this.he.logSwgEvent(s.ACTION_VIEW_OFFERS,!0),new en(this.Zt,t).start()}}}class sn{constructor(t,e={}){this.Zt=t,this.dn=e,this.Xt=t.win(),this.Ht=t.activities(),this.si=t.dialogManager(),this.he=t.eventManager(),this.ri=new Ae(this.Xt,this.Ht,de("/abbrvofferiframe"),pe({publicationId:t.pageConfig().getPublicationId(),productId:t.pageConfig().getProductId(),showNative:t.callbacks().hasSubscribeRequestCallback(),list:e.list||"default",skus:e.skus||null,isClosable:!0}),!1)}li(t){t.getSubscriberOrMember()&&(this.he.logSwgEvent(s.ACTION_ALREADY_SUBSCRIBED,!0),this.Zt.callbacks().triggerLoginRequest({linkRequested:!!t.getLinkRequested()}))}start(){return this.Zt.callbacks().triggerFlowStarted(Le.SHOW_ABBRV_OFFER),this.ri.onCancel((()=>{this.Zt.callbacks().triggerFlowCanceled(Le.SHOW_ABBRV_OFFER)})),this.ri.on(l,this.li.bind(this)),this.ri.acceptResult().then((t=>{const e=t.data;return e.viewOffers?(null==this.dn.isClosable&&(this.dn.isClosable=!0),this.he.logSwgEvent(s.ACTION_VIEW_OFFERS,!0),void new en(this.Zt,this.dn).start()):e.native?(this.Zt.callbacks().triggerSubscribeRequest(),void this.si.completeView(this.ri)):void 0})),this.he.logSwgEvent(s.IMPRESSION_CLICK_TO_SHOW_OFFERS_OR_ALREADY_SUBSCRIBED),this.si.openView(this.ri)}}function rn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function on(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var i=function t(){return this instanceof t?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var n=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(i,e,n.get?n:{enumerable:!0,get:function(){return t[e]}})})),i}
/**
   * @license
   * Copyright 2017 The Web Activities Authors. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */const an={IFRAME:"iframe",POPUP:"popup",REDIRECT:"redirect"},hn={OK:"ok",CANCELED:"canceled",FAILED:"failed"};class ln{constructor(t,e,i,n,s,r){this.code=t,this.data=t==hn.OK?e:null,this.mode=i,this.origin=n,this.originVerified=s,this.secureChannel=r,this.ok=t==hn.OK,this.error=t==hn.FAILED?new Error(String(e)||""):null}}const un="AbortError",cn=20;let dn;function pn(t){return function(t){if(t.origin)return t.origin;const e=t.protocol;let i=t.host;return"https:"==e&&i.indexOf(":443")==i.length-4?i=i.replace(":443",""):"http:"==e&&i.indexOf(":80")==i.length-3&&(i=i.replace(":80","")),e+"//"+i}(function(t){return dn||(dn=document.createElement("a")),dn.href=t,dn}(t))}function gn(t,e){const i="AbortError"+(e?": "+e:"");let n=null;if("function"==typeof t.DOMException){const e=t.DOMException;try{n=new e(i,un)}catch(s){}}return n||(n=new Error(i),n.name=un,n.code=cn),n}function mn(t,e,i){if(e.ok)i(e);else{const n=e.error||gn(t);n.activityResult=e,i(Promise.reject(n))}}function fn(t){const e=t.navigator;return/Trident|MSIE|IEMobile/i.test(e&&e.userAgent)}function En(t){const e=t.navigator;return/Edge/i.test(e&&e.userAgent)}const wn="__ACTIVITIES__";class bn{constructor(t,e,i,n){this.Xt=t,this.Gn=e,this.jn=i,this.Fn=n,this.zn=null,this.Bn=!1,this.Xe=null,this.Wn=null,this.Vn=null,this.Yn=null,this.Kn=this.qn.bind(this)}connect(t){if(this.Wn)throw new Error("already connected");this.Wn=t,this.Xt.addEventListener("message",this.Kn)}disconnect(){if(this.Wn&&(this.Wn=null,this.Xe&&(Tn(this.Xe),this.Xe=null),this.Xt.removeEventListener("message",this.Kn),this.Yn)){for(const t in this.Yn){const e=this.Yn[t];e.port1&&Tn(e.port1),e.port2&&Tn(e.port2)}this.Yn=null}}isConnected(){return null!=this.jn}getTarget(){const t=this.Hn();if(!t)throw new Error("not connected");return t}Hn(){return this.Wn&&!this.zn&&("function"==typeof this.Gn?this.zn=this.Gn():this.zn=this.Gn),this.zn}getTargetOrigin(){if(null==this.jn)throw new Error("not connected");return this.jn}sendConnectCommand(){const t=fn(this.Xt)||En(this.Xt);this.sendCommand("connect",{acceptsChannel:t})}sendStartCommand(t){let e=null;this.Bn&&"function"==typeof this.Xt.MessageChannel&&(e=new this.Xt.MessageChannel),e?(this.sendCommand("start",t,[e.port2]),this.$n(e.port1)):this.sendCommand("start",t)}sendCommand(t,e,i){const n={sentinel:wn,cmd:t,payload:e||null};if(this.Xe)this.Xe.postMessage(n,i||void 0);else{const e=this.getTarget(),s="connect"==t?null!=this.jn?this.jn:"*":this.getTargetOrigin();e.postMessage(n,s,i||void 0)}}customMessage(t){this.sendCommand("msg",t)}onCustomMessage(t){this.Vn=t}startChannel(t){const e=t||"",i=this.Jn(e);if(!i.port1){const t=new this.Xt.MessageChannel;i.port1=t.port1,i.port2=t.port2,i.resolver(i.port1)}return i.port2&&(this.sendCommand("cnset",{name:e},[i.port2]),i.port2=null),i.promise}askChannel(t){const e=t||"",i=this.Jn(e);return i.port1||this.sendCommand("cnget",{name:e}),i.promise}Qn(t,e){const i=this.Jn(t);i.port1=e,i.resolver(e)}Jn(t){this.Yn||(this.Yn={});let e=this.Yn[t];if(!e){let i;const n=new Promise((t=>{i=t}));e={port1:null,port2:null,resolver:i,promise:n},this.Yn[t]=e}return e}$n(t){this.Xe&&Tn(this.Xe),this.Xe=t,this.Xe.onmessage=t=>{const e=t.data,i=e&&e.cmd,n=e&&e.payload||null;i&&this.Xn(i,n,t)}}qn(t){if(this.Fn&&this.Hn()!=t.source)return;const e=t.data;if(!e||e.sentinel!=wn)return;const i=e.cmd;if(this.Xe&&"connect"!=i&&"start"!=i)return;const n=t.origin,s=e.payload||null;null==this.jn&&"start"==i&&(this.jn=n),null==this.jn&&t.source&&this.Hn()==t.source&&(this.jn=n),n==this.jn&&this.Xn(i,s,t)}Xn(t,e,i){if("connect"==t)this.Xe&&(Tn(this.Xe),this.Xe=null),this.Bn=e&&e.acceptsChannel||!1,this.Wn(t,e);else if("start"==t){const n=i.ports&&i.ports[0];n&&this.$n(n),this.Wn(t,e)}else if("msg"==t)null!=this.Vn&&null!=e&&this.Vn(e);else if("cnget"==t){const t=e.name;this.startChannel(t)}else if("cnset"==t){const t=e.name,n=i.ports[0];this.Qn(t,n)}else this.Wn(t,e)}}function Tn(t){try{t.close()}catch(e){}}let In=class{constructor(t,e,i){this.$t=t,this.C=e,this.Yt=i||null,this.Xt=this.$t.ownerDocument.defaultView,this.jn=pn(e),this.Zn=!1,this.ts=null,this.ns=new Promise((t=>{this.ts=t})),this.ss=null,this.Nn=new Promise((t=>{this.ss=t})),this.rs=null,this.os=new Promise((t=>{this.rs=t})),this.hs=null,this.ls=null,this.us=new bn(this.Xt,(()=>this.$t.contentWindow),this.jn,!0)}getMode(){return an.IFRAME}connect(){if(!function(t){if("isConnected"in t)return t.isConnected;const e=t.ownerDocument&&t.ownerDocument.documentElement;return e&&e.contains(t)||!1}(this.$t))throw new Error("iframe must be in DOM");return this.us.connect(this.Xn.bind(this)),this.$t.src=this.C,this.ns}disconnect(){this.Zn=!1,this.us.disconnect()}acceptResult(){return this.os}getTargetWin(){return this.$t.contentWindow||null}message(t){this.us.customMessage(t)}onMessage(t){this.us.onCustomMessage(t)}messageChannel(t){return this.us.askChannel(t)}whenReady(){return this.Nn}onResizeRequest(t){this.hs=t,Promise.resolve().then((()=>{null!=this.ls&&t(this.ls)}))}resized(){if(!this.Zn)return;const t=this.$t.offsetHeight;this.us.sendCommand("resized",{height:t})}Xn(t,e){if("connect"==t)this.Zn=!0,this.us.sendStartCommand(this.Yt),this.ts();else if("result"==t){if(this.rs){const t=e.code,i=t==hn.FAILED?new Error(e.data||""):e.data,n=new ln(t,i,an.IFRAME,this.us.getTargetOrigin(),!0,!0);mn(this.Xt,n,this.rs),this.rs=null,this.us.sendCommand("close"),this.disconnect()}}else"ready"==t?this.ss&&(this.ss(),this.ss=null):"resize"==t&&(this.ls=e.height,this.hs&&this.hs(this.ls))}};class yn{constructor(t,e,i,n,s,r){if(!n||"_blank"!=n&&"_top"!=n&&"_"==n[0])throw new Error('The only allowed targets are "_blank", "_top" and name targets');this.Xt=t,this.ds=e,this.C=i,this.ps=n,this.Yt=s||null,this.dn=r||{},this.ts=null,this.ns=new Promise((t=>{this.ts=t})),this.rs=null,this.os=new Promise((t=>{this.rs=t})),this.gs=null,this._s=null,this.us=null}getMode(){return"_top"==this.ps?an.REDIRECT:an.POPUP}open(){return this.fs()}whenConnected(){return this.ns}disconnect(){if(this._s&&(this.Xt.clearInterval(this._s),this._s=null),this.us&&(this.us.disconnect(),this.us=null),this.gs){try{this.gs.close()}catch(t){}this.gs=null}this.rs=null}getTargetWin(){return this.gs}acceptResult(){return this.os}message(t){this.us.customMessage(t)}onMessage(t){this.us.onCustomMessage(t)}messageChannel(t){return this.us.askChannel(t)}fs(){const t=this.Es();let e,i=this.C;if(!this.dn.skipRequestInUrl){const t=this.dn.returnUrl||function(t){const e=t.indexOf("#");return-1==e?t:t.substring(0,e)}(this.Xt.location.href);i=function(t,e,i){return t+(-1==t.indexOf("#")?"#":"&")+encodeURIComponent("__WA__")+"="+encodeURIComponent(i)}(i,0,function(t){const e={requestId:t.requestId,returnUrl:t.returnUrl,args:t.args};return void 0!==t.origin&&(e.origin=t.origin),void 0!==t.originVerified&&(e.originVerified=t.originVerified),JSON.stringify(e)}({requestId:this.ds,returnUrl:t,args:this.Yt}))}let n=this.ps;"_top"!=n&&fn(this.Xt)&&(n="_top");try{e=this.Xt.open(i,n,t)}catch(s){}if(!e&&"_top"!=n&&!this.dn.disableRedirectFallback){n="_top";try{e=this.Xt.open(i,n)}catch(s){}}return e?(this.gs=e,"_top"!=n&&this.ws()):this.bs(new Error("failed to open window")),this.os.catch((()=>{}))}Es(){const t=this.Xt.screen,e=t.availWidth||t.width,i=t.availHeight||t.height,n=this.Ts(),s=En(this.Xt),r=n&&this.Xt.outerWidth>this.Xt.innerWidth?Math.min(100,this.Xt.outerWidth-this.Xt.innerWidth):s?100:0,o=n&&this.Xt.outerHeight>this.Xt.innerHeight?Math.min(100,this.Xt.outerHeight-this.Xt.innerHeight):s?100:0,a=Math.max(e-r,.5*e),h=Math.max(i-o,.5*i);let l=Math.floor(Math.min(600,.9*a)),u=Math.floor(Math.min(600,.9*h));this.dn.width&&(l=Math.min(this.dn.width,a)),this.dn.height&&(u=Math.min(this.dn.height,h));const c=Math.floor((t.width-l)/2),d=Math.floor((t.height-u)/2),p={height:u,width:l,resizable:"yes",scrollbars:"yes"};s||(p.left=c,p.top=d);let g="";for(const m in p)g&&(g+=","),g+="".concat(m,"=").concat(p[m]);return g}Ts(){return this.Xt==this.Xt.top}ws(){this._s=this.Xt.setInterval((()=>{this.Is(!0)}),500),this.us=new bn(this.Xt,this.gs,null,!0),this.us.connect(this.Xn.bind(this))}Is(t){this.gs&&!this.gs.closed||(this._s&&(this.Xt.clearInterval(this._s),this._s=null),this.Xt.setTimeout((()=>{try{this.ys(hn.CANCELED,null)}catch(t){this.bs(t)}}),t?3e3:0))}bs(t){this.rs&&this.rs(Promise.reject(t)),this.disconnect()}ys(t,e){if(this.rs){const i=this.us.isConnected(),n=new ln(t,e,an.POPUP,i?this.us.getTargetOrigin():pn(this.C),i,i);mn(this.Xt,n,this.rs),this.rs=null}this.us&&this.us.sendCommand("close"),this.disconnect()}Xn(t,e){if("connect"==t)this.us.sendStartCommand(this.Yt),this.ts();else if("result"==t){const t=e.code,i=t==hn.FAILED?new Error(e.data||""):e.data;this.ys(t,i)}else"check"==t&&this.Xt.setTimeout((()=>this.Is()),200)}}class Sn{constructor(t,e,i,n,s){this.Xt=t,this.Ss=e,this.Os=i,this.jn=n,this.Cs=s}getMode(){return an.REDIRECT}acceptResult(){const t=new ln(this.Ss,this.Os,an.REDIRECT,this.jn,this.Cs,!1);return new Promise((e=>{mn(this.Xt,t,e)}))}}var On={ActivityPorts:class{constructor(t){this.version="1.24",this.Xt=t,this.Ns=t.location.hash,this.vs={},this.As={},this.Rs=null,this.Ps=new Promise((t=>{this.Rs=t}))}openIframe(t,e,i){const n=new In(t,e,i);return n.connect().then((()=>n))}open(t,e,i,n,s){return{targetWin:this.xs(t,e,i,n,s).getTargetWin()}}openWithMessaging(t,e,i,n,s){const r=this.xs(t,e,i,n,s);return r.whenConnected().then((()=>r))}onResult(t,e){let i=this.vs[t];i||(i=[],this.vs[t]=i),i.push(e);const n=this.Ls(t);n&&this.Ms(n,e)}onRedirectError(t){this.Ps.then(t)}xs(t,e,i,n,s){const r=new yn(this.Xt,t,e,i,n,s);return r.open().then((()=>{this.ks(t,r)})),r}Ls(t){let e=this.As[t];if(!e&&this.Ns){try{e=function(t,e,i){const n="__WA_RES__",s=(r=n,(o=e,o?(/^[?#]/.test(o)?o.slice(1):o).split("&").reduce(((t,e)=>{const i=e.split("="),n=decodeURIComponent(i[0]||""),s=decodeURIComponent(i[1]||"");return n&&(t[n]=s),t}),{}):{})[r]);var r,o;if(!s)return null;const a=JSON.parse(s);if(!a||a.requestId!=i)return null;const h=function(t,e){if(!t)return t;const i=encodeURIComponent(e)+"=";let n=-1;do{if(n=t.indexOf(i,n),-1!=n){const e=n>0?t.substring(n-1,n):"";if(""==e||"?"==e||"#"==e||"&"==e){let e=t.indexOf("&",n+1);-1==e&&(e=t.length),t=t.substring(0,n)+t.substring(e+1)}else n++}}while(-1!=n&&n<t.length);return t}(t.location.hash,n)||"";if(h!=t.location.hash&&t.history&&t.history.replaceState)try{t.history.replaceState(t.history.state,"",h)}catch(p){}const l=a.code,u=a.data,c=a.origin,d=t.document.referrer&&pn(t.document.referrer);return new Sn(t,l,u,c,c==d)}(this.Xt,this.Ns,t)}catch(i){!function(t){setTimeout((()=>{throw t}))}(i),this.Rs(i)}e&&(this.As[t]=e)}return e}Ms(t,e){Promise.resolve().then((()=>{e(t)}))}ks(t,e){const i=this.vs[t];i&&i.forEach((t=>{this.Ms(e,t)})),this.As[t]=e}},ActivityIframePort:In,ActivityMessagingPort:class{getTargetWin(){}message(t){}onMessage(t){}messageChannel(t){}},ActivityMode:an,ActivityOpenOptions:void 0,ActivityPort:class{getMode(){}acceptResult(){}},ActivityRequest:void 0,ActivityResult:ln,ActivityResultCode:hn,ActivityWindowPort:yn,createAbortError:gn,isAbortError:function(t){return!(!t||"object"!=typeof t)&&t.name===un}};const Cn=t({__proto__:null,default:rn(On)},[On]);class Nn{constructor(t){this.Xe=t}acceptResult(){return this.Xe.acceptResult()}}var vn=(t=>(t[t.PROCESS_EVENT=0]="PROCESS_EVENT",t[t.CANCEL_EVENT=1]="CANCEL_EVENT",t))(vn||{});function An(t,e){return"Event has an invalid "+t+"("+e+")"}class Rn{constructor(t){this.Ds=t,this.Us=[],this.Gs=[],this.lastAction=null}static isPublisherEvent(t){return t.eventOriginator===a.PROPENSITY_CLIENT||t.eventOriginator===a.PUBLISHER_CLIENT}registerEventListener(t){if(!$e(t))throw new Error("Event manager listeners must be a function");this.Us.push(t)}registerEventFilterer(t){if(!$e(t))throw new Error("Event manager filterers must be a function");this.Gs.push(t)}logEvent(t,e,i){!function(t){if(!qe(t))throw new Error("Event must be a valid object");if(!He(s,t.eventType))throw new Error(An("eventType",t.eventType));if(!He(a,t.eventOriginator))throw new Error(An("eventOriginator",t.eventOriginator));if(!qe(t.additionalParameters)&&null!=t.additionalParameters)throw new Error(An("additionalParameters",t.additionalParameters));if(null!=t.isFromUserAction&&!Je(t.isFromUserAction))throw new Error(An("isFromUserAction",t.isFromUserAction))}(t),t.timestamp=null!=i?i:Date.now(),this.lastAction=this.qn(t,e)}async qn(t,e){await this.Ds;for(const n of this.Gs)try{if(n(t)===vn.CANCEL_EVENT)return}catch(i){Yt(i)}for(const n of this.Us)try{n(t,e)}catch(i){Yt(i)}}logSwgEvent(t,e=!1,i=null,n,s=null){this.logEvent({eventType:t,eventOriginator:a.SWG_CLIENT,isFromUserAction:e,additionalParameters:i,configurationId:s},void 0,n)}getReadyPromise(){return this.Ds}}const Pn="0123456789ABCDEF";function xn(t){return new P([Math.floor(t/1e3),t%1e3*1e6],!1)}const Ln={opacity:"0",position:"absolute",top:"-10px",left:"-10px",height:"1px",width:"1px"},Mn="AnalyticsService timed out waiting for a response";function kn(t){const e=new b;return e.setComplete(!1),e.setError(t),e}class Dn{constructor(t){var e;this.Zt=t,this.j=new u,this.js=!1,this.Fs=!1,this.zs=null,this.Bs=[],this.Ze=null,this.Ws=null,this.Vs=!1,this.Ys=null,this.Ks=0,this.lastAction=null,this.L=xn(t.creationTimestamp()),this.qt=t.doc(),this.Ht=t.activities(),this.$t=Rt(this.qt.getWin().document,"iframe",{}),kt(this.$t,Ln),null==(e=this.qt.getBody())||e.appendChild(this.getElement()),this.qs(),this.he=t.eventManager(),this.he.registerEventListener(this.qe.bind(this))}setReadyForLogging(){this.Vs=!0;for(const t of this.Bs)this.qe(t)}setTransactionId(t){const e=this.j.getTransactionId();if(this.j.setTransactionId(t),null!=e&&e!=t){const t=s.EVENT_NEW_TX_ID,i=new w;i.setOldTransactionId(e),this.he.logSwgEvent(t,!0,i)}}getTransactionId(){return this.j.getTransactionId()}getSku(){return this.j.getSku()}setSku(t){this.j.setSku(t)}setUrl(t){this.j.setUrl(t)}addLabels(t){if(t&&t.length>0){const e=[].concat(this.j.getLabelList());for(const i of t)-1==e.indexOf(i)&&e.push(i);this.j.setLabelList(e)}}getElement(){return this.$t}Hs(){return this.qt.getWin().location.search}$s(){return this.qt.getWin().document.referrer}Js(){const t=this.Qs();if(t&&t.length){const e=t[0],i=e.loadEventStart-e.unloadEventEnd;if(i>0)return i}return 0}Qs(){return performance.getEntriesByType("navigation")}qs(){const t=this.j;t.setTransactionId(function(){let t=function(){const t=Date.now().toString(16);return t.substring(t.length-8).toUpperCase()}()+"-",e=0;const i=function(t,e){const i=new Uint8Array(23);self.crypto.getRandomValues(i);for(let n=i.length-1;n>-1;n--)i[n]=i[n]%16;return i}();for(let s=9;s<36;s++)switch(s){case 13:case 18:case 23:t+="-";break;case 14:t+="4";break;case 19:t+=(n=i[e++],Pn[3&n|8]);break;default:t+=Pn[i[e++]]}var n;return t}()+".swg"),t.setReferringOrigin(Qt(this.$s()).origin),t.setClientVersion("SwG ".concat(i)),t.setUrl(ie(this.qt)),t.setIsLockedContent(this.Zt.pageConfig().isLocked()),t.setUrlFromMarkup(ee(this.qt)||"");const e=Xt(this.Hs()),n=e.utm_campaign,s=e.utm_medium,r=e.utm_source;n&&t.setUtmCampaign(n),s&&t.setUtmMedium(s),r&&t.setUtmSource(r)}start(){return this.Ze||(this.addLabels(ci(this.qt.getWin())),this.Ze=this.preparePort()),this.Ze}async preparePort(){let t;try{t=await this.Ht.openIframe(this.$t,de("/serviceiframe"),null,!0)}catch(e){return this.Fs=!0,this.Xs(kn("Could not connect ["+e+"]")),null}return t.on(b,this.Xs.bind(this)),await t.whenReady(),this.addLabels(ci(this.qt.getWin())),t}setReadyToPay(t){this.j.setReadyToPay(t)}close(){var t;null==(t=this.qt.getBody())||t.removeChild(this.getElement())}getContext(){return this.j}He(t){const e=new c;e.setEventOriginator(t.eventOriginator),e.setIsFromUserAction(!!t.isFromUserAction),t.configurationId&&e.setConfigurationId(t.configurationId),this.j.setClientTimestamp(xn(t.timestamp));const i=this.Js();var n;i>0&&this.j.setLoadEventStartDelay((n=i,new m([Math.floor(n/1e3),n%1e3*1e6],!1))),this.j.setRuntimeCreationTimestamp(this.L);const s=new d;return s.setEvent(t.eventType),s.setContext(this.j),s.setMeta(e),t.additionalParameters instanceof w&&s.setParams(t.additionalParameters),s}Zs(){return!0===this.Zt.config().enableSwgAnalytics}qe(t){t.eventType!==s.EVENT_SUBSCRIPTION_STATE&&t.eventOriginator!==a.SHOWCASE_CLIENT&&(Rn.isPublisherEvent(t)&&!this.Zs()||(this.Vs?(this.Ks++,this.lastAction=this.er(t)):this.Bs.push(t)))}async er(t){const e=await this.start(),i=this.He(t);null==e||e.execute(i)}Xs(t){const e=(null==t?void 0:t.getComplete())||!1,i=(null==t?void 0:t.getError())||"Unknown logging Error",n=i===Mn;e||Yt("Error when logging: "+i),this.Ks--,n||(this.js=!0),null!==this.zs&&(0===this.Ks||this.Fs||n)&&(null!==this.Ys&&(clearTimeout(this.Ys),this.Ys=null),this.zs(e),this.Ws=null,this.zs=null)}getLoggingPromise(){return 0===this.Ks||this.Fs?Promise.resolve(!0):(null===this.Ws&&(this.Ws=new Promise((t=>{this.zs=t})),this.Ys=self.setTimeout((()=>{this.Ys=null,this.Xs(kn(Mn))}),this.js?200:500)),this.Ws)}}class Un{constructor(){this.ir={},this.As={},this.nr=null}setOnEntitlementsResponse(t){this.rr(1,t)}triggerEntitlementsResponse(t){return this.lr(1,t.then((t=>t.clone())))}hasEntitlementsResponsePending(){return!!this.As[1]}setOnLoginRequest(t){this.rr(4,t)}triggerLoginRequest(t){return this.lr(4,t)}setOnLinkProgress(t){this.rr(5,t)}triggerLinkProgress(){return this.lr(5,!0)}resetLinkProgress(){this.ur(5)}setOnLinkComplete(t){this.rr(6,t)}triggerLinkComplete(){return this.lr(6,!0)}hasLinkCompletePending(){return!!this.As[6]}setOnPayConfirmOpened(t){this.rr(9,t)}triggerPayConfirmOpened(t){return this.lr(9,t)}setOnSubscribeRequest(t){this.rr(2,t)}triggerSubscribeRequest(){return this.lr(2,!0)}hasSubscribeRequestCallback(){return!!this.ir[2]}setOnOffersFlowRequest(t){this.rr(10,t)}triggerOffersFlowRequest(){return this.lr(10,!0)}hasOffersFlowRequestCallback(){return!!this.ir[10]}setOnSubscribeResponse(t){Kt("[swg.js:setOnSubscribeResponse]: This method has been deprecated, please switch usages to 'setOnPaymentResponse'"),this.rr(3,t)}setOnContributionResponse(t){Kt("[swg.js:setOnContributionResponse]: This method has been deprecated, please switch usages to 'setOnPaymentResponse'"),this.rr(3,t)}setOnPaymentResponse(t){this.rr(3,t)}triggerPaymentResponse(t){return this.nr=t.then((t=>{this.lr(3,Promise.resolve(t.clone()))}),(t=>{if(!zt(t))throw t})),!!this.ir[3]}hasPaymentResponsePending(){return!!this.As[3]}setOnFlowStarted(t){this.rr(7,t)}triggerFlowStarted(t,e={}){return this.lr(7,{flow:t,data:e})}setOnFlowCanceled(t){this.rr(8,t)}triggerFlowCanceled(t,e={}){return this.lr(8,{flow:t,data:e})}rr(t,e){this.ir[t]&&Kt("[swg.js]: You have registered multiple callbacks for the same response."),this.ir[t]=e,t in this.As&&this.cr(t,e,this.As[t])}lr(t,e){this.As[t]=e;const i=this.ir[t];return i&&this.cr(t,i,e),!!i}ur(t){t in this.As&&delete this.As[t]}async cr(t,e,i){await 0,e(i),this.ur(t)}}class Gn{constructor(t,e){this.displayName=t,this.avatarUrl=e}}class jn{constructor({displayDelaySeconds:t,numImpressionsBetweenPrompts:e,dismissalBackOffSeconds:i,maxDismissalsPerWeek:n,maxDismissalsResultingHideSeconds:s,impressionBackOffSeconds:r,maxImpressions:o,maxImpressionsResultingHideSeconds:a,globalFrequencyCapDurationSeconds:h,globalFrequencyCapDurationNano:l,promptFrequencyCaps:u,anyPromptFrequencyCapDurationSeconds:c,anyPromptFrequencyCapDurationNano:d}){this.clientDisplayTrigger=new Fn(t,e),this.explicitDismissalConfig=new zn(i,n,s),this.impressionConfig=new Bn(r,o,a),this.frequencyCapConfig=new Wn(new Vn(new qn(h,l)),null==u?void 0:u.map((t=>{var e,i;return new Yn(t.audienceActionType,new qn(null==(e=t.frequencyCapDuration)?void 0:e.seconds,null==(i=t.frequencyCapDuration)?void 0:i.nano))})),new Kn(new qn(c,d)))}}class Fn{constructor(t,e){this.displayDelaySeconds=t,this.numImpressionsBetweenPrompts=e}}class zn{constructor(t,e,i){this.backOffSeconds=t,this.maxDismissalsPerWeek=e,this.maxDismissalsResultingHideSeconds=i}}class Bn{constructor(t,e,i){this.backOffSeconds=t,this.maxImpressions=e,this.maxImpressionsResultingHideSeconds=i}}class Wn{constructor(t,e,i){this.globalFrequencyCap=t,this.promptFrequencyCaps=e,this.anyPromptFrequencyCap=i}}class Vn{constructor(t){this.frequencyCapDuration=t}}class Yn{constructor(t,e){this.audienceActionType=t,this.frequencyCapDuration=e}}class Kn{constructor(t){this.frequencyCapDuration=t}}class qn{constructor(t,e){this.seconds=t,this.nanos=e}}class Hn{constructor({attributionParams:t,autoPromptConfig:e,paySwgVersion:i,uiPredicates:n,useUpdatedOfferFlows:s,skipAccountCreationScreen:r}){this.autoPromptConfig=e,this.paySwgVersion=i,this.useUpdatedOfferFlows=s||!1,this.skipAccountCreationScreen=r||!1,this.uiPredicates=n,this.attributionParams=t}}class $n{constructor(t,e,i){this.canDisplayAutoPrompt=t,this.canDisplayButton=e,this.purchaseUnavailableRegion=i}}class Jn{constructor(t,e,i,n={}){this.Zt=t,this.dr=e,this.ae=i,this.pr=n,this.gr=null}fetchClientConfig(t){if(!this.dr)throw new Error("fetchClientConfig requires publicationId");return this.gr||(t=t||Promise.resolve(),this.gr=t.then((()=>this.mr()))),this.gr}getClientConfig(){return this.gr||this._r()}async _r(){return new Hn({paySwgVersion:this.Zt.config().paySwgVersion,skipAccountCreationScreen:this.pr.skipAccountCreationScreen,useUpdatedOfferFlows:!!this.Zt.config().paySwgVersion||void 0})}async getAutoPromptConfig(){this.gr||this.fetchClientConfig();const t=await this.gr;return null==t?void 0:t.autoPromptConfig}getLanguage(){return this.pr.lang||"en"}getTheme(){const t=self.matchMedia("(prefers-color-scheme: dark)").matches?Ue.DARK:Ue.LIGHT;return this.pr.theme||t}shouldAllowScroll(){return!!this.pr.allowScroll}shouldForceLangInIframes(){return!!this.pr.forceLangInIframes&&!!this.pr.lang}async shouldEnableButton(){var t;if(this.pr.disableButton)return Promise.resolve(!1);this.gr||this.fetchClientConfig();const e=await this.gr;return null==(t=null==e?void 0:e.uiPredicates)?void 0:t.canDisplayButton}async mr(){const t=await this.Zt.entitlementsManager().getArticle();if(t)return this.Er(t.clientConfig);const e=ue("/publication/"+encodeURIComponent(this.dr)+"/clientconfiguration"),i=await this.ae.fetchCredentialedJson(e);return this.Er(i)}Er(t){var e,i,n,s,r,o,a,h,l,u,c,d,p,g,m,_,f,E,w,b;const T=t.autoPromptConfig;let I;T&&(I=new jn({displayDelaySeconds:null==(e=T.clientDisplayTrigger)?void 0:e.displayDelaySeconds,dismissalBackOffSeconds:null==(i=T.explicitDismissalConfig)?void 0:i.backOffSeconds,maxDismissalsPerWeek:null==(n=T.explicitDismissalConfig)?void 0:n.maxDismissalsPerWeek,maxDismissalsResultingHideSeconds:null==(s=T.explicitDismissalConfig)?void 0:s.maxDismissalsResultingHideSeconds,impressionBackOffSeconds:null==(r=T.impressionConfig)?void 0:r.backOffSeconds,maxImpressions:null==(o=T.impressionConfig)?void 0:o.maxImpressions,maxImpressionsResultingHideSeconds:null==(a=T.impressionConfig)?void 0:a.maxImpressionsResultingHideSeconds,globalFrequencyCapDurationSeconds:null==(u=null==(l=null==(h=T.frequencyCapConfig)?void 0:h.globalFrequencyCap)?void 0:l.frequencyCapDuration)?void 0:u.seconds,globalFrequencyCapDurationNano:null==(p=null==(d=null==(c=T.frequencyCapConfig)?void 0:c.globalFrequencyCap)?void 0:d.frequencyCapDuration)?void 0:p.nano,promptFrequencyCaps:null==(g=T.frequencyCapConfig)?void 0:g.promptFrequencyCaps,anyPromptFrequencyCapDurationSeconds:null==(f=null==(_=null==(m=T.frequencyCapConfig)?void 0:m.anyPromptFrequencyCap)?void 0:_.frequencyCapDuration)?void 0:f.seconds,anyPromptFrequencyCapDurationNano:null==(b=null==(w=null==(E=T.frequencyCapConfig)?void 0:E.anyPromptFrequencyCap)?void 0:w.frequencyCapDuration)?void 0:b.nano}));const y=t.uiPredicates;let S;y&&(S=new $n(y.canDisplayAutoPrompt,y.canDisplayButton,y.purchaseUnavailableRegion));const O=t.attributionParams;let C;O&&(C=new Gn(O.displayName,O.avatarUrl));const N=this.Zt.config().paySwgVersion||t.paySwgVersion,v=!!this.Zt.config().paySwgVersion||t.useUpdatedOfferFlows;return new Hn({autoPromptConfig:I,paySwgVersion:N,useUpdatedOfferFlows:v,skipAccountCreationScreen:this.pr.skipAccountCreationScreen,uiPredicates:S,attributionParams:C})}}class Qn{constructor(t,e){var i,n,s,r;this.Zt=t,this.dn=e,this.Xt=t.win(),this.ie=t.clientConfigManager(),this.Ht=t.activities(),this.si=t.dialogManager(),this.Li=null==(n=null==(i=this.dn)?void 0:i.isClosable)||n,this.xn=this.wr(),this.Qe=void 0===(null==(s=this.dn)?void 0:s.shouldAnimateFade)||(null==(r=this.dn)?void 0:r.shouldAnimateFade)}async wr(){var t,e;const i=await this.ie.getClientConfig();return new Ae(this.Xt,this.Ht,this.Mn(i,this.Zt.pageConfig()),pe({productId:this.Zt.pageConfig().getProductId(),publicationId:this.Zt.pageConfig().getPublicationId(),productType:De.UI_CONTRIBUTION,list:(null==(t=this.dn)?void 0:t.list)||"default",skus:(null==(e=this.dn)?void 0:e.skus)||null,isClosable:this.Li,supportsEventManager:!0}),!0,!1,this.Qe)}li(t){t.getSubscriberOrMember()&&this.Zt.callbacks().triggerLoginRequest({linkRequested:!!t.getLinkRequested()})}An(t){const e=t.getSku(),i=t.getOneTime();if(e){const t={skuId:e};i&&(t.oneTime=i),new Qi(this.Zt,t,De.UI_CONTRIBUTION).start()}}async start(){const t=await this.xn;this.Zt.callbacks().triggerFlowStarted(Le.SHOW_CONTRIBUTION_OPTIONS),t.onCancel((()=>{this.Zt.callbacks().triggerFlowCanceled(Le.SHOW_CONTRIBUTION_OPTIONS)})),t.on(l,this.li.bind(this)),t.on(y,this.An.bind(this));const e=await this.ie.getClientConfig();return this.si.openView(t,!1,this.Dn(e,this.ie.shouldAllowScroll()))}Dn(t,e){return t.useUpdatedOfferFlows&&!e?{shouldDisableBodyScrolling:!0,closeOnBackgroundClick:this.Li}:{}}Mn(t,e){return t.useUpdatedOfferFlows?this.ie.shouldForceLangInIframes()?de("/contributionoffersiframe",{hl:this.ie.getLanguage(),publicationId:e.getPublicationId()}):de("/contributionoffersiframe",{publicationId:e.getPublicationId()}):de("/contributionsiframe")}async showNoEntitlementFoundToast(){(await this.xn).execute(new E)}}const Xn=String.raw,Zn=Xn(_u||(_u=__template(["\n  body {\n    padding: 0;\n    margin: 0;\n  }\n\n  swg-container,\n  swg-loading,\n  swg-loading-animate,\n  swg-loading-image {\n    display: block;\n  }\n\n  swg-loading-container {\n    width: 100% !important;\n    display: flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n    min-height: 148px !important;\n    height: 100% !important;\n    bottom: 0 !important;\n    margin-top: 5px !important;\n    z-index: 2147483647 !important;\n  }\n\n  /**\n  * Since the desktop view has the parent iframe (.swg-dialog) transparent,\n  * this style adds the background with borders to the loading indicator.\n  */\n  @media (min-width: 630px), (min-height: 630px) {\n    swg-loading-container {\n      width: 560px !important;\n      margin-left: auto !important;\n      margin-right: auto !important;\n      border-top-left-radius: 8px !important;\n      border-top-right-radius: 8px !important;\n      background-color: rgba(255, 255, 255, 1) !important;\n      box-shadow: rgba(60, 64, 67, 0.3) 0 1px 1px,\n        rgba(60, 64, 67, 0.15) 0 1px 4px 1px !important;\n    }\n\n    swg-loading-container.centered-on-desktop {\n      height: 120px !important;\n      min-height: 120px !important;\n      border-radius: 8px !important;\n    }\n  }\n\n  swg-loading {\n    z-index: 2147483647 !important;\n    width: 36px;\n    height: 36px;\n    overflow: hidden;\n    animation: mspin-rotate 1568.63ms infinite linear;\n  }\n\n  swg-loading-animate {\n    animation: mspin-revrot 5332ms infinite steps(4);\n  }\n\n  swg-loading-image {\n    background-image: url('","/loader.svg');\n    background-size: 100%;\n    width: 11664px;\n    height: 36px;\n    animation: swg-loading-film 5332ms infinite steps(324);\n  }\n\n  @keyframes swg-loading-film {\n    from {\n      transform: translateX(0);\n    }\n    to {\n      transform: translateX(-11664px);\n    }\n  }\n\n  @keyframes mspin-rotate {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n\n  @keyframes mspin-revrot {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(-360deg);\n    }\n  }\n"])),n),ts=Xn(_v||(_v=__template(["\n  /** Common styles across all window sizes. */\n  .swg-dialog,\n  .swg-toast {\n    box-sizing: border-box;\n    background-color: rgba(255, 255, 255, 1) !important;\n  }\n\n  .swg-toast {\n    position: fixed !important;\n    bottom: 0 !important;\n    max-height: 46px !important;\n    z-index: 2147483647 !important;\n    border: none !important;\n  }\n\n  /**\n  * Wide desktop screen support, when width is >= 871px and height is >= 641px.\n  */\n  @media (min-width: 871px) and (min-height: 641px) {\n    .swg-dialog.swg-wide-dialog {\n      width: 870px !important;\n      left: -435px !important;\n    }\n  }\n\n  /** Tablet/Medium screen support, when width OR height is <= 640px. */\n  @media (max-width: 640px), (max-height: 640px) {\n    .swg-dialog,\n    .swg-toast {\n      width: 480px !important;\n      left: -240px !important;\n      margin-inline-start: calc(100vw - 100vw / 2) !important;\n      border-top-left-radius: 8px !important;\n      border-top-right-radius: 8px !important;\n      box-shadow: rgba(60, 64, 67, 0.3) 0 1px 1px,\n        rgba(60, 64, 67, 0.15) 0 1px 4px 1px !important;\n    }\n\n    [dir='rtl'] .swg-dialog,\n    [dir='rtl'] .swg-toast {\n      margin-inline-start: calc(100vw - 100vw / 2 - 240px) !important;\n    }\n  }\n\n  /** Desktop/Large screen support, when width AND height are >= 641px. */\n  @media (min-width: 641px) and (min-height: 641px) {\n    .swg-dialog {\n      width: 630px !important;\n      left: -315px !important;\n      margin-inline-start: calc(100vw - 100vw / 2) !important;\n      background-color: transparent !important;\n      border: none !important;\n    }\n\n    [dir='rtl'] .swg-dialog {\n      margin-inline-start: calc(100vw - 100vw / 2 - 315px) !important;\n    }\n\n    .swg-toast {\n      border-radius: 4px !important;\n      bottom: 8px !important;\n      box-shadow: 0 3px 1px -2px rgb(0 0 0 / 20%), 0 2px 2px 0 rgb(0 0 0 / 14%),\n        0 1px 5px 0 rgb(0 0 0 / 12%) !important;\n      left: 8px !important;\n    }\n  }\n\n  /** Phone/Small screen support, when width is <= 480px. */\n  @media (max-width: 480px) {\n    .swg-dialog,\n    .swg-toast {\n      width: 100% !important;\n      left: 0 !important;\n      right: 0 !important;\n      margin-inline-start: 0 !important;\n    }\n  }\n\n  /**\n  * Class applied to content page to disable scrolling.\n  */\n  html > body.swg-disable-scroll,\n  html > body.swg-disable-scroll * {\n    overflow: hidden !important;\n  }\n"])));class es{constructor(t,e,i,n){this.entitlements=t,this.userData=e,this.purchaseDataList=i,this.In=n,this.purchaseData=i[0]}clone(){return new es(this.entitlements,this.userData,this.purchaseDataList,this.In)}json(){return{entitlements:this.entitlements.json(),userData:this.userData.json(),purchaseDataList:this.purchaseDataList.map((t=>t.json())),purchaseData:this.purchaseData.json()}}complete(){return this.In()}}class is{constructor(t,e){this.Zt=t,this.ri=null,this.openPromise=null,this.Xt=t.win(),this.Ht=t.activities(),this.si=t.dialogManager(),this.dn=Object.assign({entitlements:null,consent:!0},e||{})}async start(){const t=this.dn.entitlements;if(!t||!t.getEntitlementForSource("google"))throw new Error('No entitlements with "google" source');this.Zt.callbacks().triggerFlowStarted(Le.COMPLETE_DEFERRED_ACCOUNT_CREATION),this.ri=new Ae(this.Xt,this.Ht,de("/recoveriframe"),pe({publicationId:this.Zt.pageConfig().getPublicationId(),productId:this.Zt.pageConfig().getProductId(),entitlements:t.raw||null,consent:this.dn.consent}),!0),this.openPromise=this.si.openView(this.ri);try{const t=await this.ri.acceptResult();return this.br(t.data)}catch(e){throw zt(e)?this.Zt.callbacks().triggerFlowCanceled(Le.COMPLETE_DEFERRED_ACCOUNT_CREATION):this.si.completeView(this.ri),e}}br(t){this.Zt.entitlementsManager().blockNextNotification();const e=t.entitlements,i=t.idToken,n=t.productType,r=this.Zt.entitlementsManager().parseEntitlements({signedEntitlements:e}),o=new Hi(i,(new Yi).decode(i)),a=t.purchaseDataList?t.purchaseDataList.map((t=>new qi(t.data,t.signature))):[new qi(t.purchaseData.data,t.purchaseData.signature)],h=new Zi(this.Zt),l=h.complete.bind(h),u=new es(r,o,a,l);this.Zt.eventManager().logSwgEvent(s.ACTION_NEW_DEFERRED_ACCOUNT,!0);const c=Promise.resolve.bind(Promise);return h.start(new Ki("",a[0],o,r,n,c)),u}}function ns(t){const e=function(t){return t.readyState}(t);return"loading"!==e&&"uninitialized"!==e}class ss{constructor(t){const e="document"in t;this.Xt=e?t:t.defaultView,this.qt=e?t.document:t}getWin(){return this.Xt}getRootNode(){return this.qt}getRootElement(){return this.qt.documentElement}getHead(){return this.qt.head}getBody(){return this.qt.body}isReady(){return ns(this.qt)}async whenReady(){var t;await(t=this.qt,new Promise((e=>{!function(t,e){!function(t,e,i){if(e(t))return void i(t);let n=!1;const s=()=>{e(t)&&!n&&(i(t),n=!0,t.removeEventListener("readystatechange",s))};t.addEventListener("readystatechange",s)}(t,ns,e)}(t,e)})))}}function rs(t){return"nodeType"in t||"document"in t?new ss(t):t}const os={frameborder:"0",scrolling:"no",src:"about:blank"};class as{constructor(t,e){const i=Object.assign({},os,e);this.$t=Rt(t,"iframe",i),kt(this.$t,Mt),this.Tr=new Promise((t=>{this.$t.onload=()=>{t()}}))}whenReady(){return this.Tr}getElement(){return this.$t}getDocument(){var t;const e=this.getElement().contentDocument||(null==(t=this.getElement().contentWindow)?void 0:t.document);if(!e)throw new Error("not loaded");return e}getBody(){return this.getDocument().body}isConnected(){return this.getElement().isConnected}}let hs=class{constructor(t,e){this.qt=t,this.Ir=this.qt.getWin().document.createElement("swg-popup-background"),this.Ir.setAttribute("role","button"),kt(this.Ir,{"z-index":e.toString(),display:"none",position:"fixed",top:"0",right:"0",bottom:"0",left:"0","background-color":"rgba(32, 33, 36, .6)"})}getElement(){return this.Ir}isAttached(){return!!this.Ir.parentNode}attach(){var t;null==(t=this.qt.getBody())||t.appendChild(this.Ir)}destroy(){var t;null==(t=this.qt.getBody())||t.removeChild(this.Ir)}show(t){if(kt(this.Ir,{display:"block",opacity:t?"0":"1"}),t)return Ut(this.Ir,{opacity:"1"},300,"ease-out")}async hide(t=!0){t&&await Ut(this.Ir,{opacity:"0"},300,"ease-out"),kt(this.Ir,{display:"none"})}};class ls{constructor(t,e={}){if(this.qt=t,this.yr=Rt(this.qt,"swg-loading-container",{}),e.additionalClasses)for(const i of e.additionalClasses)this.yr.classList.add(i);this.Sr=Rt(this.qt,"swg-loading",{}),this.yr.appendChild(this.Sr),this.yr.style.setProperty("display","none","important"),this.Or()}getElement(){return this.yr}show(){this.yr.style.removeProperty("display")}hide(){this.yr.style.setProperty("display","none","important")}Or(){const t=this.Sr,e=Rt(this.qt,"swg-loading-animate",{});t.appendChild(e);const i=Rt(this.qt,"swg-loading-image",{});e.appendChild(i)}}const us=2147483647,cs={"min-height":"50px",border:"none",display:"block",position:"fixed","z-index":us,"box-sizing":"border-box"},ds={position:"absolute",top:"0",left:"0",right:"0",bottom:"0",opacity:"0",height:"0","max-height":"100%","max-width":"100%","min-height":"100%","min-width":"100%",width:"0"};class ps{constructor(t,e={},i={},n={},s=!1){this.qt=t;const r=n.desktopConfig||{},o=!!r.supportsWideScreen,a="swg-dialog ".concat(o?"swg-wide-dialog":""),h=n.iframeCssClassOverride||a;this.$t=new as(t.getWin().document,{class:h}),this.Cr=new hs(t,us-1),this.Nr=n.closeOnBackgroundClick,this.vr=s;const l=Object.assign({},cs,e);kt(this.$t.getElement(),l),function(t,e){for(const[i,n]of Object.entries(e))Dt(t,i,n)}(this.$t.getElement(),i),this.Ar=null,this.Rr=null,this.Pr=null,this.Kt=null,this.Lr=0,this.Mr=!1,this.kr=null,this.Dr=void 0!==n.maxAllowedHeightRatio?n.maxAllowedHeightRatio:.9,this.Ur=!!r.isCenterPositioned,this.Gr=!!n.shouldDisableBodyScrolling,this.jr=this.qt.getWin().matchMedia("(min-width: 641px)"),this.Fr=null}async open(t=!1){var e;this.vr&&void 0!==this.Nr&&this.Cr.getElement().addEventListener("click",this.zr.bind(this));const i=this.$t;if(i.isConnected())throw new Error("already opened");return null==(e=this.qt.getBody())||e.appendChild(i.getElement()),this.Cr.attach(),t?(kt(i.getElement(),{visibility:"hidden",opacity:"0"}),this.Mr=t):this.Br(),await i.whenReady(),this.Wr(),this}Wr(){const t=this.$t.getBody(),e=this.$t.getDocument();xt(rs(e),Zn);const i=[];this.isPositionCenterOnDesktop()&&i.push("centered-on-desktop"),this.Ar=new ls(e,{additionalClasses:i}),t.appendChild(this.Ar.getElement()),this.Rr=Rt(e,"swg-container",{}),t.appendChild(this.Rr),this.Vr(),this.Ur&&(this.Fr=()=>{this.Vr()},this.jr.addListener(this.Fr))}async close(t=!0){var e,i;let n;if(t){const t=this.Yr()?{opacity:"0"}:{transform:"translateY(100%)"};n=this.Qt((()=>(this.Cr.hide(!0),Ut(this.getElement(),t,300,"ease-out"))))}else n=Promise.resolve();null==(e=this.qt.getBody())||e.classList.remove("swg-disable-scroll"),await n;const s=this.$t.getElement();null==(i=s.parentNode)||i.removeChild(s),this.Kr(),this.Cr.destroy(),this.Fr&&this.jr.removeListener(this.Fr)}getContainer(){if(!this.Rr)throw new Error("not opened yet");return this.Rr}getIframe(){return this.$t}getElement(){return this.$t.getElement()}getLoadingView(){return this.Ar}getMaxAllowedHeightRatio(){return this.Dr}isPositionCenterOnDesktop(){return this.Ur}qr(){var t;this.Pr&&this.Pr.hasLoadingIndicator()?this.kr=this.Pr:(this.getContainer().textContent="",null==(t=this.Ar)||t.show())}Hr(){var t;this.kr?(Pt(this.kr.getElement()),this.kr=null):null==(t=this.Ar)||t.hide()}getCurrentView(){return this.Pr}async openView(t){var e;kt(t.getElement(),ds),this.qr(),this.Pr=t,this.getContainer().appendChild(t.getElement()),this.Gr&&(null==(e=this.qt.getBody())||e.classList.add("swg-disable-scroll")),t.shouldFadeBody()&&!this.Mr&&this.Cr.show(t.shouldAnimateFade()),await t.init(this),kt(t.getElement(),{opacity:"1"}),this.Mr&&(t.shouldFadeBody()&&this.Cr.show(t.shouldAnimateFade()),this.Br()),this.Hr()}Br(){this.Qt((async()=>{kt(this.getElement(),{transform:"translateY(100%)",opactiy:"1",visibility:"visible"}),await Ut(this.getElement(),{transform:this.$r(),opacity:"1",visibility:"visible"},300,"ease-out"),this.getElement().focus()})),this.Mr=!1}zr(t){if(t.stopPropagation(),this.Nr){const t=this.Pr.getElement(),e=t.contentWindow;if(e){const i=t.src?new URL(t.src).origin:"*";e.postMessage("close",i)}}return!1}async resizeView(t,e,i=!0){if(this.Pr!=t)return null;const n=this.Jr(e),s=++this.Lr,r=()=>s!==this.Lr;let o;if(i){const t=this.getElement().offsetHeight;o=n>=t?this.Qt((()=>{if(r())return Promise.resolve();const e={height:"".concat(n,"px")};return this.Yr()||(e.transform="translateY(".concat(n-t,"px)")),kt(this.getElement(),e),requestAnimationFrame((()=>{Ut(this.getElement(),{transform:this.$r()},300,"ease-out")})),Promise.resolve()})):this.Qt((async()=>{const e=r()?Promise.resolve():Ut(this.getElement(),{transform:this.Yr()?this.$r():"translateY(".concat(t-n,"px)")},300,"ease-out");await e,r()||kt(this.getElement(),{height:"".concat(n,"px"),transform:this.$r()})}))}else kt(this.getElement(),{height:"".concat(n,"px")}),o=Promise.resolve();await o,r()||(this.Qr(e),t.resized())}async Qt(t){await this.Kt;try{await t()}catch(e){}this.Kt=null}Jr(t){return Math.min(t,this.qt.getWin().innerHeight*this.Dr)}Qr(t){if(this.Yr())return void this.Kr();const e=t+20;kt(this.qt.getRootElement(),{"padding-bottom":"".concat(e,"px")})}Kr(){this.qt.getRootElement().style.removeProperty("padding-bottom")}Vr(){kt(this.getElement(),this.Xr())}Yr(){return this.Ur&&this.jr.matches}Xr(){return this.Yr()?{top:"50%",bottom:"0",transform:this.$r()}:{top:"auto",bottom:"0",transform:this.$r()}}$r(){return this.Yr()?"translateY(-50%)":"translateY(0px)"}}class gs{constructor(t){this.vr=!1,this.qt=t,this.Zr=null,this.eo=null,this.io=new hs(t,2147483647),this.so=null,this.io.getElement().addEventListener("click",(()=>{if(this.so)try{this.so.focus()}catch(t){}}))}setEnableBackgroundClickExperiment(t){this.vr=t}openDialog(t=!1,e={}){return this.eo||(this.Zr=new ps(this.qt,{},{},e,this.vr),this.eo=this.Zr.open(t)),this.eo}async openView(t,e=!1,i={}){return this.handleCancellations(t),(await this.openDialog(e,i)).openView(t)}async handleCancellations(t){try{await t.whenComplete()}catch(e){throw zt(e)&&this.completeView(t),e}}completeView(t){setTimeout((()=>{this.Zr&&this.Zr.getCurrentView()===t&&this.Ft()}),100)}completeAll(){this.Zr&&this.Ft(),this.io.isAttached()&&this.io.destroy()}getDialog(){return this.Zr}Ft(){var t;null==(t=this.Zr)||t.close(),this.Zr=null,this.eo=null}popupOpened(t){this.so=t||null,this.io.isAttached()||this.io.attach(),this.io.show(!0)}popupClosed(){this.so=null;try{this.io.hide()}catch(t){}}}class ms{constructor(t,e){this.intervention=t,this.Zt=e,this.type=t.type,this.configurationId=t.configurationId}async show(t){if(this.intervention.type==rt.TYPE_NEWSLETTER_SIGNUP||this.intervention.type==rt.TYPE_REWARDED_SURVEY||this.intervention.type==rt.TYPE_BYO_CTA)return new ii(this.Zt,{action:this.intervention.type,configurationId:this.intervention.configurationId,onResult:t.onResult,isClosable:t.isClosable,calledManually:!0,suppressToast:t.suppressToast}).start();if(this.intervention.type==rt.TYPE_REWARDED_AD)return new Te(this.Zt,{action:this.intervention.type,configurationId:this.intervention.configurationId,onResult:t.onResult,isClosable:t.isClosable,calledManually:!0,onAlternateAction:t.onAlternateAction,onSignIn:t.onSignIn}).start();throw Error("Can't show ".concat(this.type))}}const fs="google:metering";class Es{constructor(t,e,i,n,s,r,o=!1,a=null){this.service=t,this.raw=e,this.entitlements=i,this.ro=n,this.oo=s,this.ao=r,this.decryptedDocumentKey=a,this.isReadyToPay=!!o}clone(){return new Es(this.service,this.raw,this.entitlements.map((t=>t.clone())),this.ro,this.oo,this.ao,this.isReadyToPay,this.decryptedDocumentKey)}json(){return{service:this.service,entitlements:this.entitlements.map((t=>t.json())),isReadyToPay:this.isReadyToPay}}enablesThisWithCacheableEntitlements(){return!!this.getEntitlementForThis()&&!this.enablesThisWithGoogleMetering()&&!this.enablesThisWithGoogleDevMode()}enablesThisWithGoogleMetering(){const t=this.getEntitlementForThis();return!!t&&t.source===fs}enablesThisWithGoogleDevMode(){const t=this.getEntitlementForThis();if(!t)return!1;const e="google"===t.source&&-1!==t.subscriptionToken.indexOf("GOOGLE_DEV_MODE_ORDER"),i="GOOGLE_DEV_MODE_TOKEN"===t.subscriptionToken;return e||i}enablesThis(t){return this.enables(this.ro,t)}enablesAny(t){for(let e=0;e<this.entitlements.length;e++)if(this.entitlements[e].products.length>0&&(!t||t==this.entitlements[e].source))return!0;return!1}enables(t,e){return!!t&&!!this.getEntitlementFor(t,e)}getEntitlementForThis(t){return this.getEntitlementFor(this.ro,t)}getEntitlementFor(t,e){if(!t)return Kt("SwG needs this article to define a product ID (e.g. example.com:premium). Articles can define a product ID using JSON+LD. SwG can check entitlements after this article defines a product ID."),null;const i=this.entitlements.filter((i=>i.enables(t)&&(!e||e===i.source))),n=i.find((({source:t})=>t!==fs)),s=i.find((({source:t})=>t===fs));return n||s||null}getEntitlementForSource(t){if(this.entitlements.length>0)for(let e=0;e<this.entitlements.length;e++)if(this.entitlements[e].subscriptionToken&&t==this.entitlements[e].source)return this.entitlements[e];return null}ack(){this.oo(this)}consume(t){this.ao(this,t)}}class ws{constructor(t,e,i,n,s,r){this.source=t,this.products=e,this.subscriptionToken=i,this.subscriptionTokenContents=n,this.subscriptionTimestamp=s,this.readerId=r}clone(){return new ws(this.source,this.products.slice(0),this.subscriptionToken,this.subscriptionTokenContents,this.subscriptionTimestamp,this.readerId)}json(){return{source:this.source,products:this.products,subscriptionToken:this.subscriptionToken,readerId:this.readerId}}enables(t){if(!t)return!1;const e=t.indexOf(":");if(-1!=e){const i=t.substring(0,e+1);if(i+"*"==t&&this.products.filter((t=>t.substring(0,e+1)==i)).length>=1)return Vt("enabled with wildcard productId"),!0;if(this.products.includes(i+"*"))return Vt("enabled with wildcard entitlement"),!0}return this.products.includes(t)}static parseFromJson(t,e){t||(t={});const i=t.source||"",n=t.products||[],s=t.subscriptionToken||"",r=t.readerId;let o;try{o=s?e.decode(s):null}catch(l){o=null}const a=t.subscriptionTimestamp;let h;try{const t=a.seconds_,e=a.nanos_;h=new P([t,e],!1)}catch(l){h=null}return new ws(i,n,s,o,h,r)}static parseListFromJson(t,e){return(Array.isArray(t)?t:[t]).map((t=>ws.parseFromJson(t,e)))}getSku(){if("google"!==this.source)return null;const t=Vi(this.subscriptionToken,"productId")||null;return t||Kt("Unable to retrieve SKU from SwG subscription token"),t}}var bs=(t=>(t[t.LICENSED_BY_GOOGLE=1]="LICENSED_BY_GOOGLE",t[t.METERED_BY_GOOGLE=2]="METERED_BY_GOOGLE",t))(bs||{});const Ts="rgba(60, 64, 67, 0.3) 0px -2px 5px, rgba(60, 64, 67, 0.15) 0px -5px 5px",Is="anonymous_user",ys={[bs.LICENSED_BY_GOOGLE]:"/metertoastiframe",[bs.METERED_BY_GOOGLE]:"/meteriframe"};class Ss{constructor(t,{meterClientType:e=bs.LICENSED_BY_GOOGLE,meterClientUserAttribute:i=Is}={}){this.Zt=t,this.ho=null,this.lo=!1,this.uo=null,this.co=()=>{},this.Xt=t.win(),this.Ht=t.activities(),this.si=t.dialogManager(),this.do=e,this.po=i}async start(){const t={isClosable:!0,hasSubscriptionCallback:this.Zt.callbacks().hasSubscribeRequestCallback()};this.do===bs.METERED_BY_GOOGLE&&(t.meterType=this.po===Is?"UNKNOWN":"KNOWN");const e=this.Ht.addDefaultArguments(t),i=ys[this.do],n={origin:Qt(this.Xt.location.href).origin};this.Zt.clientConfigManager().shouldForceLangInIframes()&&(n.hl=this.Zt.clientConfigManager().getLanguage());const r=new Ae(this.Xt,this.Ht,de(i,n),e,!1);this.co=()=>{const t=new x;t.setClose(!0),r.execute(t),this.removeCloseEventListener(),this.Zt.eventManager().logSwgEvent(s.ACTION_METER_TOAST_CLOSED_BY_ARTICLE_INTERACTION,!0),this.ho&&!this.lo&&(this.lo=!0,this.ho())},this.Zt.callbacks().triggerFlowStarted(Le.SHOW_METER_TOAST),r.on(L,this.mo.bind(this)),this.Zt.callbacks().hasSubscribeRequestCallback()||this.Zt.callbacks().hasOffersFlowRequestCallback()||Kt("[swg.js]: `setOnNativeSubscribeRequest` has not been set before starting the metering flow, so users will not be able to subscribe from the metering dialog directly. Please call `setOnNativeSubscribeRequest` with a subscription flow callback before starting metering."),this.si.handleCancellations(r).catch((t=>{if(this.ho&&!this.lo&&(this.lo=!0,this.ho()),!zt(t))throw console.error("[swg.js]: Error occurred during meter toast handling: "+t),t}));const o=await this.si.openDialog();if(this._o(),this.fo(),await o.openView(r),this.Xt.addEventListener("click",this.co),this.Xt.addEventListener("touchstart",this.co),this.Xt.addEventListener("mousedown",this.co),this.Eo())Dt(this.Xt.document.body,"overflow","hidden");else{let t,e;this.uo=()=>{t=t||this.Xt.pageYOffset,this.Xt.clearTimeout(e),e=this.Xt.setTimeout((()=>{Math.abs(this.Xt.pageYOffset-t)>100&&this.co()}),100)},this.Xt.addEventListener("scroll",this.uo)}this.Zt.eventManager().logSwgEvent(s.IMPRESSION_METER_TOAST),this.Zt.eventManager().logSwgEvent(s.EVENT_OFFERED_METER)}setOnConsumeCallback(t){this.ho=t}removeCloseEventListener(){this.Xt.removeEventListener("click",this.co),this.Xt.removeEventListener("touchstart",this.co),this.Xt.removeEventListener("mousedown",this.co),this.Eo()?Dt(this.Xt.document.body,"overflow","visible"):this.uo&&this.Xt.removeEventListener("scroll",this.uo)}_o(){const t=this.Xt.matchMedia("(max-width: 640px), (max-height: 640px)"),e=this.si.getDialog().getElement();t.matches&&kt(e,{"box-shadow":Ts}),t.addListener((t=>{t.matches?kt(e,{"box-shadow":Ts}):kt(e,{"box-shadow":""})}))}fo(){this.Xt.matchMedia("(min-width: 640px) and (min-height: 640px)").matches&&kt(this.si.getDialog().getLoadingView().getElement(),{width:"420px",margin:"auto"})}mo(t){this.removeCloseEventListener(),this.lo=!0,t.getNative()?this.Zt.callbacks().triggerSubscribeRequest():this.Zt.callbacks().triggerOffersFlowRequest()}Eo(){return!!this.Xt.navigator.userAgent.match(/Android|iPhone|iPad|iPod|BlackBerry|IEMobile/i)}}function Os(t,e=!1){const i=Xt(t);return!(!(i.gaa_at&&i.gaa_n&&i.gaa_sig&&i.gaa_ts)||!e&&"na"===i.gaa_at||parseInt(i.gaa_ts,16)<Date.now()/1e3)}const Cs=new Set([rt.TYPE_NEWSLETTER_SIGNUP,rt.TYPE_REWARDED_SURVEY,rt.TYPE_REWARDED_AD,rt.TYPE_BYO_CTA]);class Ns{constructor(t,e,i,n,s){this.Xt=t,this._i=e,this.ae=i,this.Zt=n,this.wo=s,this.bo=null,this.To=!1,this.Io=!1,this.yo=!1,this.So=null,this.Oo=0,this.gr=null,this.entitlementsPostPromise=null,this.dr=this._i.getPublicationId(),this.Co=new Yi,this.Ke=n.storage(),this.On=n.analytics(),this.No=n.config(),this.Zt.eventManager().registerEventListener(this.vo.bind(this))}reset(t=!1){this.gr=null,this.Oo=Math.max(this.Oo,t?3:0),t&&(this.Ke.remove(Ot),this.Ke.remove(Ct))}clear(){this.gr=null,this.Oo=0,this.unblockNextNotification(),this.Ke.remove(Ot),this.Ke.remove(vt),this.Ke.remove(Ct)}async getEntitlements(t){"string"==typeof t&&(Date.now()>1600289016959&&Kt("[swg.js:getEntitlements]: If present, the first param of getEntitlements() should be an object of type GetEntitlementsParamsExternalDef."),t={encryption:{encryptedDocumentKey:t}}),this.gr||(this.gr=this.Ao(t));const e=await this.gr;return null!=e.isReadyToPay&&this.On.setReadyToPay(e.isReadyToPay),e}pushNextEntitlements(t,e){const i=this.Ro(t,!0,e);return!(!i||!i.enablesThis()||(this.Ke.set(Ot,t),0))}Po(){return Xt(this.Xt.location.search).gaa_n}xo(t){var e;if(!t||t.source!==fs)return;let i,n;if((null==(e=t.subscriptionTokenContents)?void 0:e.metering.clientType)===bs.METERED_BY_GOOGLE)n=o.SUBSCRIBE_WITH_GOOGLE_METERING_SERVICE;else{if(!Os(this.Xt.location.search))return;n=o.GOOGLE_SHOWCASE_METERING_SERVICE,i=this.Po()}this.Zt.eventManager().logSwgEvent(s.EVENT_UNLOCKED_BY_METER,!1);const a=new _;a.setSource(t.source),a.setJwt(t.subscriptionToken),this.entitlementsPostPromise=this.Lo(a,r.UNLOCKED_METER,n,i)}vo(t){var e,i,n,s;if(!Os(this.Xt.location.search,!0))return;const h=function(t){return ze[t]}(t.eventType);if(!h)return;let l=null;switch(t.eventOriginator){case a.SHOWCASE_CLIENT:l=o.PUBLISHER_ENTITLEMENT;break;case a.SWG_CLIENT:if(h==r.UNLOCKED_METER)return;l=o.GOOGLE_SUBSCRIBER_ENTITLEMENT;break;default:return}const u=this.Po(),c=null==(i=null==(e=null==t?void 0:t.additionalParameters)?void 0:e.getIsUserRegistered)?void 0:i.call(e),d=null==(s=null==(n=null==t?void 0:t.additionalParameters)?void 0:n.getSubscriptionTimestamp)?void 0:s.call(n);this.entitlementsPostPromise=this.Lo(new _,h,l,u,c,d)}async Lo(t,e,i,n="",s=null,r=null){const o=new f;o.setUsedEntitlement(t),o.setClientEventTime(xn(Date.now())),o.setEntitlementResult(e),o.setEntitlementSource(i),o.setToken(n),"boolean"==typeof s&&o.setIsUserRegistered(s),r&&o.setSubscriptionTimestamp(r);let a="/publication/".concat(encodeURIComponent(this.dr),"/article");if(a=vs(this.Xt.location,a),!this.So){const t={metering:{resource:{hashedCanonicalUrl:await this.Mo()}}};this.So=Bi(Fi(JSON.stringify(t)))}const h=await this.Ke.get(yt,!0);h&&(a=Zt(a,"sut",h)),a=Zt(a,"encodedEntitlementsParams",this.So),await this.ae.sendPost(ue(a),o)}async Mo(){return async function(t){var e;const i=null==(e=self.crypto)?void 0:e.subtle;if(!i){const t="Swgjs only works on secure (HTTPS or localhost) pages.";return Kt(t),Promise.reject(t)}return function(t){const e=[],i=new DataView(t);for(let n=0;n<i.byteLength;n+=4){const t=i.getUint32(n).toString(16);e.push(("00000000"+t).slice(-8))}return e.join("")}(await i.digest("SHA-512",Fi(t)))}(ie(this.Zt.doc()))}async Ao(t){const e=await this.Do(t);return this.Uo(e),e}async Do(t){const e=await this.Ke.get(Ot),i=await this.Ke.get(Ct),n=!(!t||!t.encryption);if(e&&!n){const t=this.Ro(e,!0,function(t){switch(t){case"true":return!0;case"false":return!1;default:return}}(i));if(t&&t.enablesThis())return this.Oo=0,t}const s=await this.Go(t);return s&&s.enablesThisWithCacheableEntitlements()&&s.raw&&this.Ke.set(Ot,s.raw),s}async getArticle(){return this.gr?(await this.gr,this.bo):null}async getExperimentConfigFlags(){const t=await this.getArticle();return this.parseArticleExperimentConfigFlags(t)}parseArticleExperimentConfigFlags(t){if(t){const e=t.experimentConfig;if(null!=e){const t=e.experimentFlags;if(null!=t)return t}}return[]}Go(t){let e=this.Oo;this.Oo=0;const i=async()=>{e--;const n=await this.mr(t);return n.enablesThis()||e<=0?n:new Promise((t=>{this.Xt.setTimeout((()=>{t(i())}),550)}))};return i()}setToastShown(t){this.Ke.set(vt,t?"1":"0")}blockNextNotification(){this.To=!0}blockNextToast(){this.Io=!0}unblockNextNotification(){this.To=!1}enableMeteredByGoogle(){this.yo=!0}parseEntitlements(t){const e=t.isReadyToPay;null==e?this.Ke.remove(Ct):this.Ke.set(Ct,String(e));const i=t.signedEntitlements,n=t.decryptedDocumentKey,s=t.swgUserToken;if(s&&this.jo(s),i){const t=this.Ro(i,!1,e,n);if(t)return t}else{const i=t.entitlements;if(i)return this.Fo("",i,e,n)}return this.Fo("",[],e)}jo(t){t&&this.Ke.set(yt,t,!0)}Ro(t,e,i,n){try{const s=this.Co.decode(t);if(e){const t=Date.now(),e=s.exp;if(1e3*parseFloat(e)<t)return null}const r=s.entitlements;return r&&this.Fo(t,r,i,n)||null}catch(s){this.Xt.setTimeout((()=>{throw s}))}return null}Fo(t,e,i,n){return new Es("subscribe.google.com",t,ws.parseListFromJson(e,this.Co),this._i.getProductId(),this.zo.bind(this),this.Bo.bind(this),i,n)}Uo(t){const e=this.To;this.To=!1;const i=this.Io;if(this.Io=!1,e)return;this.Zt.callbacks().triggerEntitlementsResponse(Promise.resolve(t)),this.wo&&t.enablesThisWithGoogleMetering()&&t.consume();const n=t.getEntitlementForThis();n?i||this.Wo(n):this.Zt.eventManager().logSwgEvent(s.EVENT_NO_ENTITLEMENTS,!1)}async Wo(t){if(t.source===fs)return this.Zt.eventManager().logSwgEvent(s.EVENT_HAS_METERING_ENTITLEMENTS,!1),Promise.resolve();const e=new w;e.setIsUserRegistered(!0),t.subscriptionTimestamp&&e.setSubscriptionTimestamp(t.subscriptionTimestamp);const i="privileged"===t.source?s.EVENT_UNLOCKED_FOR_CRAWLER:s.EVENT_UNLOCKED_BY_SUBSCRIPTION;if(this.Zt.eventManager().logSwgEvent(i,!1,e),"1"===await this.Ke.get(vt))return;const n=t.source||fs;return new Ft(this.Zt,de("/toastiframe"),pe({publicationId:this.dr,source:n})).open()}zo(t){t.getEntitlementForThis()&&this.setToastShown(!0)}Bo(t,e){var i;if(t.enablesThisWithGoogleMetering()){const n=t.getEntitlementForThis(),s=()=>{e&&e(),this.xo(n)},r=n.subscriptionTokenContents;if(!r)return s();if(!0===(null==(i=r.metering)?void 0:i.showToast)){const t=new Ss(this.Zt,{meterClientType:r.metering.clientType,meterClientUserAttribute:r.metering.clientUserAttribute});return t.setOnConsumeCallback(s),t.start()}return s()}}async mr(t){var e;const i=await this.Ke.get(yt,!0),n=await this.Ke.get(St,!1);let r="/publication/".concat(encodeURIComponent(this.dr),"/article");if(r=vs(this.Xt.location,r),r=function(t,e){const i=Xt(t.hash).rrmPromptRequested;return void 0===i?e:Zt(e,"previewConfigId",i)}(this.Xt.location,r),r=function(t,e){const i=Xt(t.hash).rrmPreviewKey;return void 0===i?e:Zt(e,"previewKey",i)}(this.Xt.location,r),(null==t?void 0:t.encryption)&&(r=Zt(r,"crypt",t.encryption.encryptedDocumentKey)),i&&(r=Zt(r,"sut",i)),this.No.publisherProvidedId?r=Zt(r,"ppid",this.No.publisherProvidedId):(null==t?void 0:t.publisherProvidedId)&&"string"==typeof t.publisherProvidedId&&t.publisherProvidedId.length>0&&(r=Zt(r,"ppid",t.publisherProvidedId)),n){const t=parseInt(n,10);if(t){const e=Math.floor((Date.now()-t)/1e3);e>=0&&(r=Zt(r,"interaction_age",e.toString()))}}r=Zt(r,"locked",String(this._i.isLocked())),r=Zt(r,"contentType",this._i.isLocked()?D.CLOSED.toString():D.OPEN.toString());const o=await this.Mo();let a=this.yo?{metering:{clientTypes:[bs.METERED_BY_GOOGLE],owner:this.dr,resource:{hashedCanonicalUrl:o}}}:void 0;if(this.dr&&(null==(e=null==t?void 0:t.metering)?void 0:e.state)&&Os(this.Xt.location.search)){const e=t.metering.state.id;if("string"==typeof e&&e.length>0){let i=function({attributes:t,category:e}){if(!t)return;const i=Object.keys(t);for(const n of i){const i="".concat(e,"_").concat(n),s=Number(t[n].timestamp),r=s>Date.now()/1e3*2;s&&!r||Kt('SwG Entitlements: Please specify a Unix timestamp, in seconds, for the "'.concat(n,'" ').concat(e," attribute. The timestamp you passed (").concat(t[n].timestamp,") looks invalid.")),a.metering.state.attributes.push({name:i,timestamp:s})}};a={metering:{clientTypes:[bs.LICENSED_BY_GOOGLE],owner:this.dr,resource:{hashedCanonicalUrl:o},state:{id:e,attributes:[]},token:this.Po()}},i({attributes:t.metering.state.standardAttributes,category:"standard"}),i({attributes:t.metering.state.customAttributes,category:"custom"})}else Kt("SwG Entitlements: Please specify a metering state ID string, ideally a hash to avoid PII.")}a&&(this.So=Bi(Fi(JSON.stringify(a))),r=Zt(r,"encodedEntitlementsParams",this.So)),r=ue(r),this.Zt.eventManager().logSwgEvent(s.ACTION_GET_ENTITLEMENTS,!1);const h=await this.ae.fetchCredentialedJson(r);this.bo=h;const l=this.bo.entitlements||{},u=h.errorMessages;if(Number(null==u?void 0:u.length)>0)for(const s of u)Kt("SwG Entitlements: "+s);return this.parseEntitlements(l)}async getAvailableInterventions(){var t,e;const i=await this.getArticle();return i?(null==(e=null==(t=i.audienceActions)?void 0:t.actions)?void 0:e.filter((t=>Cs.has(t.type))).map((t=>new ms(t,this.Zt))))||[]:(Kt("[swg.js:getAvailableInterventions] Article is null."),null)}}function vs(t,e){const i=Xt(t.hash)["swg.deventitlement"];return void 0===i?e:Zt(e,"devEnt",i)}class As{constructor(t){this.qt=t}async error(...t){await 0;const i=function(t){let e=null,i="";for(const n of t)n instanceof Error&&!e?e=Rs(n):(i&&(i+=" "),i+=n);return e?i&&(e.message=i+": "+e.message):e=new Error(i),e}(t);i.reported||(this.qt.getWin().document.createElement("img").src="".concat(e,"/swg/_/SubscribewithgoogleClientUi/jserror?error=")+encodeURIComponent(String(i))+"&script="+encodeURIComponent("".concat(e,"/swg/js/v1/swg.js"))+"&line="+(i.lineNumber||1)+"&trace="+encodeURIComponent(i.stack||""),i.reported=!0)}}function Rs(t){const e=Object.getOwnPropertyDescriptor(t,"message");if(e&&e.writable)return t;const{lineNumber:i,message:n,reported:s,stack:r}=t,o=new Error(n);return o.lineNumber=i,o.stack=r,o.reported=s,o}const Ps="swg-link";class xs{constructor(t){this.Zt=t,this.Ht=t.activities(),this._i=t.pageConfig(),this.si=t.dialogManager()}start(t={}){this.Zt.callbacks().triggerFlowStarted(Le.LINK_ACCOUNT);const e=this.Zt.config().windowOpenMode==ke.REDIRECT,i=t.ampReaderId?pe({publicationId:this._i.getPublicationId(),ampReaderId:t.ampReaderId}):pe({publicationId:this._i.getPublicationId()}),n=this.Ht.open(Ps,de("/linkbackstart"),e?"_top":"_blank",i,{});return this.Zt.eventManager().logSwgEvent(s.IMPRESSION_LINK),this.si.popupOpened(n&&n.targetWin),Promise.resolve()}}class Ls{constructor(t,e){this.Zt=t,this.Vo=e,this.ri=null,this.Yo=null,this.Xt=t.win(),this.Ht=t.activities(),this.si=t.dialogManager(),this.le=t.entitlementsManager(),this.ir=t.callbacks(),this.Vo||(this.Vo={}),this.Ko=new Promise((t=>{this.Yo=t}))}static configurePending(t){t.activities().onResult(Ps,(async function(e){t.entitlementsManager().blockNextNotification(),t.callbacks().triggerLinkProgress(),t.dialogManager().popupClosed();try{const i=await Ne(e,le(),!1,!1);t.eventManager().logSwgEvent(s.ACTION_LINK_CONTINUE,!0),t.eventManager().logSwgEvent(s.EVENT_LINK_ACCOUNT_SUCCESS),new Ls(t,i).start()}catch(i){t.entitlementsManager().unblockNextNotification(),zt(i)?(t.eventManager().logSwgEvent(s.ACTION_LINK_CANCEL,!0),t.callbacks().triggerFlowCanceled(Le.LINK_ACCOUNT)):t.eventManager().logSwgEvent(s.ACTION_LINK_CONTINUE,!0)}}))}async start(){if(this.Vo.saveAndRefresh)return this.t(this.Vo,!!this.Vo.linked),Promise.resolve();const t=this.Vo.index||"0";return this.ri=new Ae(this.Xt,this.Ht,de("/linkconfirmiframe",{},"u/"+t),pe({productId:this.Zt.pageConfig().getProductId(),publicationId:this.Zt.pageConfig().getPublicationId()}),!0),this.qo(),this.Zt.eventManager().logSwgEvent(s.EVENT_GOOGLE_UPDATED,!0),this.Zt.eventManager().logSwgEvent(s.IMPRESSION_GOOGLE_UPDATED,!0),this.si.openView(this.ri)}async qo(){try{const t=await this.ri.acceptResultAndVerify(le(),!0,!0);this.t(t,!!t.success)}catch(t){this.Xt.setTimeout((()=>{throw t}))}this.si.completeView(this.ri)}t(t,e){this.Zt.eventManager().logSwgEvent(s.ACTION_GOOGLE_UPDATED_CLOSE,!0);const i=t.swgUserToken;i&&this.Zt.storage().set(yt,i,!0),this.ir.triggerLinkComplete(),this.ir.resetLinkProgress(),this.le.setToastShown(!0),this.le.unblockNextNotification(),this.le.reset(e),this.Yo()}whenComplete(){return this.Ko}}class Ms{constructor(t,e){this.Zt=t,this.gn=e,this.Ho=null,this.ri=null,this.openPromise=null,this.Xt=t.win(),this.Ht=t.activities(),this.si=t.dialogManager()}getRequestPromise(){return this.Ho}t(){this.si.completeView(this.ri)}async $o(t){if(this.t(),!t.linked)throw Bt("not linked");this.si.popupClosed(),this.Zt.callbacks().triggerFlowStarted(Le.LINK_ACCOUNT),this.Zt.eventManager().logSwgEvent(s.EVENT_SAVE_SUBSCRIPTION_SUCCESS);const e=new Ls(this.Zt,t);return await e.start(),this.Zt.callbacks().triggerLinkProgress(),await e.whenComplete(),!0}async Jo(t){if(t&&t.getRequested())try{const t=await this.gn(),e=new T;if(null==t?void 0:t.token){if(t.authCode)throw new Error("Both authCode and token are available");e.setToken(t.token)}else{if(!(null==t?void 0:t.authCode))throw new Error("Neither token or authCode is available");e.setAuthCode(t.authCode)}return this.ri.execute(e),t}catch(e){throw this.t(),e}}async start(){const t=this.Ht.addDefaultArguments({isClosable:!0});this.ri=new Ae(this.Xt,this.Ht,de("/linksaveiframe"),t,!1,!0),this.ri.on(I,(t=>{this.Ho=this.Jo(t)})),this.openPromise=this.si.openView(this.ri,!0),this.Zt.eventManager().logSwgEvent(s.IMPRESSION_SAVE_SUBSCR_TO_GOOGLE);try{const t=await this.ri.acceptResultAndVerify(le(),!0,!0);return await this.$o(t)}catch(e){if(this.t(),zt(e))return this.Zt.eventManager().logSwgEvent(s.ACTION_SAVE_SUBSCR_TO_GOOGLE_CANCEL,!0),this.Zt.callbacks().triggerFlowCanceled(Le.LINK_ACCOUNT),!1;throw e}}}class ks{constructor(t){this.he=t.eventManager()}sendSubscriptionState(t,e){if(!He(Re,t))throw new Error("Invalid subscription state provided");if((Re.SUBSCRIBER==t||Re.PAST_SUBSCRIBER==t)&&!e)throw new Error("Entitlements must be provided for users with active or expired subscriptions");if(e&&!qe(e))throw new Error("Entitlements must be an Object");let i=null;e&&(i=JSON.stringify(e)),this.he.logEvent({eventType:s.EVENT_SUBSCRIPTION_STATE,eventOriginator:a.PUBLISHER_CLIENT,isFromUserAction:null,additionalParameters:{state:t,productsOrSkus:i}})}sendEvent(t){let e=null;if(!He(Pe,t.name)||!Ke(t.name))throw new Error("Invalid user event provided("+t.name+")");if(t.data){if(!qe(t.data))throw new Error("Event data must be an Object("+t.data+")");e=Object.assign({},e,t.data)}if(Je(t.active))e||(e={}),Object.assign(e,{is_active:t.active});else if(null!=t.active)throw new Error("Event active must be a boolean");this.he.logEvent({eventType:Ke(t.name),eventOriginator:a.PUBLISHER_CLIENT,isFromUserAction:t.active,additionalParameters:e})}}class Ds{constructor(t){this.Zt=t,this.openViewPromise=null,this.Xt=t.win(),this.Ht=t.activities(),this.si=t.dialogManager(),this.ri=new Ae(this.Xt,this.Ht,de("/loginiframe"),pe({publicationId:t.pageConfig().getPublicationId(),productId:t.pageConfig().getProductId(),userConsent:!1}),!0)}async start(){this.Zt.callbacks().triggerFlowStarted(Le.SHOW_LOGIN_NOTIFICATION),this.openViewPromise=this.si.openView(this.ri);try{await this.ri.acceptResult()}catch(t){throw this.si.completeView(this.ri),t}this.si.completeView(this.ri)}}class Us{constructor(t){this.Zt=t,this.openViewPromise=null,this.Xt=t.win(),this.Ht=t.activities(),this.si=t.dialogManager(),this.ri=new Ae(this.Xt,this.Ht,de("/loginiframe"),pe({publicationId:t.pageConfig().getPublicationId(),productId:t.pageConfig().getProductId(),userConsent:!0}),!0)}async start(){this.Zt.callbacks().triggerFlowStarted(Le.SHOW_LOGIN_PROMPT),this.openViewPromise=this.si.openView(this.ri);try{await this.ri.acceptResult()}catch(t){throw zt(t)?this.Zt.callbacks().triggerFlowCanceled(Le.SHOW_LOGIN_PROMPT):this.si.completeView(this.ri),t}this.si.completeView(this.ri)}}class Gs{constructor(t,e){this.No=t,this.ae=e}getOffers(t=this.No.getProductId()){if(!t)throw new Error("getOffers requires productId in config or arguments");return this.mr(t)}async mr(t){const e=ue("/publication/"+encodeURIComponent(this.No.getPublicationId())+"/offers?label="+encodeURIComponent(t));return(await this.ae.fetchCredentialedJson(e)).offers||[]}}class js{constructor(t,e){let i,n,s;const r=t.indexOf(":");-1!=r?(n=t,i=n.substring(0,r),s=n.substring(r+1)):(i=t,n=null,s=null),this.dr=i,this.Qo=n,this.S=s,this.Xo=e}getPublicationId(){return this.dr}getProductId(){return this.Qo}getLabel(){return this.S}isLocked(){return this.Xo}}const Fs="__SWG-SEEN__",zs=["CreativeWork","Article","NewsArticle","Blog","Comment","Course","HowTo","Message","Review","WebPage"],Bs=new RegExp(zs.join("|"));class Ws{constructor(t){this.Zo=null,this.ta=null,this.qt=rs(t),this.ea=new Promise(((t,e)=>{this.Zo=t,this.ta=e})),this.ia=new Ys(this.qt),this.na=new Ks(this.qt),this.sa=new qs(this.qt)}resolveConfig(){return Promise.resolve().then(this.check.bind(this)),this.qt.whenReady().then(this.check.bind(this)),this.ea}check(){if(!this.Zo||!this.ta)return null;const t=this.ia.check()||this.na.check()||this.sa.check();return t?(this.Zo(t),this.Zo=null,this.ta=null):this.qt.isReady()&&(this.ta("No config could be discovered in the page"),this.Zo=null,this.ta=null),Vt(t),t}}class Vs{checkValue(t,e){return!("string"!=typeof t&&!Array.isArray(t))&&this.ra(this.oa(t),e)}checkSpaceDelimitedList(t,e){const i=t.split(/\s+/);return this.ra(i,e)}ra(t,e){for(let i of t)if(i=i.replace(/^http:\/\/schema.org\//i,""),e.includes(i))return!0;return!1}oa(t){return Array.isArray(t)?t:[t]}}class Ys{constructor(t){this.qt=t}check(){if(!this.qt.getBody())return null;const t=Hs(this.qt.getRootNode(),"subscriptions-product-id");if(!t)return null;const e=Hs(this.qt.getRootNode(),"subscriptions-accessible-for-free"),i=!(!e||"false"!==e.toLowerCase());return new js(t,i)}}class Ks{constructor(t){this.qt=t,this.aa=new Vs}check(){if(!this.qt.getBody())return null;const t=this.qt.isReady(),e=Array.from(this.qt.getRootNode().querySelectorAll('script[type="application/ld+json"]'));for(let i=0;i<e.length;i++){const n=e[i];if(n[Fs]||!n.textContent||!t&&!Lt(n))continue;if(n[Fs]=!0,!Bs.test(n.textContent))continue;const s=this.ha(n);if(s)return s}return null}ha(t){let e=Wi(t.textContent);if(!e)return null;Array.isArray(e)||(e=[e]);let i=e;for(let n=0;n<i.length;n++){const t=i[n];if(t["@graph"]&&Array.isArray(t["@graph"])&&(i=i.concat(t["@graph"])),!this.aa.checkValue(t["@type"],zs))continue;let e=null;const s=this.la(t,"isPartOf");if(s)for(let i=0;i<s.length&&(e=this.ua(s[i]),!e);i++);if(!e)continue;const r=this.ca(this.da(t,"isAccessibleForFree"),!0);return new js(e,!r)}return null}ca(t,e){if("boolean"==typeof t)return t;if("string"==typeof t){const e=t.toLowerCase();if("false"===e)return!1;if("true"===e)return!0}return e}ua(t){return this.aa.checkValue(t["@type"],["Product"])?this.da(t,"productID"):null}la(t,e){const i=t[e];return null==i||""===i?null:Array.isArray(i)?i:[i]}da(t,e){const i=this.la(t,e),n=i&&i[0];return null==n||""===n?null:n}}class qs{constructor(t){this.qt=t,this.ma=null,this.Qo=null,this.aa=new Vs}_a(t){const e=t.querySelectorAll("[itemprop='isAccessibleForFree']");for(let i=0;e[i];i++){const t=e[i],n=t.getAttribute("content")||t.textContent;if(n&&this.fa(t,"alreadySeenForAccessInfo")){let t=null;return"true"===n.toLowerCase()?t=!0:"false"===n.toLowerCase()&&(t=!1),t}}return null}fa(t,e){for(let i=t;i&&!i[e];i=i.parentNode)if(i[e]=!0,i.hasAttribute&&i.hasAttribute("itemscope")&&i.hasAttribute("itemtype")){const t=i.getAttribute("itemtype");return this.aa.checkSpaceDelimitedList(t,zs)}return!1}ua(t){const e=t.querySelectorAll('[itemprop="productID"]');for(let i=0;e[i];i++){const t=e[i],n=t.getAttribute("content")||t.textContent,s=t.closest("[itemtype][itemscope]");if(!(s.getAttribute("itemtype").indexOf("http://schema.org/Product")<=-1)&&this.fa(s.parentElement,"alreadySeenForProductInfo"))return n}return null}Ea(){let t=null;return null!=this.ma?t=!this.ma:this.qt.isReady()&&(t=!1),null!=this.Qo&&null!=t?new js(this.Qo,t):null}ha(){const t=Array.prototype.slice.call(this.qt.getRootNode().querySelectorAll("[itemscope][itemtype]")).filter((t=>this.aa.checkSpaceDelimitedList(t.getAttribute("itemtype"),zs)));for(const e of t){null==this.ma&&(this.ma=this._a(e)),this.Qo||(this.Qo=this.ua(e));const t=this.Ea();if(t)return t}return null}check(){return this.qt.getBody()?this.ha():null}}function Hs(t,e){const i=t.querySelector('meta[name="'.concat(e,'"]'));return i?i.getAttribute("content"):null}const $s=on(Cn),Js=2147483647,Qs={Environment:{LOCAL:"LOCAL",PREPROD:"PREPROD",PRODUCTION:"PRODUCTION",SANDBOX:"SANDBOX",TEST:"TEST",TIN:"TIN"},PaymentMethod:{CARD:"CARD",TOKENIZED_CARD:"TOKENIZED_CARD",UPI:"UPI"},AuthMethod:{CRYPTOGRAM_3DS:"CRYPTOGRAM_3DS",PAN_ONLY:"PAN_ONLY"},ResponseStatus:{CANCELED:"CANCELED",DEVELOPER_ERROR:"DEVELOPER_ERROR"},TotalPriceStatus:{ESTIMATED:"ESTIMATED",FINAL:"FINAL",NOT_CURRENTLY_KNOWN:"NOT_CURRENTLY_KNOWN"},ButtonType:{SHORT:"short",LONG:"long"},ButtonColor:{DEFAULT:"default",BLACK:"black",WHITE:"white"},Id:{POPUP_WINDOW_CONTAINER:"popup-window-container"},STORAGE_KEY_PREFIX:"google.payments.api.storage"};
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */Qs.IS_READY_TO_PAY_RESULT_KEY=Qs.STORAGE_KEY_PREFIX+".isreadytopay.result",Qs.UPI_CAN_MAKE_PAYMENT_CACHE_KEY=Qs.STORAGE_KEY_PREFIX+".upi.canMakePaymentCache",Qs.CLASS_PREFIX="google-payments-",Qs.IFRAME_ACTIVE_CONTAINER_CLASS="".concat(Qs.CLASS_PREFIX,"activeContainer"),Qs.IFRAME_CONTAINER_CLASS="".concat(Qs.CLASS_PREFIX,"dialogContainer"),Qs.IFRAME_STYLE_CENTER_CLASS="".concat(Qs.CLASS_PREFIX,"dialogCenter"),Qs.IFRAME_STYLE_CLASS="".concat(Qs.CLASS_PREFIX,"dialog"),Qs.IFRAME_STYLE="\n.".concat(Qs.IFRAME_STYLE_CLASS," {\n    animation: none 0s ease 0s 1 normal none running;\n    background: none 0 0 / auto repeat scroll padding-box border-box #fff;\n    background-blend-mode: normal;\n    border: 0 none #333;\n    border-radius: 8px 8px 0 0;\n    border-collapse: separate;\n    bottom: 0;\n    box-shadow: #808080 0 3px 0 0, #808080 0 0 22px;\n    box-sizing: border-box;\n    letter-spacing: normal;\n    max-height: 100%;\n    overflow: visible;\n    position: fixed;\n    width: 100%;\n    z-index: ").concat(Js,";\n    -webkit-appearance: none;\n    left: 0;\n}\n@media (min-width: 480px) {\n  .").concat(Qs.IFRAME_STYLE_CLASS," {\n    width: 480px !important;\n    left: -240px !important;\n    margin-left: calc(100vw - 100vw / 2) !important;\n  }\n}\n.").concat(Qs.IFRAME_CONTAINER_CLASS," {\n  background-color: rgba(0,0,0,0.26);\n  bottom: 0;\n  height: 100%;\n  left: 0;\n  position: absolute;\n  right: 0;\n}\n.iframeContainer {\n  -webkit-overflow-scrolling: touch;\n}\n"),Qs.IFRAME_STYLE_CENTER="\n.".concat(Qs.IFRAME_STYLE_CENTER_CLASS," {\n  animation: none 0s ease 0s 1 normal none running;\n  background-blend-mode: normal;\n  background: none 0 0 / auto repeat scroll padding-box border-box #fff;\n  border-collapse: separate;\n  border-radius: 8px;\n  border: 0px none #333;\n  bottom: auto;\n  box-shadow: #808080 0 0 22px;\n  box-sizing: border-box;\n  left: -240px;\n  letter-spacing: normal;\n  margin-left: calc(100vw - 100vw / 2) !important;\n  max-height: 90%;\n  overflow: visible;\n  position: absolute;\n  top: 100%;\n  transform: scale(0.8);\n  width: 480px;\n  z-index: ").concat(Js,";\n  -webkit-appearance: none;\n}\n@media (min-height: 667px) {\n  .").concat(Qs.IFRAME_STYLE_CENTER_CLASS," {\n    max-height: 600px;\n  }\n}\n.").concat(Qs.IFRAME_ACTIVE_CONTAINER_CLASS," {\n  top: 50%;\n  transform: scale(1.0) translateY(-50%);\n}\n"),Qs.GPAY_BUTTON_WITH_CARD_INFO_IMAGE="background-image: url(https://pay.google.com/gp/p/generate_gpay_btn_img);",Qs.BUTTON_LOCALE_TO_MIN_WIDTH={en:152,bg:163,cs:192,de:183,es:183,fr:183,hr:157,id:186,ja:148,ko:137,ms:186,nl:167,pl:182,pt:193,ru:206,sk:157,sl:211,sr:146,tr:161,uk:207,zh:156},Qs.GPAY_GRAYPANE="gpay-graypane",Qs.GPAY_BUTTON_CLASS="gpay-button",Qs.BUTTON_STYLE="\n.".concat(Qs.GPAY_BUTTON_CLASS," {\n  background-origin: content-box;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: contain;\n  border: 0px;\n  border-radius: 4px;\n  box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 1px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;\n  cursor: pointer;\n  height: 40px;\n  min-height: 40px;\n  padding: 11px 24px;\n}\n\n.").concat(Qs.GPAY_BUTTON_CLASS,".black {\n  background-color: #000;\n  box-shadow: none;\n  padding: 12px 24px 10px;\n}\n\n.").concat(Qs.GPAY_BUTTON_CLASS,".white {\n  background-color: #fff;\n}\n\n.").concat(Qs.GPAY_BUTTON_CLASS,".short {\n  min-width: 90px;\n  width: 160px;\n}\n\n.").concat(Qs.GPAY_BUTTON_CLASS,".black.short {\n  background-image: url(https://www.gstatic.com/instantbuy/svg/dark_gpay.svg);\n}\n\n.").concat(Qs.GPAY_BUTTON_CLASS,".white.short {\n  background-image: url(https://www.gstatic.com/instantbuy/svg/light_gpay.svg);\n}\n\n.").concat(Qs.GPAY_BUTTON_CLASS,".black.active {\n  background-color: #5f6368;\n}\n\n.").concat(Qs.GPAY_BUTTON_CLASS,".black.hover {\n  background-color: #3c4043;\n}\n\n.").concat(Qs.GPAY_BUTTON_CLASS,".white.active {\n  background-color: #fff;\n}\n\n.").concat(Qs.GPAY_BUTTON_CLASS,".white.focus {\n  box-shadow: #e8e8e8 0 1px 1px 0, #e8e8e8 0 1px 3px;\n}\n\n.").concat(Qs.GPAY_BUTTON_CLASS,".white.hover {\n  background-color: #f8f8f8;\n}\n"),Qs.GPAY_BUTTON_WITH_OFFER_ICON_ADDITIONAL_STYLE="position: relative;",Qs.GPAY_OFFER_ICON_CLASS="gpay-offer-icon",Qs.GPAY_OFFER_ICON_SVG='<svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="gpay-offer-icon"><defs><path d="M19.41,9.58 L10.41,0.58 C10.05,0.22 9.55,0 9,0 L2,0 C0.9,0 0,0.9 0,2 L0,9 C0,9.55 0.22,10.05 0.59,10.42 L9.59,19.42 C9.95,19.78 10.45,20 11,20 C11.55,20 12.05,19.78 12.41,19.41 L19.41,12.41 C19.78,12.05 20,11.55 20,11 C20,10.45 19.77,9.94 19.41,9.58 Z" id="path-1"></path></defs><g id="buttons_10.05" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Artboard" transform="translate(-40.000000, -43.000000)"><g id="Group-3" transform="translate(40.000000, 43.000000)"><g id="Group-2-Copy-2"><g id="Group-Copy"><g id="ic_loyalty_24px"><mask id="mask-2" fill="white"><use xlink:href="#path-1"></use></mask><use id="gpay-Shape" fill="#FF6100" fill-rule="nonzero" xlink:href="#path-1"></use><path d="M3.5,5 C2.67,5 2,4.33 2,3.5 C2,2.67 2.67,2 3.5,2 C4.33,2 5,2.67 5,3.5 C5,4.33 4.33,5 3.5,5 Z" id="Path" fill="#FFFFFF" fill-rule="nonzero" mask="url(#mask-2)"></path></g></g></g><g id="Group-13-Copy-7" transform="translate(6.000000, 6.000000)" fill="#FFFFFF" fill-rule="nonzero"><g id="Group-13-Copy-2"><path d="M2.15217391,4.55172414 C0.963561082,4.55172414 1.99840144e-14,3.53278598 1.99840144e-14,2.27586207 C1.99840144e-14,1.01893816 0.963561082,6.30606678e-14 2.15217391,6.30606678e-14 C3.34078674,6.30606678e-14 4.30434783,1.01893816 4.30434783,2.27586207 C4.30434783,3.53278598 3.34078674,4.55172414 2.15217391,4.55172414 Z M2.15217391,3.31034483 C2.69245247,3.31034483 3.13043478,2.84719112 3.13043478,2.27586207 C3.13043478,1.70453302 2.69245247,1.24137931 2.15217391,1.24137931 C1.61189535,1.24137931 1.17391304,1.70453302 1.17391304,2.27586207 C1.17391304,2.84719112 1.61189535,3.31034483 2.15217391,3.31034483 Z" id="Combined-Shape"></path><path d="M6.84782609,9 C5.65921326,9 4.69565217,7.98106184 4.69565217,6.72413793 C4.69565217,5.46721402 5.65921326,4.44827586 6.84782609,4.44827586 C8.03643892,4.44827586 9,5.46721402 9,6.72413793 C9,7.98106184 8.03643892,9 6.84782609,9 Z M6.84782609,7.75862069 C7.38810465,7.75862069 7.82608696,7.29546698 7.82608696,6.72413793 C7.82608696,6.15280888 7.38810465,5.68965517 6.84782609,5.68965517 C6.30754753,5.68965517 5.86956522,6.15280888 5.86956522,6.72413793 C5.86956522,7.29546698 6.30754753,7.75862069 6.84782609,7.75862069 Z" id="Combined-Shape"></path><polygon id="Rectangle" transform="translate(4.497720, 4.541938) rotate(34.000000) translate(-4.497720, -4.541938) " points="3.77901778 -0.202295978 4.9740273 -0.171019161 5.21642263 9.28617278 4.02141311 9.25489596"></polygon></g></g></g></g></g></svg>',Qs.GPAY_OFFER_ICON_STYLE="\n.".concat(Qs.GPAY_OFFER_ICON_CLASS," {\n  position: absolute;\n  right: -5px;\n  top: -5px;\n}\n\n#ic_loyalty_24px use.hover {\n  fill: #FC853B;\n}\n"),Qs.GPAY_OFFER_DESCRIPTION_CLASS="gpay-offer-description",Qs.GPAY_OFFER_DESCRIPTION_STYLE="\n@import url(//fonts.googleapis.com/css?family=Google+Sans:500);\n.".concat(Qs.GPAY_OFFER_DESCRIPTION_CLASS," {\n  text-align: center;\n  font: 10px 'Google Sans';\n  margin-top: 2px;\n  margin-bottom: 0px;\n}\n\n.").concat(Qs.GPAY_OFFER_DESCRIPTION_CLASS,".gpay-btn-clicked {\n  color: #3C4043;\n}\n\n.").concat(Qs.GPAY_OFFER_DESCRIPTION_CLASS,".short {\n  min-width: 90px;\n  width: 160px;\n}\n\n.").concat(Qs.GPAY_OFFER_DESCRIPTION_CLASS,".long {\n  min-width: 152px;\n  width: 240px;\n}\n"),Qs.GPAY_BUTTON_CARD_INFO_CLASS="gpay-card-info-btn",Qs.GPAY_BUTTON_CARD_INFO_BUTTON_STYLE="\n  .".concat(Qs.GPAY_BUTTON_CARD_INFO_CLASS," {\n    background-origin: content-box;\n    background-position: center center;\n    background-repeat: no-repeat;\n    background-size: contain;\n    border: 0px;\n    border-radius: 4px;\n    box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 1px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;\n    cursor: pointer;\n    height: 40px;\n    min-height: 40px;\n    padding: 11px 24px;\n    background-color: #000;\n    box-shadow: none;\n    padding: 9px 24px 10px;\n    min-width: 190px;\n    width: 240px;\n  }\n\n  .").concat(Qs.GPAY_BUTTON_CARD_INFO_CLASS,".active {\n    background-color: #5f6368;\n  }\n\n  .").concat(Qs.GPAY_BUTTON_CARD_INFO_CLASS,".hover {\n    background-color: #3c4043;\n  }\n  "),Qs.TRUSTED_DOMAIN=".google.com";
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
class Xs{constructor(t){this.wa=t}postMessage(t,e){this.wa.postMessage(t,e)}}
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */let Zs=null,tr=null,er=null,ir=null,nr=Date.now(),sr=null,rr=!1,or=[];class ar{static load(){if(Zs)return;const t=window.gpayInitParams||{};er=t.environment||Qs.Environment.PRODUCTION,Zs=document.createElement("iframe"),Zs.src=ar.ba(window.location.origin,t.merchantInfo&&t.merchantInfo.merchantId),ar.postMessage({eventType:15,clientLatencyStartMs:Date.now()}),Zs.height="0",Zs.width="0",Zs.style.display="none",Zs.style.visibility="hidden",Zs.onload=function(){ar.postMessage({eventType:17,clientLatencyStartMs:Date.now()}),ar.iframeLoaded()},document.body?ar.Ta():document.addEventListener("DOMContentLoaded",(()=>ar.Ta()))}static Ta(){document.body.appendChild(Zs),tr=new Xs(Zs.contentWindow)}static sendAndWaitForResponse(t,e,i,n){ar.Ia((function t(e){e.data[i]&&(n(e),ar.ya(t))}));const s=Object.assign({eventType:e},t);ar.postMessage(s)}static Ia(t){window.addEventListener("message",t)}static ya(t){window.removeEventListener("message",t)}static postMessage(t){if(!rr)return void or.push(t);const e=Object.assign({buyFlowActivityMode:sr,googleTransactionId:ir,originTimeMs:nr},t);tr.postMessage(e,ar.Sa())}static setBuyFlowActivityMode(t){sr=t}static setGoogleTransactionId(t){ir=t}static setOriginTimeMs(t){nr=t}static setPostMessageService(t){tr=t}static reset(){Zs=null,or.length=0,rr=!1,sr=null}static setIframeLoaded(t){rr=t}static iframeLoaded(){rr=!0,or.forEach((function(t){ar.postMessage(t)})),or.length=0}static getBuffer(){return or}static injectIframeForTesting(){ar.reset(),Zs=document.createElement("p"),ar.iframeLoaded()}static Sa(){let t="https://pay";return er==Qs.Environment.SANDBOX?t+=".sandbox":er==Qs.Environment.PREPROD&&(t+="-preprod.sandbox"),t+".google.com"}static ba(t,e){return"https://pay".concat(er==Qs.Environment.PREPROD?"-preprod.sandbox":er==Qs.Environment.SANDBOX?".sandbox":"",".google.com/gp/p/ui/payframe?origin=").concat(t,"&mid=%{merchantId}")}}
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */class hr{constructor(t){this.Oa=t,this.gn=null}onResult(t){this.gn=t}isReadyToPay(t){const e=this.Ca(t);return new Promise(((i,n)=>{e.canMakePayment().then((e=>{window.sessionStorage.setItem(Qs.IS_READY_TO_PAY_RESULT_KEY,e.toString());const n={result:e};t.apiVersion>=2&&t.existingPaymentMethodRequired&&(n.paymentMethodPresent=e),i(n)})).catch((function(t){window.sessionStorage.getItem(Qs.IS_READY_TO_PAY_RESULT_KEY)?i({result:"true"==window.sessionStorage.getItem(Qs.IS_READY_TO_PAY_RESULT_KEY)}):i({result:!1})}))}))}prefetchPaymentData(t){this.Ca(t,this.Oa,t.transactionInfo.currencyCode,t.transactionInfo.totalPrice)}loadPaymentData(t){this.Na(t)}Ca(t,e,i,n){let s={};return t&&(s=JSON.parse(JSON.stringify(t))),s.apiVersion||(s.apiVersion=1),s.swg&&(s.allowedPaymentMethods=[Qs.PaymentMethod.CARD]),e&&e==Qs.Environment.TEST&&(s.environment=e),new PaymentRequest([{supportedMethods:["https://google.com/pay"],data:s}],{total:{label:"Estimated Total Price",amount:{currency:i||"USD",value:n||"0"}}})}Na(t){const e=t.transactionInfo&&t.transactionInfo.currencyCode||void 0,i=t.transactionInfo&&t.transactionInfo.totalPrice||void 0,n=this.Ca(t,this.Oa,e,i);this.gn(n.show().then((t=>(t.complete("success"),t.details))).catch((function(t){throw t.statusCode=Qs.ResponseStatus.CANCELED,t})))}}
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */class lr{constructor(t){this.qt=t,this.va=t.createElement(Qs.GPAY_GRAYPANE),ur(this.va,{"z-index":2147483647,display:"none",position:"fixed",top:0,right:0,bottom:0,left:0,"background-color":"rgba(32, 33, 36, .6)"}),this.Aa=null,this.va.addEventListener("click",(()=>{if(this.Aa)try{this.Aa.focus()}catch(t){}}))}show(t){return this.Aa=t||null,this.qt.body.appendChild(this.va),ur(this.va,{display:"block",opacity:0}),cr(this.va,{opacity:1},300,"ease-out")}hide(){if(this.Aa=null,this.va.parentElement)return cr(this.va,{opacity:0},300,"ease-out").then((()=>{ur(this.va,{display:"none"}),this.qt.body.removeChild(this.va)}))}}function ur(t,e){for(const i in e)t.style.setProperty(i,e[i].toString(),"important")}function cr(t,e,i,n){const s=t.ownerDocument.defaultView,r=t.style.transition||"";return new Promise((r=>{s.setTimeout((()=>{s.setTimeout(r,i);const o="".concat(i,"ms ").concat(n);ur(t,Object.assign({transition:"transform ".concat(o,", opacity ").concat(o)},e))}))})).then((()=>{ur(t,Object.assign({transition:r},e))}))}
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */function dr(){if(-1!=window.navigator.userAgent.indexOf("OPR/"))return!1;const t=window.navigator.userAgent.match(/Android/i),e=window.navigator.userAgent.match(/Chrome\/([0-9]+)\./i);return null!=t&&"PaymentRequest"in window&&"Google Inc."==window.navigator.vendor&&null!=e&&Number(e[1])>=59}function pr(t){if(t.apiVersion>=2){const e=Tr(t);if(e&&1==e.length&&e[0]==Qs.AuthMethod.CRYPTOGRAM_3DS)return!0}return 1==t.allowedPaymentMethods.length&&t.allowedPaymentMethods[0]==Qs.PaymentMethod.TOKENIZED_CARD}function gr(t,e){if(t.apiVersion>=2){const i=Tr(t);return!(!i||!i.includes(e))}return!1}function mr(){return window.location.hostname.endsWith(Qs.TRUSTED_DOMAIN)||void 0===window.isSecureContext||window.isSecureContext?null:"Google Pay APIs should be called in secure context!"}function fr(t){return Object.values(Qs.PaymentMethod).includes(t)}function Er(t){return Object.values(Qs.AuthMethod).includes(t)}function wr(t){if(!t)return"paymentDataRequest must be set!";if(t.swg)return(e=t.swg)?e.skuId&&e.publicationId?null:"Both skuId and publicationId must be provided":"Swg parameters must be provided";var e;if(!t.transactionInfo)return"transactionInfo must be set!";if(!t.transactionInfo.currencyCode)return"currencyCode in transactionInfo must be set!";if(!t.transactionInfo.totalPriceStatus||!Object.values(Qs.TotalPriceStatus).includes(t.transactionInfo.totalPriceStatus))return"totalPriceStatus in transactionInfo must be set to one of NOT_CURRENTLY_KNOWN, ESTIMATED or FINAL!";if("NOT_CURRENTLY_KNOWN"!==t.transactionInfo.totalPriceStatus&&!t.transactionInfo.totalPrice)return"totalPrice in transactionInfo must be set when totalPriceStatus is ESTIMATED or FINAL!";const i=br(t);if(i){if(!i.parameters)return"parameters must be set in allowedPaymentMethod!";var n=i.parameters;if(!n.payeeVpa)return"payeeVpa in allowedPaymentMethod parameters must be set!";if(!n.payeeName)return"payeeName in allowedPaymentMethod parameters must be set!";if(!n.referenceUrl)return"referenceUrl in allowedPaymentMethod parameters must be set!";if(!n.mcc)return"mcc in allowedPaymentMethod parameters must be set!";if(!n.transactionReferenceId)return"transactionReferenceId in allowedPaymentMethod parameters must be set!";if("INR"!==t.transactionInfo.currencyCode)return"currencyCode in transactionInfo must be set to INR!";if("FINAL"!==t.transactionInfo.totalPriceStatus)return"totalPriceStatus in transactionInfo must be set to FINAL!";if(!t.transactionInfo.transactionNote)return"transactionNote in transactionInfo must be set!"}return null}function br(t){return!dr()||t.apiVersion<2||!t.allowedPaymentMethods?null:Ir(t,Qs.PaymentMethod.UPI)}function Tr(t){if(t.allowedPaymentMethods){const e=Ir(t,Qs.PaymentMethod.CARD);if(e&&e.parameters)return e.parameters.allowedAuthMethods}return null}function Ir(t,e){for(var i=0;i<t.allowedPaymentMethods.length;i++){const n=t.allowedPaymentMethods[i];if(n.type==e)return n}return null}
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
const{ActivityPort:yr,ActivityPorts:Sr,ActivityIframePort:Or}=$s,Cr="GPAY",Nr="height ".concat(250,"ms"),vr="Safari";class Ar{constructor(t,e,i,n,s){this.Oa=t,this.activities=n||new Sr(window),this.Cr=new lr(window.document),this.gn=null,this.Ra=null,this.Pa=!1,this.Xe=null,this.xa=null,this.La=e,this.Ma=s||null,this.ka=null}onResult(t){this.gn||(this.gn=t,this.activities.onResult(Cr,this.Da.bind(this)))}Da(t){this.Cr.hide(),this.gn(t.acceptResult().then((t=>{if(t.origin!=this.Ua())throw new Error("channel mismatch");const e=t.data;if(e.redirectEncryptedCallbackData)return ar.setBuyFlowActivityMode(3),this.Ga(e.redirectEncryptedCallbackData).then((t=>{const i=Object.assign({},e);return delete i.redirectEncryptedCallbackData,Object.assign(i,t)}));if(!t.originVerified||!t.secureChannel)throw new Error("channel mismatch");return e}),(t=>{const e=t.message;let i=t.message;try{i=JSON.parse(e.substring(7))}catch(n){}return i.statusCode&&-1==["DEVELOPER_ERROR","MERCHANT_ACCOUNT_ERROR"].indexOf(i.statusCode)&&(i={statusCode:"CANCELED"}),"AbortError"==i&&(i={statusCode:"CANCELED"}),Promise.reject(i)})))}Ga(t){return new Promise(((e,i)=>{const n=this.Fa(),s=new XMLHttpRequest;s.open("POST",n,!0),"withCredentials"in s&&(s.withCredentials=!0),s.onreadystatechange=()=>{if(!(s.readyState<2)){if(s.status<100||s.status>599)return s.onreadystatechange=null,void i(new Error("Unknown HTTP status ".concat(s.status)));if(4==s.readyState)try{e(JSON.parse(s.responseText))}catch(t){i(t)}}},s.onerror=()=>{i(new Error("Network failure"))},s.onabort=()=>{i(new Error("Request aborted"))},s.send(t)}))}isReadyToPay(t){return new Promise(((e,i)=>{if(pr(t))return void e({result:!1});const n=window.navigator.userAgent;if(n.indexOf("GSA/")>0&&n.indexOf(vr)>0)return void e({result:!1});if(n.indexOf("FxiOS")>0)return void e({result:!1});const s=n.indexOf("Chrome")>0||n.indexOf("Firefox")>0||n.indexOf(vr)>0;s&&t.apiVersion>=2&&t.existingPaymentMethodRequired?(t.environment=this.Oa,ar.sendAndWaitForResponse(t,6,"isReadyToPayResponse",(i=>{const n={result:s};t.existingPaymentMethodRequired&&(n.paymentMethodPresent="READY_TO_PAY"==i.data.isReadyToPayResponse),e(n)}))):e({result:s})}))}prefetchPaymentData(t){}loadPaymentData(t){t.swg||t.apiVersion||(t.apiVersion=1),t.environment=this.Oa,ar.setBuyFlowActivityMode(t.forceRedirect?3:2);const e=this.activities.open(Cr,this.za(),this.Ba(t),t,{width:600,height:600});this.Cr.show(e&&e.targetWin)}Ba(t){return t.forceRedirect?"_top":"gp-js-popup"}Ua(){if(this.Oa==Qs.Environment.LOCAL)return"";let t;return t=this.Oa==Qs.Environment.PREPROD?"pay-preprod.sandbox":this.Oa==Qs.Environment.SANDBOX?"pay.sandbox":"pay","https://"+t+".google.com"}Wa(){return this.Ua()+"/gp/p"}Fa(){let t=this.Wa()+"/apis/buyflow/process";return this.Ma&&(t+="?rk="+encodeURIComponent(this.Ma)),t}za(){return this.Oa==Qs.Environment.TIN?"/ui/pay":this.Wa()+"/ui/pay?swg=true"}getIframeUrl(t,e){let i="https://pay.google.com/gp/p/ui/pay?origin=".concat(e,"&swg=true");return t!=Qs.Environment.SANDBOX&&t!=Qs.Environment.PREPROD||(i="https://pay'+  (environment == Constants.Environment.PREPROD ? '-preprod' : '')+  '.sandbox.google.com/gp/p/ui/pay?origin=".concat(e,"&swg=true")),i}Va(t,e){this.Ya(e,"all 250ms ease 0s"),e.height="0px",setTimeout((()=>{t.parentNode&&t.parentNode.removeChild(t)}),250)}Ka(t){const e=function(t){const e=document.createElement("div");e.classList.add(Qs.IFRAME_CONTAINER_CLASS);const i=document.createElement("div");i.classList.add("iframeContainer");const n=document.createElement("iframe");return n.classList.add(t),n.setAttribute("frameborder","0"),n.setAttribute("scrolling","no"),i.appendChild(n),e.appendChild(i),document.body.appendChild(e),{container:e,iframe:n}}(this.qa(t)?Qs.IFRAME_STYLE_CENTER_CLASS:Qs.IFRAME_STYLE_CLASS),i=e.iframe,n=e.container;return n.addEventListener("click",this.Ha.bind(this,e)),n.style.display="none",i.style.display="none",i.height="0px",this.Ya(i,"all 250ms ease 0s"),this.Pa=!1,e}$a(t){this.Ja(t)}Ha(t){t.container.parentNode&&history.back()}Ja(t){t.container.parentNode&&(this.xa(Promise.reject({errorCode:"CANCELED"})),this.Va(t.container,t.iframe),this.Xe&&this.Xe.disconnect())}qa(t){return null}Qa(t,e,i){t.style.display="block",e.style.display="block",setTimeout((()=>{e.height="280px",this.qa(i)&&e.classList.add(Qs.IFRAME_ACTIVE_CONTAINER_CLASS),setTimeout((()=>{this.Pa=!0,this.ka&&(this.Ya(e,this.ka.transition),e.height=this.ka.height,this.ka=null)}),250)}),1)}Ya(t,e){t.style.setProperty("transition",e),t.style.setProperty("-webkit-transition",e)}Xa(t,e,i){let n;i.swg||i.apiVersion||(i.apiVersion=1),i.environment=this.Oa;const s=this.getIframeUrl(this.Oa,window.location.origin);return this.activities.openIframe(e,s,i).then((t=>(this.Xe=t,t.onMessage((t=>{"resize"===t.type&&this.Pa?(n||(n=Date.now()),Date.now()<n+250?this.Ya(e,t.transition+", "+Nr):this.Ya(e,t.transition),e.height=t.height):this.ka={height:t.height,transition:t.transition}})),t.acceptResult()))).then((i=>(this.Va(t,e),history.back(),i.data)),(i=>(this.Va(t,e),history.back(),Promise.reject(i))))}}
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */class Rr{constructor(){}isUpiRequest(t){return!!br(t)}isReadyToPay(t){if(br(t))return t.existingPaymentMethodRequired?Promise.resolve({result:!0,paymentMethodPresent:!0}):Promise.resolve({result:!0});throw new Error("No Upi payment method found in handler")}loadPaymentData(t,e,i){const n=e.parameters,s=t.transactionInfo,r=[{supportedMethods:["https://tez.google.com/pay"],data:{pa:n.payeeVpa,pn:n.payeeName,tr:n.transactionReferenceId,url:n.referenceUrl,mc:n.mcc,tn:s.transactionNote}}];n.transactionId&&(r[0].data.tid=n.transactionId);const o={total:{label:"Total",amount:{currency:s.currencyCode,value:s.totalPrice}},displayItems:[{label:"Original Amount",amount:{currency:s.currencyCode,value:s.totalPrice}}]};let a=new PaymentRequest(r,o);i(this.Za(a).then((t=>t?this.eh(a):this.ih())).then((i=>this.nh(i,t,e))).catch((t=>(t.statusCode=Qs.ResponseStatus.CANCELED,Promise.reject(t)))))}eh(t){return t.show().then((t=>(t.complete("success"),t.details)))}Za(t){const e=window.sessionStorage.getItem(Qs.UPI_CAN_MAKE_PAYMENT_CACHE_KEY);return e?Promise.resolve("true"===e):t.canMakePayment?t.canMakePayment().then((t=>(t&&window.sessionStorage.setItem(Qs.UPI_CAN_MAKE_PAYMENT_CACHE_KEY,t.toString()),t))):Promise.resolve(!0)}ih(){return window.location.replace("https://play.google.com/store/apps/details?id=com.google.android.apps.nbu.paisa.user"),Promise.reject({errorMessage:"Cannot redirect to Tez page in Google Play."})}nh(t,e,i){const n=JSON.parse(t.tezResponse);if("FAILURE"===n.Status){let t;switch(n.responseCode){case"ZM":t={errorCode:3,errorMessage:"Payment failure due to invalid MPIN."};break;case"Z9":t={errorCode:3,errorMessage:"Payment failure due to insufficient funds."};break;case"91":t={errorCode:1,errorMessage:"Payment failure due to transaction timeout or connection issue."};break;default:t={errorMessage:"Payment cancelled."}}return Promise.reject(t)}const s={paymentMethodType:"UPI",payeeVpa:i.parameters.payeeVpa,status:n.Status,transactionReferenceId:i.parameters.transactionReferenceId,transactionId:i.parameters.transactionId?i.parameters.transactionId:n.txnId,transactionInfo:e.transactionInfo};let r={apiVersion:e.apiVersion,apiVersionMinor:e.apiVersionMinor,paymentMethodData:{type:i.type,tokenizationData:{type:"DIRECT",token:{protocolVersion:"ECv1",signature:"",signedMessage:s}}}};return Promise.resolve(r)}}
/** @license
  Math.uuid.js (v1.4)
  http://www.broofa.com
  mailto:robert@broofa.com
  Copyright (c) 2010 Robert Kieffer
  Dual licensed under the MIT and GPL licenses.
  */class Pr{}var xr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");Pr.uuid=function(t,e){var i,n,s=xr,r=[];if(e=e||s.length,t)for(i=0;i<t;i++)r[i]=s[0|Math.random()*e];else for(r[8]=r[13]=r[18]=r[23]="-",r[14]="4",i=0;i<36;i++)r[i]||(n=0|16*Math.random(),r[i]=s[19==i?3&n|8:n]);return r.join("")},Pr.uuidFast=function(){for(var t,e=xr,i=new Array(36),n=0,s=0;s<36;s++)8==s||13==s||18==s||23==s?i[s]="-":14==s?i[s]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),t=15&n,n>>=4,i[s]=e[19==s?3&t|8:t]);return i.join("")},Pr.uuidCompact=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))};
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
const Lr=["actions.google.com","amp-actions.sandbox.google.com","amp-actions-staging.sandbox.google.com","amp-actions-autopush.sandbox.google.com","payments.developers.google.com","payments.google.com"];class Mr{constructor(t,e,i,n){
/**
   * @license
   * Copyright 2018 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
var s;this.sh=e,function(t){if(t.environment&&!Object.values(Qs.Environment).includes(t.environment))throw new Error("Parameter environment in PaymentOptions can optionally be set to PRODUCTION, otherwise it defaults to TEST. "+t.environment)}(t),this.rh=null,this.Oa=t.environment||Qs.Environment.TEST,Mr.La||(Mr.La=this.oh()&&t.i&&t.i.googleTransactionId?t.i.googleTransactionId:(s=this.Oa,Pr.uuidFast()+"."+s)),this.ah=t,this.hh=new Ar(this.Oa,Mr.La,i,n,t.i&&t.i.redirectKey),this.lh=5;const r=dr();this.uh=r&&!i?new hr(this.Oa):this.hh,this.dh=new Rr,this.hh.onResult(this.ph.bind(this)),this.uh.onResult(this.ph.bind(this)),ar.load(),r&&ar.setBuyFlowActivityMode(4),ar.setGoogleTransactionId(Mr.La),ar.postMessage({eventType:9,clientLatencyStartMs:Date.now()}),window.addEventListener("message",(t=>this.gh(t)))}isReadyToPay(t){t&&(t=Object.assign({},this.ah,t));const e=Date.now(),i=mr()||function(t){if(!t)return"isReadyToPayRequest must be set!";if(t.apiVersion>=2){if(!("apiVersionMinor"in t))return"apiVersionMinor must be set!";if(!t.allowedPaymentMethods||!Array.isArray(t.allowedPaymentMethods)||0==t.allowedPaymentMethods.length)return"for v2 allowedPaymentMethods must be set to an array containing a list of accepted payment methods";for(var e=0;e<t.allowedPaymentMethods.length;e++){let s=t.allowedPaymentMethods[e];if(s.type==Qs.PaymentMethod.CARD){if(!s.parameters)return"Field parameters must be setup in each allowedPaymentMethod";var i=s.parameters.allowedCardNetworks;if(!i||!Array.isArray(i)||0==i.length)return"allowedCardNetworks must be setup in parameters for type CARD";var n=s.parameters.allowedAuthMethods;if(!n||!Array.isArray(n)||0==n.length||!n.every(Er))return"allowedAuthMethods must be setup in parameters for type 'CARD'  and must contain 'CRYPTOGRAM_3DS' and/or 'PAN_ONLY'"}}return null}return t.allowedPaymentMethods&&Array.isArray(t.allowedPaymentMethods)&&0!=t.allowedPaymentMethods.length&&t.allowedPaymentMethods.every(fr)?null:"allowedPaymentMethods must be set to an array containing 'CARD' and/or 'TOKENIZED_CARD'!"}(t);if(i)return new Promise(((t,e)=>{Mr.mh("isReadyToPay",i),ar.postMessage({eventType:0,error:2}),e({statusCode:Qs.ResponseStatus.DEVELOPER_ERROR,statusMessage:i})}));const n=this._h(t);return n.then((t=>(ar.postMessage({eventType:0,clientLatencyStartMs:e,isReadyToPayApiResponse:t}),t))),n}_h(t){if(this.dh.isUpiRequest(t))return this.dh.isReadyToPay(t);if(dr()&&!kr(t)){if(t.apiVersion>=2)return this.fh(t);{const e=this.hh.isReadyToPay(t),i=this.uh.isReadyToPay(t);return pr(t)?i:i.then((()=>e))}}return this.hh.isReadyToPay(t)}fh(t){let e=Promise.resolve({result:!1});t.existingPaymentMethodRequired&&(e=Promise.resolve({result:!1,paymentMethodPresent:!1}));let i=e;if(gr(t,Qs.AuthMethod.CRYPTOGRAM_3DS)){const e=JSON.parse(JSON.stringify(t));for(let t=0;t<e.allowedPaymentMethods.length;t++)e.allowedPaymentMethods[t].type==Qs.PaymentMethod.CARD&&(e.allowedPaymentMethods[t].parameters.allowedAuthMethods=[Qs.AuthMethod.CRYPTOGRAM_3DS]);i=this.uh.isReadyToPay(e)}let n=e;return gr(t,Qs.AuthMethod.PAN_ONLY)&&(n=this.hh.isReadyToPay(t)),i.then((t=>1==(t&&t.result)?t:n))}prefetchPaymentData(t){const e=mr()||wr(t);e?Mr.mh("prefetchPaymentData",e):(this.Eh(t),dr()&&!kr(t)?this.uh.prefetchPaymentData(t):this.hh.prefetchPaymentData(t))}loadPaymentData(t){ar.postMessage({eventType:5});const e=mr()||wr(t);if(this.lh=t&&t.swg?6:5,e)return void this.sh(new Promise(((t,i)=>{ar.postMessage({eventType:1,error:2,buyFlowMode:this.lh}),Mr.mh("loadPaymentData",e),i({statusCode:Qs.ResponseStatus.DEVELOPER_ERROR,statusMessage:e})})));const i=br(t);i?this.dh.loadPaymentData(t,i,this.ph.bind(this)):(this.rh=Date.now(),this.Eh(t),kr(t)?this.hh.loadPaymentData(t):this.uh.loadPaymentData(t))}static mh(t,e){console.error("DEVELOPER_ERROR in "+t+" : "+e)}createButton(t={}){const e=Date.now();return ar.postMessage({eventType:2,clientLatencyStartMs:e}),null}gh(t){this.oh()&&"logPaymentData"===t.data.name&&ar.postMessage(t.data.data)}oh(){return-1!=Lr.indexOf(window.location.hostname)}ph(t){t.then((t=>{ar.postMessage({eventType:1,clientLatencyStartMs:this.rh,buyFlowMode:this.lh})})).catch((t=>{t.errorCode?ar.postMessage({eventType:1,error:t.errorCode,buyFlowMode:this.lh}):ar.postMessage({eventType:1,error:6,buyFlowMode:this.lh})})),this.sh(t)}Eh(t){const e={startTimeMs:Date.now(),googleTransactionId:Mr.La};return t.i=t.i?Object.assign(e,t.i):e,t}}function kr(t){return!0===(t.i&&t.i.disableNative)}class Dr{constructor(t){this.qt=t}preconnect(t){this.wh(t,"preconnect")}prefetch(t){this.wh(t,"preconnect prefetch")}wh(t,e){const i=Rt(this.qt,"link",{rel:e,href:t});this.qt.head.appendChild(i)}}class Ur{constructor(t){this.bh=null,this.Vo=null,this.Th=null,this.Ih=null,this.Xt=t.win(),this.Ht=t.activities(),this.yh=t.analytics(),this.Sh=new Gr(this.Xt),this.Oh=new Dr(this.Xt.document),this.Ch()&&(this.preconnect(this.Oh),this.Nh()),this.Sh.prepare(),this.he=t.eventManager()}Ah(t,e,i){return Mr.La=e,new Mr(t,i,!1,this.Ht.getOriginalWebActivityPorts())}preconnect(t){t.prefetch("https://payments.google.com/payments/v4/js/integrator.js?ss=md"),t.prefetch("https://clients2.google.com/gr/gr_full_2.0.6.js")}Nh(){this.bh=this.Ah({environment:he().payEnv,i:{redirectKey:this.Sh.restoreKey()}},this.yh.getTransactionId(),this.Rh.bind(this))}Ch(){const t=this.Xt.location.hash,e=/redirectEncryptedCallbackData/.test(t),i=/swgRequest/.test(t);return e&&i}getType(){return"PAYJS"}start(t,e={}){let i;this.Ih=t,this.bh||(this.preconnect(this.Oh),this.Nh()),e.forceRedirect&&(t.forceRedirect=!0),jr(t,"disableNative",!0),jr(t,"disableNgbf",!0);const n=new Promise((t=>{i=t}));return this.Sh.useVerifier((async n=>{n&&jr(t,"redirectVerifier",n),e.forceRedirect&&(await this.he.getReadyPromise(),await this.yh.getLoggingPromise()),this.bh.loadPaymentData(t),i(!0)})),n}async onResponse(t){this.Th=t,this.Vo&&(await 0,t(this.Ph(this.Vo,this.Ih)))}Rh(t){this.Vo=t,this.Th&&this.Th(this.Ph(this.Vo,this.Ih))}async Ph(t,e){try{const i=await t;return e&&(i.paymentRequest=e),i}catch(i){const t=i;if("object"==typeof t&&"CANCELED"===t.statusCode){const t=Bt("Cancelled");throw t.productType=e?e.i.productType:null,t}throw t}}}class Gr{constructor(t){this.Xt=t,this.xh=null,this.Lh=null}prepare(){return this.Mh((()=>{}))}useVerifier(t){this.Mh((e=>{if(e)try{this.Xt.localStorage.setItem(Nt,e.key)}catch(i){e=null}t(e&&e.verifier||null)}))}restoreKey(){try{return this.Xt.localStorage&&this.Xt.localStorage.getItem(Nt)||null}catch(t){return null}}async Mh(t){this.xh||(this.kh()?(this.xh=this.Dh(),this.Lh=await this.xh):(this.xh=Promise.resolve(null),this.Lh=null)),t(this.Lh)}kh(){let t;try{t=!!this.Xt.localStorage}catch(i){return!1}const e=this.Xt.crypto;return!!(t&&e&&e.subtle&&e.subtle.digest)}async Dh(){const t=this.Xt.crypto;try{const e=new Uint8Array(16);t.getRandomValues(e);const i=btoa(Gi(e)),n=await t.subtle.digest({name:"SHA-384"},Ui(i));return{key:i,verifier:btoa(Gi(new Uint8Array(n)))}}catch(e){return null}}}function jr(t,e,i){t.i=Object.assign(t.i||{},{[e]:i})}var Fr=(t=>(t.GENERAL="general",t.PAYWALL="paywall",t))(Fr||{});class zr{constructor(t,e,i){this.Xt=t,this.Zt=e,this.ae=i,this.Uh=null,this.Gh=1,this.dr=this.Zt.pageConfig().getPublicationId(),this.Zt.eventManager().registerEventListener(this.qe.bind(this))}jh(){return this.Xt.document.cookie}Fh(){if(!this.Uh){const t=this.jh().match("(^|;)\\s*__gads\\s*=\\s*([^;]+)");this.Uh=t&&encodeURIComponent(t.pop())}return this.Uh}Bh(t){t=Zt(t,"u_tz","240"),t=Zt(t,"v",String(this.Gh));const e=this.Fh();return e&&(t=Zt(t,"cookie",e)),Zt(t,"cdm",this.Xt.location.hostname)}sendSubscriptionState(t,e){let i=ce("/subopt/data");return i=Zt(i,"states",this.dr+":"+t),e&&(i=Zt(i,"extrainfo",e)),this.ae.fetch(this.Bh(i),{method:"GET",credentials:"include"})}Wh(t,e){let i=ce("/subopt/data");return i=Zt(i,"events",this.dr+":"+t),e&&(i=Zt(i,"extrainfo",e)),this.ae.fetch(this.Bh(i),{method:"GET",credentials:"include"})}qe(t){if(t.eventOriginator===a.SHOWCASE_CLIENT)return;if(!this.Zt.config().enablePropensity&&t.eventOriginator!==a.PROPENSITY_CLIENT)return;let e=t.additionalParameters;if(t.eventType===s.EVENT_SUBSCRIPTION_STATE)return void this.sendSubscriptionState(e.state,e.productsOrSkus);const i=(n=t.eventType)&&je[n]||null;var n;null!=i&&(e instanceof w&&(e=void 0),Je(t.isFromUserAction)&&(qe(e)||(e={}),e.is_active=t.isFromUserAction),this.Wh(i,JSON.stringify(e)))}Vh(t){if(!t.header)return{header:{ok:!1},body:{error:"No valid response"}};if(t.header.ok){let e=null;const i=t.scores,n=[];for(let t=0;t<i.length;t++){const s=i[t];let r;if(s.score){const t={value:s.score,bucketed:2==s.score_type};r={product:s.product,score:t}}else r={product:s.product,error:s.error_message};n.push(r),e={header:{ok:!0},body:{scores:n}}}return e}return{header:{ok:!1},body:{error:t.error}}}async getPropensity(t,e){const i=ce("/subopt/pts?products=")+this.dr+"&type="+e+"&ref="+t,n=await this.ae.fetch(this.Bh(i),{method:"GET",credentials:"include"}),s=await n.json();return this.Vh(s)}}class Br{constructor(t,e,i){this.Xt=t,this.Yh=new zr(t,e,i),this.he=e.eventManager()}sendSubscriptionState(t,e){if(!Object.values(Re).includes(t))throw new Error("Invalid subscription state provided");if((Re.SUBSCRIBER==t||Re.PAST_SUBSCRIBER==t)&&!e)throw new Error("Entitlements must be provided for users with active or expired subscriptions");if(e&&!qe(e))throw new Error("Entitlements must be an Object");let i=null;e&&(i=JSON.stringify(e)),this.Yh.sendSubscriptionState(t,i)}getPropensity(t){if(t&&!Object.values(Fr).includes(t))throw new Error("Invalid propensity type requested");return t||(t=Fr.GENERAL),this.Yh.getPropensity(this.Xt.document.referrer,t)}sendEvent(t){const e=Ke(t.name);let i=null;if(!He(Pe,t.name)||!e)throw new Error("Invalid user event provided("+t.name+")");if(t.data){if(!qe(t.data))throw new Error("Event data must be an Object("+t.data+")");i={},Object.assign(i,t.data)}if(Je(t.active))i||(i={}),Object.assign(i,{is_active:t.active});else if(null!=t.active)throw new Error("Event active must be a boolean");this.he.logEvent({eventType:e,eventOriginator:a.PROPENSITY_CLIENT,isFromUserAction:t.active,additionalParameters:i})}}class Wr{constructor(t){this.Zt=t,this.Kh=()=>{},this.Ht=t.activities(),this.Xt=t.win(),this._i=t.pageConfig(),this.si=t.dialogManager()}async start(t){const{publisherProvidedId:e}=t;if(!e)throw new Error("Missing required field: publisherProvidedId");const i=pe({publicationId:this._i.getPublicationId()}),n=new Ae(this.Xt,this.Ht,de("/linksaveiframe",{subscriptionLinking:"true",ppid:e}),i,!1);n.onCancel((()=>{const t=s.ACTION_SUBSCRIPTION_LINKING_CLOSE;this.Zt.eventManager().logSwgEvent(t,!0),this.Kh({publisherProvidedId:e,success:!1})})),n.on(C,(t=>{var e;const i=t.getSuccess()?s.EVENT_SUBSCRIPTION_LINKING_SUCCESS:s.EVENT_SUBSCRIPTION_LINKING_FAILED;this.Zt.eventManager().logSwgEvent(i),this.Kh({publisherProvidedId:t.getPublisherProvidedId(),success:null!=(e=t.getSuccess())&&e})}));const r=new Promise((t=>{this.Kh=t}));try{return this.Zt.eventManager().logSwgEvent(s.IMPRESSION_SUBSCRIPTION_LINKING_LOADING),await this.si.openView(n,!1,{desktopConfig:{isCenterPositioned:!1}}),this.Zt.eventManager().logSwgEvent(s.IMPRESSION_SUBSCRIPTION_LINKING_COMPLETE),r}catch(o){throw this.Zt.eventManager().logSwgEvent(s.IMPRESSION_SUBSCRIPTION_LINKING_ERROR),o}}}class Vr{constructor(t,e){this.qh=e,this.openViewPromise=null,this.Xt=t.win(),this.Ht=t.activities(),this.si=t.dialogManager(),this.qh||(this.qh=Promise.reject("No account promise provided")),this.ri=new Ae(this.Xt,this.Ht,de("/waitforsubscriptionlookupiframe"),pe({publicationId:t.pageConfig().getPublicationId(),productId:t.pageConfig().getProductId()}),!0,!0)}async start(){this.openViewPromise=this.si.openView(this.ri);try{const t=await this.qh;return this.si.completeView(this.ri),t}catch(t){throw this.si.completeView(this.ri),t}}}class Yr{constructor(t,e,r,o,h,l=0){this.Hh=l,this.$h=null,this.Jh=null,(r=r||{}).configPromise||(r.configPromise=Promise.resolve()),this.he=new Rn(r.configPromise),this.qt=rs(t),this.Xt=this.qt.getWin(),this.No={windowOpenMode:"auto",analyticsMode:0,enableSwgAnalytics:!1,enablePropensity:!1},o&&this.Qh(o),this._i=e,this.Xh=this.qt.whenReady(),this.Zh=new As(this.qt),this.ae=r.fetcher||new re(this.Xt),this.Ke=new pi(this.Xt,this._i),this.ir=new Un,r.enableGoogleAnalytics&&(this.tl=new Qe(this),this.tl.start()),this.Ht=new class{constructor(t){this.Zt=t,this.Ht=new On.ActivityPorts(t.win())}addDefaultArguments(t){const e=this.Zt,n=e.pageConfig(),s=e.analytics().getContext();return Object.assign({analyticsContext:s.toArray(),publicationId:n.getPublicationId(),productId:n.getProductId(),_client:"SwG ".concat(i),supportsEventManager:!0},t||{})}async el(t,e,i){const n=new class{constructor(t,e,i,n){this.Zt=i,this.il=new On.ActivityIframePort(t,e,n),this.rl={}}whenReady(){return this.il.whenReady()}async connect(){await this.il.connect(),this.il.onMessage((t=>{const e=null==t?void 0:t.RESPONSE;if(!e)return;const i=this.rl[e[0]];if(i){const t=function(t){const e=t?t[0]:null;if(e){const i=M[e];if(i)return new i(t)}throw new Error("Deserialization failed for ".concat(t))}(e);i(t)}})),this.Zt&&this.Zt.eventManager()&&this.on(d,(t=>{var e,i;this.Zt.eventManager().logEvent({eventType:t.getEvent(),eventOriginator:a.SWG_SERVER,isFromUserAction:null==(e=t.getMeta())?void 0:e.getIsFromUserAction(),additionalParameters:t.getParams(),configurationId:null==(i=t.getMeta())?void 0:i.getConfigurationId()})}))}disconnect(){this.il.disconnect()}getMode(){return this.il.getMode()}acceptResult(){return this.il.acceptResult()}onResizeRequest(t){return this.il.onResizeRequest(t)}execute(t){this.il.message({REQUEST:t.toArray()})}on(t,e){let i=null;try{i=t.prototype.label()}catch(n){i=null}if(!i)throw new Error("Invalid data type");if(this.rl[i])throw new Error("Invalid type or duplicate callback for "+i);this.rl[i]=e}resized(){this.il.resized()}}(t,e,this.Zt,i);return await n.connect(),n}async openIframe(t,e,i,n=!1){n&&(i=this.addDefaultArguments(i));const s=await this.Zt.storage().get(yt,!0),r=new URL(e).searchParams;s&&!r.has("sut")&&(e=Zt(e,"sut",s));const o=this.Zt.pageConfig().getPublicationId();return o&&!r.has("publicationId")&&(e=Zt(e,"publicationId",o)),this.el(t,e,i)}open(t,e,i,n,s,r=!1){return r&&(n=this.addDefaultArguments(n)),this.Ht.open(t,e,i,n,s)}onResult(t,e){this.Ht.onResult(t,(t=>{e(new Nn(t))}))}onRedirectError(t){this.Ht.onRedirectError(t)}getOriginalWebActivityPorts(){return this.Ht}}(this),this.On=new Dn(this),this.Sn=new Ur(this),this.ol=new ks(this),this.le=new Ns(this.Xt,this._i,this.ae,this,r.enableDefaultMeteringHandler||!1),this.si=new gs(this.qt),this.ie=new Jn(this,e.getPublicationId(),this.ae,h),this.al=new Br(this.Xt,this,this.ae),this.he.logSwgEvent(s.IMPRESSION_PAGE_LOAD,!1),this.ll=new Gs(this._i,this.ae),this.ul=new Di(this.qt,Promise.resolve(this));const u=new Dr(this.Xt.document);u.prefetch("".concat(n,"/loader.svg")),u.preconnect("https://www.gstatic.com/"),u.preconnect("https://www.google.com/"),Ls.configurePending(this),Zi.configurePending(this),xt(this.qt,ts),this.Ht.onRedirectError((t=>{this.On.addLabels(["redirect"]),this.he.logSwgEvent(s.EVENT_PAYMENT_FAILED,!1),this.Zh.error("Redirect error",t)}))}creationTimestamp(){return this.Hh}doc(){return this.qt}win(){return this.Xt}pageConfig(){return this._i}jserror(){return this.Zh}activities(){return this.Ht}payClient(){return this.Sn}dialogManager(){return this.si}entitlementsManager(){return this.le}callbacks(){return this.ir}storage(){return this.Ke}clientConfigManager(){return this.ie}analytics(){return this.On}init(){}configure(t){this.Qh(t)}Qh(t){let e="";for(const n in t){const s=t[n];switch(n){case"windowOpenMode":s!=ke.AUTO&&s!=ke.REDIRECT&&(e="Unknown windowOpenMode: "+s);break;case"experiments":for(const t of s)i=t,hi(this.Xt)[i]=!0;this.analytics()&&this.analytics().addLabels(s);break;case"analyticsMode":s!=Me.DEFAULT&&s!=Me.IMPRESSIONS&&(e="Unknown analytics mode: "+s);break;case"enableSwgAnalytics":Je(s)||(e="enableSwgAnalytics must be a boolean, type: "+typeof s);break;case"enablePropensity":Je(s)||(e="enablePropensity must be a boolean, type: "+typeof s);break;case"skipAccountCreationScreen":Je(s)||(e="skipAccountCreationScreen must be a boolean, type: "+typeof s);break;case"publisherProvidedId":null==s||"string"==typeof s&&""!=s||(e="publisherProvidedId must be a string, value: "+s);break;case"paySwgVersion":if("string"!=typeof s){e="paySwgVersion must be a string, type: "+typeof s;break}break;default:e="Unknown config property: "+n}}var i;qt(!e,e||void 0),Object.assign(this.No,t)}config(){return this.No}reset(){this.le.reset(),this.closeDialog()}clear(){this.le.clear(),this.closeDialog()}closeDialog(){this.si.completeAll()}start(){if(!this._i.getProductId()||!this._i.isLocked())return Promise.resolve();this.getEntitlements()}async getEntitlements(t){(null==t?void 0:t.publisherProvidedId)&&(t.publisherProvidedId=this.vt);const e=this.le.getEntitlements(t);this.clientConfigManager().fetchClientConfig(e);const i=await e;if(this.On.setReadyForLogging(),this.On.start(),i)try{const t=i.entitlements.map((t=>t.getSku()||"unknown subscriptionToken"));t.length>0&&this.On.setSku(t.join(","))}catch(s){}const n=await this.le.getExperimentConfigFlags().then((t=>t.includes(Oe.BACKGROUND_CLICK_BEHAVIOR_EXPERIMENT)));return this.si.setEnableBackgroundClickExperiment(n),i.clone()}setOnEntitlementsResponse(t){this.ir.setOnEntitlementsResponse(t)}getOffers(t){return this.ll.getOffers(t&&t.productId)}async showOffers(t){return await this.Xh,qt(!t||!t.oldSku,"The showOffers() method cannot be used to update a subscription. Use the showUpdateOffers() method instead."),this.$h=new en(this,t),this.$h.start()}async showUpdateOffers(t){return await this.Xh,qt(!!t&&!!t.oldSku,"The showUpdateOffers() method cannot be used for new subscribers. Use the showOffers() method instead."),new en(this,t).start()}async showSubscribeOption(t){return await this.Xh,new nn(this,t).start()}async showAbbrvOffer(t){return await this.Xh,new sn(this,t).start()}async showContributionOptions(t){return await this.Xh,this.Jh=new Qn(this,t),this.Jh.start()}getLastContributionsFlow(){return this.Jh}async waitForSubscriptionLookup(t){return await this.Xh,new Vr(this,t).start()}setOnLoginRequest(t){this.ir.setOnLoginRequest(t)}triggerLoginRequest(t){this.ir.triggerLoginRequest(t)}setOnLinkComplete(t){this.ir.setOnLinkComplete(t)}async linkAccount(t){return await this.Xh,new xs(this).start(t)}async saveSubscription(t){return await this.Xh,await new Ms(this,t).start()}async showLoginPrompt(){return await this.Xh,new Us(this).start()}async showLoginNotification(){return await this.Xh,new Ds(this).start()}setOnNativeSubscribeRequest(t){this.ir.setOnSubscribeRequest(t)}setOnSubscribeResponse(t){this.ir.setOnSubscribeResponse(t)}setOnPaymentResponse(t){this.ir.setOnPaymentResponse(t)}async subscribe(t){return qt("string"==typeof t,"The subscribe() method can only take a sku as its parameter; for subscription updates please use the updateSubscription() method"),await this.Xh,new Qi(this,{skuId:t}).start()}async updateSubscription(t){return qt(null==t?void 0:t.oldSku,"The updateSubscription() method should be used for subscription updates; for new subscriptions please use the subscribe() method"),await this.Xh,new Qi(this,t).start()}setOnContributionResponse(t){this.ir.setOnContributionResponse(t)}async contribute(t){const e="string"==typeof t?{skuId:t}:t;return await this.Xh,new Qi(this,e,De.UI_CONTRIBUTION).start()}async completeDeferredAccountCreation(t=null){return await this.Xh,new is(this,t).start()}setOnFlowStarted(t){this.ir.setOnFlowStarted(t)}setOnFlowCanceled(t){this.ir.setOnFlowCanceled(t)}createButton(t,e){return this.ul.create(t,e)}attachButton(t,e,i){this.ul.attach(t,e,i)}attachSmartButton(t,e,i){this.ul.attachSmartButton(this,t,e,i)}getPropensityModule(){return Promise.resolve(this.al)}eventManager(){return this.he}getLastOffersFlow(){return this.$h}getEventManager(){return Promise.resolve(this.he)}getLogger(){return Promise.resolve(this.ol)}setShowcaseEntitlement(t){if(!t||!function(t=ne){return"https"===t.protocol||"https:"===t.protocol}(this.win().location)||!Os(this.win().location.search,!0))return Promise.resolve();const e=(i=t.entitlement,Fe[i]||[]);var i;const n=new w;n.setIsUserRegistered(t.isUserRegistered),t.subscriptionTimestamp&&n.setSubscriptionTimestamp(xn(function(t){let e;return e=t>=1e14||t<=-1e14?Math.floor(t/1e3):t>=1e11||t<=-3e10?t:Math.floor(1e3*t),e}(t.subscriptionTimestamp)));for(let s=0;s<e.length;s++)this.eventManager().logEvent({eventType:e[s],eventOriginator:a.SHOWCASE_CLIENT,isFromUserAction:!1,additionalParameters:n});return Promise.resolve()}consumeShowcaseEntitlementJwt(t,e){this.entitlementsManager().parseEntitlements({signedEntitlements:t}).consume(e)}showBestAudienceAction(){Kt("Not implemented yet")}setPublisherProvidedId(t){this.vt=t}async linkSubscription(t){return await this.Xh,new Wr(this).start(t)}async getAvailableInterventions(){return await this.getEntitlements(),this.entitlementsManager().getAvailableInterventions()}}class Kr{constructor(t){this.cl=null,this.dl=null,this.qt=rs(t),this.gl=new Promise((t=>{this.dl=t}))}writeConfigWhenReady(t){return this.cl=t,this.qt.whenReady().then((()=>{this.ml()})),this.gl}ml(){var t,e,i,n,s,r,o,a,h;if(!this.dl)return;const l={productID:null==(t=this.cl)?void 0:t.isPartOfProductId,"@type":null==(e=this.cl)?void 0:e.isPartOfType},u={"@context":"http://schema.org","@type":null==(i=this.cl)?void 0:i.type,isAccessibleForFree:null==(n=this.cl)?void 0:n.isAccessibleForFree,isPartOf:l},c=this.qt.getRootNode().querySelectorAll('script[type="application/ld+json"]');for(let p=0;p<c.length;p++){const t=c[p];if(t.textContent){const e=Wi(t.textContent);if(!e)continue;let i;return i=Array.isArray(e)?e[0]:e,i["@type"]=this._l(i["@type"],null==(s=this.cl)?void 0:s.type),i.isAccessibleForFree=i.isAccessibleForFree||(null==(r=this.cl)?void 0:r.isAccessibleForFree),i.isPartOf?(i.isPartOf["@type"]=this._l(i.isPartOf["@type"],null==(o=this.cl)?void 0:o.isPartOfType),i.isPartOf.productID=i.isPartOf.productID||(null==(a=this.cl)?void 0:a.isPartOfProductId)):i.isPartOf=l,t.textContent=JSON.stringify(e),this.dl(),void(this.dl=null)}}const d=Rt(this.qt.getWin().document,"script",{type:"application/ld+json"},JSON.stringify(u));null==(h=this.qt.getHead())||h.appendChild(d),this.dl(),this.dl=null}_l(t,e){if(!t&&!e)return[];if(!t)return e;if(!e)return t;const i=this.oa(t),n=this.oa(e),s=i.concat(n.filter((t=>i.indexOf(t)<0)));return 1==s.length?s.pop():s}oa(t){return Array.isArray(t)?t:[t]}}const qr="SWG_BASIC",Hr="CHECK_ENTITLEMENTS";class $r{constructor(t){this.fl=!1,this.El=null,this.wl=null,this.bl=null,this.wo=!0,this.No={},this.Hh=Date.now(),this.qt=rs(t),this.Tl=new Promise((t=>{this.El=t}))}Il(t){return this.No.publisherProvidedId=this.vt,this.fl||!t||this.wl?t&&this.bl&&this.bl.check():(this.fl=!0,this.bl=new Ws(this.qt),this.bl.resolveConfig().then((t=>{this.bl=null,this.El(new Jr(this.qt,t,{configPromise:this.Tl.then(),enableDefaultMeteringHandler:this.wo},this.No,this.pr,this.Hh)),this.El=null}),(t=>{this.El(Promise.reject(t)),this.El=null}))),this.Tl}async yl(t){this.wl=new Kr(this.qt),await this.wl.writeConfigWhenReady(t),this.wl=null,this.Il(!0)}init({type:t,isAccessibleForFree:e,isPartOfType:i,isPartOfProductId:n,clientOptions:s,autoPromptType:r,alwaysShow:o=!1,disableDefaultMeteringHandler:a=!1,publisherProvidedId:h}){this.wo=!a,this.vt=h;const l=this.Sl(n);this.yl({type:t,isAccessibleForFree:null!=e?e:l,isPartOfType:i,isPartOfProductId:n}),this.pr=Object.assign({},s,{forceLangInIframes:!0});let u=e;l&&(null!=u||(u=!0)),this.setupAndShowAutoPrompt({autoPromptType:r,alwaysShow:o,isClosable:u,contentType:this.Ol(null!=e?e:l)}),this.setOnLoginRequest(),this.processEntitlements()}async setOnEntitlementsResponse(t){(await this.Il(!1)).setOnEntitlementsResponse(t)}async setOnPaymentResponse(t){(await this.Il(!1)).setOnPaymentResponse(t)}async setOnLoginRequest(){(await this.Il(!1)).setOnLoginRequest()}async setupAndShowAutoPrompt(t){(await this.Il(!1)).setupAndShowAutoPrompt(t)}async dismissSwgUI(){(await this.Il(!1)).dismissSwgUI()}async setupButtons(){(await this.Il(!1)).setupButtons()}async processEntitlements(){(await this.Il(!1)).processEntitlements()}Sl(t){return t.endsWith(":openaccess")}Ol(t){return t?D.OPEN:D.CLOSED}}class Jr{constructor(t,e,i={},n,s,r=0){this.Hh=r,this.qt=rs(t),this.Xt=this.qt.getWin(),i.configPromise||(i.configPromise=Promise.resolve()),i.fetcher=i.fetcher||new re(this.Xt),i.enableGoogleAnalytics=!0,this.ae=i.fetcher,this.Cl=new Yr(t,e,i,n,s,r),this.entitlementsManager().blockNextToast(),e.isLocked()&&this.entitlementsManager().enableMeteredByGoogle(),this.Nl((()=>{this.dismissSwgUI(),this.Cl.showOffers({isClosable:!0})})),this.Cl.start(),this.Cl.clientConfigManager().fetchClientConfig(this.Cl.getEntitlements()),this.vl=new ye(this,this.ae),this.vl.start(),this.Al=new Ri(this,this.Cl),this.ul=new Di(this.qt,Promise.resolve(this.Cl)),this.ul.init()}configuredClassicRuntime(){return this.Cl}creationTimestamp(){return this.Hh}doc(){return this.qt}win(){return this.Xt}config(){return this.Cl.config()}pageConfig(){return this.Cl.pageConfig()}activities(){return this.Cl.activities()}payClient(){return this.Cl.payClient()}dialogManager(){return this.Cl.dialogManager()}entitlementsManager(){return this.Cl.entitlementsManager()}callbacks(){return this.Cl.callbacks()}storage(){return this.Cl.storage()}analytics(){return this.Cl.analytics()}jserror(){return this.Cl.jserror()}eventManager(){return this.Cl.eventManager()}clientConfigManager(){return this.Cl.clientConfigManager()}init(){}setOnEntitlementsResponse(t){this.Cl.setOnEntitlementsResponse(t)}setOnPaymentResponse(t){this.Cl.setOnPaymentResponse(t)}setOnLoginRequest(){this.Cl.setOnLoginRequest((()=>{const t=this.pageConfig().getPublicationId(),e=pe({publicationId:t});this.activities().open(Hr,de("/checkentitlements",{publicationId:t}),"_blank",e,{width:600,height:600})}))}processEntitlements(){this.activities().onResult(Hr,this.entitlementsResponseHandler.bind(this))}async entitlementsResponseHandler(t){const e=await Ne(t,le(),!0,!1),i=e.jwt;if(i){const t=this.Al.getLastAudienceActionFlow();t instanceof Te?t.close():this.Cl.closeDialog(),this.entitlementsManager().pushNextEntitlements(i);const n=e.usertoken;n&&this.storage().set(yt,n,!0),new Ft(this,de("/toastiframe",{flavor:"basic"})).open()}else{const t=this.Cl.getLastOffersFlow();if(t)return void t.showNoEntitlementFoundToast();const e=this.Cl.getLastContributionsFlow();if(e)return void e.showNoEntitlementFoundToast();const i=this.Al.getLastAudienceActionFlow();if(i)return void i.showNoEntitlementFoundToast();const n=this.clientConfigManager().getLanguage(),s=be(pt,n);new Ft(this,de("/toastiframe",{flavor:"custom",customText:s})).open()}}setupAndShowAutoPrompt(t){return this.Al.showAutoPrompt(t)}dismissSwgUI(){this.dialogManager().completeAll()}async setupButtons(){const t=await this.clientConfigManager().shouldEnableButton();this.ul.attachButtonsWithAttribute("swg-standard-button",[Mi.SUBSCRIPTION,Mi.CONTRIBUTION],{theme:this.clientConfigManager().getTheme(),lang:this.clientConfigManager().getLanguage(),enable:!!t},{[Mi.SUBSCRIPTION]:()=>{this.Cl.showOffers({isClosable:!0})},[Mi.CONTRIBUTION]:()=>{this.Cl.showContributionOptions({isClosable:!0})}})}Nl(t){this.callbacks().setOnOffersFlowRequest(t)}}Yt("BasicSubscriptions Runtime: ".concat(i)),function(t){if(t[qr]&&!Array.isArray(t[qr]))return;const e=new $r(t),i=function(t){return{init:t.init.bind(t),setOnEntitlementsResponse:t.setOnEntitlementsResponse.bind(t),setOnPaymentResponse:t.setOnPaymentResponse.bind(t),setOnLoginRequest:t.setOnLoginRequest.bind(t),setupAndShowAutoPrompt:t.setupAndShowAutoPrompt.bind(t),dismissSwgUI:t.dismissSwgUI.bind(t)}}(e);async function n(t){t&&(await 0,t(i))}const s=[].concat(t[qr]);for(const r of s)n(r);t[qr]={push:n},e.setupButtons()}(self)}();
//# sourceMappingURL=swg-basic.js.map
 })();
